services:
  collection-server:
    extends:
      file: ../base/compose.yaml
      service: collection-server
    build:
      dockerfile: ./docker/test/Dockerfile
    environment:
      COLLECTION_ENV: development
    volumes:
      - ../../:/go/src/github.com/traPtitech/trap-collection-server
    working_dir: /go/src/github.com/traPtitech/trap-collection-server
    command: go test ./src/... -v -cover -race
  mariadb:
    extends:
      file: ../base/compose.yaml
      service: mariadb
  s3:
    extends:
      file: ../base/compose.yaml
      service: s3
