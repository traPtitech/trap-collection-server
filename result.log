task: Task "os:unix:generate" is up to date
task: [os:unix:test] go test ./src/... -v -race -vet=off
?   	github.com/traPtitech/trap-collection-server/src/auth	[no test files]
?   	github.com/traPtitech/trap-collection-server/src/auth/mock	[no test files]
=== RUN   TestGetOIDCSession
=== PAUSE TestGetOIDCSession
=== RUN   TestRevokeOIDCSession
=== PAUSE TestRevokeOIDCSession
=== RUN   TestGetMe
=== PAUSE TestGetMe
=== RUN   TestGetAllActiveUsers
=== PAUSE TestGetAllActiveUsers
=== RUN   TestGetActiveUsers
=== PAUSE TestGetActiveUsers
=== CONT  TestRevokeOIDCSession
=== CONT  TestGetMe
=== CONT  TestGetActiveUsers
=== CONT  TestGetOIDCSession
=== CONT  TestGetAllActiveUsers
=== RUN   TestRevokeOIDCSession/問題がないのでエラーなし
=== RUN   TestGetMe/特に問題ないのでエラーなし
=== RUN   TestGetAllActiveUsers/特に問題ないのでエラーなし
=== RUN   TestGetActiveUsers/特に問題ないのでエラーなし
=== RUN   TestGetOIDCSession/特に問題ないのでエラーなし
=== RUN   TestRevokeOIDCSession/traQが壊れているのでエラー
=== RUN   TestGetActiveUsers/traQが壊れているのでエラー
=== RUN   TestGetOIDCSession/traQが壊れているのでエラー
=== RUN   TestGetAllActiveUsers/traQが壊れているのでエラー
--- PASS: TestRevokeOIDCSession (0.02s)
    --- PASS: TestRevokeOIDCSession/問題がないのでエラーなし (0.02s)
    --- PASS: TestRevokeOIDCSession/traQが壊れているのでエラー (0.00s)
=== RUN   TestGetMe/traQが壊れているのでエラー
=== RUN   TestGetActiveUsers/access_tokenが誤っているのでエラー
=== RUN   TestGetOIDCSession/clientIDが誤っているのでエラー
=== RUN   TestGetAllActiveUsers/access_tokenが誤っているのでエラー
=== RUN   TestGetMe/access_tokenが誤っているのでエラー
=== RUN   TestGetActiveUsers/stateが0なのでdeactivated
=== RUN   TestGetAllActiveUsers/stateが0なのでdeactivated
=== RUN   TestGetOIDCSession/codeが誤っているのでエラー
=== RUN   TestGetMe/stateが0なのでdeactivated
=== RUN   TestGetActiveUsers/stateが2なのでsuspended
=== RUN   TestGetOIDCSession/codeVerifierが誤っているのでエラー
=== RUN   TestGetAllActiveUsers/stateが2なのでsuspended
=== RUN   TestGetMe/stateが2なのでsuspended
=== RUN   TestGetActiveUsers/stateが0~2でないのでエラー
--- PASS: TestGetOIDCSession (0.02s)
    --- PASS: TestGetOIDCSession/特に問題ないのでエラーなし (0.02s)
    --- PASS: TestGetOIDCSession/traQが壊れているのでエラー (0.00s)
    --- PASS: TestGetOIDCSession/clientIDが誤っているのでエラー (0.00s)
    --- PASS: TestGetOIDCSession/codeが誤っているのでエラー (0.00s)
    --- PASS: TestGetOIDCSession/codeVerifierが誤っているのでエラー (0.00s)
=== RUN   TestGetAllActiveUsers/stateが0~2でないのでエラー
=== RUN   TestGetMe/stateが0~2でないのでエラー
=== RUN   TestGetActiveUsers/userが0人でもエラーなし
=== RUN   TestGetAllActiveUsers/userが0人でもエラーなし
--- PASS: TestGetMe (0.02s)
    --- PASS: TestGetMe/特に問題ないのでエラーなし (0.02s)
    --- PASS: TestGetMe/traQが壊れているのでエラー (0.00s)
    --- PASS: TestGetMe/access_tokenが誤っているのでエラー (0.00s)
    --- PASS: TestGetMe/stateが0なのでdeactivated (0.00s)
    --- PASS: TestGetMe/stateが2なのでsuspended (0.00s)
    --- PASS: TestGetMe/stateが0~2でないのでエラー (0.00s)
=== RUN   TestGetActiveUsers/userが複数人でもエラーなし
=== RUN   TestGetAllActiveUsers/userが複数人でもエラーなし
--- PASS: TestGetActiveUsers (0.02s)
    --- PASS: TestGetActiveUsers/特に問題ないのでエラーなし (0.02s)
    --- PASS: TestGetActiveUsers/traQが壊れているのでエラー (0.00s)
    --- PASS: TestGetActiveUsers/access_tokenが誤っているのでエラー (0.00s)
    --- PASS: TestGetActiveUsers/stateが0なのでdeactivated (0.00s)
    --- PASS: TestGetActiveUsers/stateが2なのでsuspended (0.00s)
    --- PASS: TestGetActiveUsers/stateが0~2でないのでエラー (0.00s)
    --- PASS: TestGetActiveUsers/userが0人でもエラーなし (0.00s)
    --- PASS: TestGetActiveUsers/userが複数人でもエラーなし (0.00s)
--- PASS: TestGetAllActiveUsers (0.02s)
    --- PASS: TestGetAllActiveUsers/特に問題ないのでエラーなし (0.02s)
    --- PASS: TestGetAllActiveUsers/traQが壊れているのでエラー (0.00s)
    --- PASS: TestGetAllActiveUsers/access_tokenが誤っているのでエラー (0.00s)
    --- PASS: TestGetAllActiveUsers/stateが0なのでdeactivated (0.00s)
    --- PASS: TestGetAllActiveUsers/stateが2なのでsuspended (0.00s)
    --- PASS: TestGetAllActiveUsers/stateが0~2でないのでエラー (0.00s)
    --- PASS: TestGetAllActiveUsers/userが0人でもエラーなし (0.00s)
    --- PASS: TestGetAllActiveUsers/userが複数人でもエラーなし (0.00s)
PASS
ok  	github.com/traPtitech/trap-collection-server/src/auth/traQ	(cached)
?   	github.com/traPtitech/trap-collection-server/src/cache	[no test files]
?   	github.com/traPtitech/trap-collection-server/src/cache/mock	[no test files]
# github.com/traPtitech/trap-collection-server/src/cache/ristretto.test
ld: warning: '/private/var/folders/s9/864hmsz17cgdx8gd_l92nyxc0000gn/T/go-link-4003908695/000013.o' has malformed LC_DYSYMTAB, expected 98 undefined symbols to start at index 1626, found 95 undefined symbols starting at index 1626
=== RUN   TestGetMe
=== PAUSE TestGetMe
=== RUN   TestSetMe
=== PAUSE TestSetMe
=== RUN   TestGetAllActiveUsers
=== PAUSE TestGetAllActiveUsers
=== RUN   TestSetAllActiveUsers
=== PAUSE TestSetAllActiveUsers
=== RUN   TestGetActiveUsers
=== PAUSE TestGetActiveUsers
=== RUN   TestSetActiveUsers
=== PAUSE TestSetActiveUsers
=== CONT  TestGetMe
=== CONT  TestGetAllActiveUsers
=== CONT  TestSetAllActiveUsers
=== CONT  TestSetMe
=== RUN   TestGetAllActiveUsers/特に問題ないのでエラーなし
=== CONT  TestSetActiveUsers
=== RUN   TestSetMe/特に問題ないのでエラーなし
=== PAUSE TestSetMe/特に問題ないのでエラーなし
=== RUN   TestSetMe/元からキーがあっても上書きする
=== PAUSE TestSetMe/元からキーがあっても上書きする
=== CONT  TestSetMe/特に問題ないのでエラーなし
=== CONT  TestGetActiveUsers
=== CONT  TestSetMe/元からキーがあっても上書きする
=== RUN   TestGetActiveUsers/特に問題ないのでエラーなし
=== RUN   TestGetActiveUsers/ユーザー数が500人でも問題なし
=== RUN   TestGetMe/特に問題ないのでエラーなし
=== RUN   TestSetAllActiveUsers/特に問題ないのでエラーなし
=== RUN   TestSetAllActiveUsers/ユーザー数が500人でもエラーなし
=== RUN   TestSetActiveUsers/特に問題ないのでエラーなし
=== RUN   TestGetAllActiveUsers/ユーザー数が500人でも問題なし
=== RUN   TestSetAllActiveUsers/元からキーがあっても上書きする
--- PASS: TestSetAllActiveUsers (0.01s)
    --- PASS: TestSetAllActiveUsers/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestSetAllActiveUsers/ユーザー数が500人でもエラーなし (0.00s)
    --- PASS: TestSetAllActiveUsers/元からキーがあっても上書きする (0.00s)
=== RUN   TestGetMe/キーが存在しないのでErrCacheMiss
=== RUN   TestGetActiveUsers/キーが存在しないのでErrCacheMiss
=== RUN   TestSetActiveUsers/ユーザー数が500人でもエラーなし
--- PASS: TestGetMe (0.01s)
    --- PASS: TestGetMe/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetMe/キーが存在しないのでErrCacheMiss (0.00s)
--- PASS: TestGetActiveUsers (0.01s)
    --- PASS: TestGetActiveUsers/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetActiveUsers/ユーザー数が500人でも問題なし (0.00s)
    --- PASS: TestGetActiveUsers/キーが存在しないのでErrCacheMiss (0.00s)
=== RUN   TestSetActiveUsers/元からキーがあっても上書きする
--- PASS: TestSetActiveUsers (0.01s)
    --- PASS: TestSetActiveUsers/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestSetActiveUsers/ユーザー数が500人でもエラーなし (0.00s)
    --- PASS: TestSetActiveUsers/元からキーがあっても上書きする (0.00s)
=== RUN   TestGetAllActiveUsers/キーが存在しないのでErrCacheMiss
--- PASS: TestGetAllActiveUsers (0.01s)
    --- PASS: TestGetAllActiveUsers/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetAllActiveUsers/ユーザー数が500人でも問題なし (0.00s)
    --- PASS: TestGetAllActiveUsers/キーが存在しないのでErrCacheMiss (0.00s)
--- PASS: TestSetMe (0.00s)
    --- PASS: TestSetMe/特に問題ないのでエラーなし (2.01s)
    --- PASS: TestSetMe/元からキーがあっても上書きする (2.01s)
PASS
ok  	github.com/traPtitech/trap-collection-server/src/cache/ristretto	(cached)
?   	github.com/traPtitech/trap-collection-server/src/config	[no test files]
?   	github.com/traPtitech/trap-collection-server/src/config/mock	[no test files]
?   	github.com/traPtitech/trap-collection-server/src/config/v1	[no test files]
=== RUN   TestIsExpired
=== PAUSE TestIsExpired
=== RUN   TestOIDCSessionIsExpired
=== PAUSE TestOIDCSessionIsExpired
=== CONT  TestIsExpired
=== CONT  TestOIDCSessionIsExpired
=== RUN   TestIsExpired/期限前なのでfalse
=== RUN   TestOIDCSessionIsExpired/期限前なのでfalse
=== RUN   TestOIDCSessionIsExpired/期限後なのでtrue
=== RUN   TestIsExpired/期限後なのでtrue
--- PASS: TestOIDCSessionIsExpired (0.00s)
    --- PASS: TestOIDCSessionIsExpired/期限前なのでfalse (0.00s)
    --- PASS: TestOIDCSessionIsExpired/期限後なのでtrue (0.00s)
--- PASS: TestIsExpired (0.00s)
    --- PASS: TestIsExpired/期限前なのでfalse (0.00s)
    --- PASS: TestIsExpired/期限後なのでtrue (0.00s)
PASS
ok  	github.com/traPtitech/trap-collection-server/src/domain	(cached)
=== RUN   TestNewGameFileHash
=== PAUSE TestNewGameFileHash
=== RUN   TestGameFileEntryPointValidate
=== PAUSE TestGameFileEntryPointValidate
=== RUN   TestGameGenreValidate
=== PAUSE TestGameGenreValidate
=== RUN   TestGameNameValidate
=== PAUSE TestGameNameValidate
=== RUN   TestGameVersionNameValidate
=== PAUSE TestGameVersionNameValidate
=== RUN   TestLauncherEnvironmentAcceptGameFileTypes
=== PAUSE TestLauncherEnvironmentAcceptGameFileTypes
=== RUN   TestEditionNameValidate
=== PAUSE TestEditionNameValidate
=== RUN   TestNewLauncherUserProductKey
=== PAUSE TestNewLauncherUserProductKey
=== RUN   TestLauncherUserProductKey
=== PAUSE TestLauncherUserProductKey
=== RUN   TestNewLauncherSessionAccessToken
=== PAUSE TestNewLauncherSessionAccessToken
=== RUN   TestLauncherSessionAccessTokenValidate
=== PAUSE TestLauncherSessionAccessTokenValidate
=== RUN   TestNewOIDCCodeVerifier
=== PAUSE TestNewOIDCCodeVerifier
=== RUN   TestGetCodeChallenge
=== PAUSE TestGetCodeChallenge
=== RUN   TestTraPMemberNameValidate
=== PAUSE TestTraPMemberNameValidate
=== CONT  TestGameFileEntryPointValidate
=== CONT  TestEditionNameValidate
=== RUN   TestGameFileEntryPointValidate/特に問題ないのでエラーなし
=== CONT  TestGameGenreValidate
=== CONT  TestGameNameValidate
=== CONT  TestNewGameFileHash
=== RUN   TestGameNameValidate/英数字なのでエラーなし
=== RUN   TestGameFileEntryPointValidate/空文字列はエラー
--- PASS: TestNewGameFileHash (0.00s)
=== CONT  TestLauncherEnvironmentAcceptGameFileTypes
=== RUN   TestLauncherEnvironmentAcceptGameFileTypes/windowsの場合、jarとwindowsを許可する
=== CONT  TestLauncherSessionAccessTokenValidate
=== RUN   TestLauncherSessionAccessTokenValidate/英語小文字64文字なのでエラーなし
--- PASS: TestGameFileEntryPointValidate (0.00s)
    --- PASS: TestGameFileEntryPointValidate/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGameFileEntryPointValidate/空文字列はエラー (0.00s)
=== CONT  TestNewOIDCCodeVerifier
=== CONT  TestTraPMemberNameValidate
=== RUN   TestGameNameValidate/英数字32字でもエラーなし
=== RUN   TestLauncherSessionAccessTokenValidate/aを含んでもエラーなし
=== RUN   TestTraPMemberNameValidate/正常なtraQ_IDなのでエラーなし
=== CONT  TestGetCodeChallenge
=== RUN   TestGameNameValidate/英数字33字でエラー
=== RUN   TestTraPMemberNameValidate/空なのでエラー
=== RUN   TestEditionNameValidate/英数字なのでエラーなし
=== RUN   TestGameNameValidate/マルチバイト文字32字でもエラーなし
=== RUN   TestGameGenreValidate/特に問題ないのでエラー無し
=== RUN   TestLauncherSessionAccessTokenValidate/zを含んでもエラーなし
=== RUN   TestLauncherEnvironmentAcceptGameFileTypes/macの場合、jarとmacを許可する
=== RUN   TestGetCodeChallenge/sha256
=== RUN   TestEditionNameValidate/英数字32字でもエラーなし
=== RUN   TestTraPMemberNameValidate/32文字なのでエラーなし
=== RUN   TestGameNameValidate/マルチバイト文字33字でエラー
--- PASS: TestLauncherEnvironmentAcceptGameFileTypes (0.00s)
    --- PASS: TestLauncherEnvironmentAcceptGameFileTypes/windowsの場合、jarとwindowsを許可する (0.00s)
    --- PASS: TestLauncherEnvironmentAcceptGameFileTypes/macの場合、jarとmacを許可する (0.00s)
=== CONT  TestNewLauncherSessionAccessToken
=== RUN   TestLauncherSessionAccessTokenValidate/`を含むのでエラー
=== RUN   TestGameGenreValidate/日本語で32文字でもエラー無し
=== RUN   TestGameNameValidate/空文字でエラー
=== RUN   TestEditionNameValidate/英数字33字でエラー
=== CONT  TestLauncherUserProductKey
=== RUN   TestTraPMemberNameValidate/33文字なのでエラー
=== RUN   TestLauncherSessionAccessTokenValidate/{を含むのでエラー
--- PASS: TestGetCodeChallenge (0.00s)
    --- PASS: TestGetCodeChallenge/sha256 (0.00s)
=== RUN   TestGameGenreValidate/空白なのでエラー
=== RUN   TestLauncherUserProductKey/英語小文字25文字の5文字ごとでの-区切りなのでエラーなし
=== RUN   TestEditionNameValidate/マルチバイト文字32字でもエラーなし
--- PASS: TestGameNameValidate (0.00s)
    --- PASS: TestGameNameValidate/英数字なのでエラーなし (0.00s)
    --- PASS: TestGameNameValidate/英数字32字でもエラーなし (0.00s)
    --- PASS: TestGameNameValidate/英数字33字でエラー (0.00s)
    --- PASS: TestGameNameValidate/マルチバイト文字32字でもエラーなし (0.00s)
    --- PASS: TestGameNameValidate/マルチバイト文字33字でエラー (0.00s)
    --- PASS: TestGameNameValidate/空文字でエラー (0.00s)
=== RUN   TestTraPMemberNameValidate/数字を含んでもエラーなし
=== CONT  TestGameVersionNameValidate
=== RUN   TestLauncherUserProductKey/aを含んでもエラーなし
=== RUN   TestLauncherSessionAccessTokenValidate/英語大文字を含んでもエラーなし
=== RUN   TestGameGenreValidate/32文字以上なのでエラー
=== RUN   TestLauncherUserProductKey/zを含んでもエラーなし
=== RUN   TestEditionNameValidate/マルチバイト文字33字でエラー
=== RUN   TestGameVersionNameValidate/正しいSemantic_Versionなのでエラーなし
=== RUN   TestTraPMemberNameValidate/大文字を含んでもエラーなし
=== RUN   TestLauncherSessionAccessTokenValidate/Zを含んでもエラーなし
=== CONT  TestNewLauncherUserProductKey
--- PASS: TestGameGenreValidate (0.00s)
    --- PASS: TestGameGenreValidate/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestGameGenreValidate/日本語で32文字でもエラー無し (0.00s)
    --- PASS: TestGameGenreValidate/空白なのでエラー (0.00s)
    --- PASS: TestGameGenreValidate/32文字以上なのでエラー (0.00s)
=== RUN   TestEditionNameValidate/空文字でエラー
=== RUN   TestLauncherSessionAccessTokenValidate/Aを含んでもエラーなし
=== RUN   TestLauncherUserProductKey/`を含むのでエラー
--- PASS: TestEditionNameValidate (0.00s)
    --- PASS: TestEditionNameValidate/英数字なのでエラーなし (0.00s)
    --- PASS: TestEditionNameValidate/英数字32字でもエラーなし (0.00s)
    --- PASS: TestEditionNameValidate/英数字33字でエラー (0.00s)
    --- PASS: TestEditionNameValidate/マルチバイト文字32字でもエラーなし (0.00s)
    --- PASS: TestEditionNameValidate/マルチバイト文字33字でエラー (0.00s)
    --- PASS: TestEditionNameValidate/空文字でエラー (0.00s)
=== RUN   TestGameVersionNameValidate/バージョン名が空文字列なのでエラー
=== RUN   TestLauncherSessionAccessTokenValidate/[を含むのでエラー
=== RUN   TestTraPMemberNameValidate/_を含んでもエラーなし
=== RUN   TestLauncherUserProductKey/{を含むのでエラー
=== RUN   TestLauncherSessionAccessTokenValidate/@を含むのでエラー
=== RUN   TestLauncherUserProductKey/英語大文字を含んでもエラーなし
=== RUN   TestLauncherSessionAccessTokenValidate/英語大文字のみでもエラーなし
=== RUN   TestTraPMemberNameValidate/-を含んでもエラーなし
=== RUN   TestGameVersionNameValidate/メジャーバージョンのみでもエラーなし
=== RUN   TestLauncherSessionAccessTokenValidate/数字を含んでもエラーなし
=== RUN   TestLauncherUserProductKey/Zを含んでもエラーなし
=== RUN   TestGameVersionNameValidate/メジャーバージョンとマイナーバージョンのみでもエラーなし
=== RUN   TestLauncherUserProductKey/Aを含んでもエラーなし
=== RUN   TestTraPMemberNameValidate/マルチバイト文字を含むのでエラー
=== RUN   TestLauncherSessionAccessTokenValidate/0を含んでもエラーなし
=== RUN   TestLauncherUserProductKey/[を含むのでエラー
=== RUN   TestGameVersionNameValidate/PRERELEASEありでもエラーなし
=== RUN   TestLauncherUserProductKey/@を含むのでエラー
=== RUN   TestTraPMemberNameValidate/`を含むのでエラー
=== RUN   TestLauncherSessionAccessTokenValidate/9を含んでもエラーなし
=== RUN   TestTraPMemberNameValidate/{を含むのでエラー
=== RUN   TestLauncherUserProductKey/英語大文字のみでもエラーなし
=== RUN   TestGameVersionNameValidate/BUILDありでもエラーなし
=== RUN   TestLauncherSessionAccessTokenValidate//を含むのでエラー
=== RUN   TestTraPMemberNameValidate/[を含むのでエラー
--- PASS: TestNewOIDCCodeVerifier (0.00s)
=== RUN   TestGameVersionNameValidate/PRERELEASEとBUILDありでもエラーなし
=== RUN   TestTraPMemberNameValidate//を含むのでエラー
=== RUN   TestLauncherUserProductKey/数字を含んでもエラーなし
=== RUN   TestLauncherSessionAccessTokenValidate/:を含むのでエラー
=== RUN   TestTraPMemberNameValidate/:を含むのでエラー
=== RUN   TestGameVersionNameValidate/数字以外の文字列を含むバージョン名なのでエラー
--- PASS: TestTraPMemberNameValidate (0.00s)
    --- PASS: TestTraPMemberNameValidate/正常なtraQ_IDなのでエラーなし (0.00s)
    --- PASS: TestTraPMemberNameValidate/空なのでエラー (0.00s)
    --- PASS: TestTraPMemberNameValidate/32文字なのでエラーなし (0.00s)
    --- PASS: TestTraPMemberNameValidate/33文字なのでエラー (0.00s)
    --- PASS: TestTraPMemberNameValidate/数字を含んでもエラーなし (0.00s)
    --- PASS: TestTraPMemberNameValidate/大文字を含んでもエラーなし (0.00s)
    --- PASS: TestTraPMemberNameValidate/_を含んでもエラーなし (0.00s)
    --- PASS: TestTraPMemberNameValidate/-を含んでもエラーなし (0.00s)
    --- PASS: TestTraPMemberNameValidate/マルチバイト文字を含むのでエラー (0.00s)
    --- PASS: TestTraPMemberNameValidate/`を含むのでエラー (0.00s)
    --- PASS: TestTraPMemberNameValidate/{を含むのでエラー (0.00s)
    --- PASS: TestTraPMemberNameValidate/[を含むのでエラー (0.00s)
    --- PASS: TestTraPMemberNameValidate//を含むのでエラー (0.00s)
    --- PASS: TestTraPMemberNameValidate/:を含むのでエラー (0.00s)
=== RUN   TestLauncherUserProductKey/0を含んでもエラーなし
=== RUN   TestLauncherSessionAccessTokenValidate/数字のみでもエラーなし
--- PASS: TestGameVersionNameValidate (0.00s)
    --- PASS: TestGameVersionNameValidate/正しいSemantic_Versionなのでエラーなし (0.00s)
    --- PASS: TestGameVersionNameValidate/バージョン名が空文字列なのでエラー (0.00s)
    --- PASS: TestGameVersionNameValidate/メジャーバージョンのみでもエラーなし (0.00s)
    --- PASS: TestGameVersionNameValidate/メジャーバージョンとマイナーバージョンのみでもエラーなし (0.00s)
    --- PASS: TestGameVersionNameValidate/PRERELEASEありでもエラーなし (0.00s)
    --- PASS: TestGameVersionNameValidate/BUILDありでもエラーなし (0.00s)
    --- PASS: TestGameVersionNameValidate/PRERELEASEとBUILDありでもエラーなし (0.00s)
    --- PASS: TestGameVersionNameValidate/数字以外の文字列を含むバージョン名なのでエラー (0.00s)
--- PASS: TestNewLauncherSessionAccessToken (0.00s)
=== RUN   TestLauncherUserProductKey/9を含んでもエラーなし
=== RUN   TestLauncherSessionAccessTokenValidate/文字数が65文字以上なのでエラー
=== RUN   TestLauncherUserProductKey//を含むのでエラー
=== RUN   TestLauncherSessionAccessTokenValidate/文字数が63文字以下なのでエラー
=== RUN   TestLauncherUserProductKey/:を含むのでエラー
=== RUN   TestLauncherUserProductKey/数字のみでもエラーなし
--- PASS: TestLauncherSessionAccessTokenValidate (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/英語小文字64文字なのでエラーなし (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/aを含んでもエラーなし (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/zを含んでもエラーなし (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/`を含むのでエラー (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/{を含むのでエラー (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/英語大文字を含んでもエラーなし (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/Zを含んでもエラーなし (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/Aを含んでもエラーなし (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/[を含むのでエラー (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/@を含むのでエラー (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/英語大文字のみでもエラーなし (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/数字を含んでもエラーなし (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/0を含んでもエラーなし (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/9を含んでもエラーなし (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate//を含むのでエラー (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/:を含むのでエラー (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/数字のみでもエラーなし (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/文字数が65文字以上なのでエラー (0.00s)
    --- PASS: TestLauncherSessionAccessTokenValidate/文字数が63文字以下なのでエラー (0.00s)
--- PASS: TestNewLauncherUserProductKey (0.00s)
=== RUN   TestLauncherUserProductKey/文字数が30文字以上なのでエラー
=== RUN   TestLauncherUserProductKey/文字数が28文字以下なのでエラー
=== RUN   TestLauncherUserProductKey/6番目が-でないのでエラー
=== RUN   TestLauncherUserProductKey/12番目が-でないのでエラー
=== RUN   TestLauncherUserProductKey/18番目が-でないのでエラー
=== RUN   TestLauncherUserProductKey/24番目が-でないのでエラー
=== RUN   TestLauncherUserProductKey/6,12,18,24番目以外に-があるのでエラー
--- PASS: TestLauncherUserProductKey (0.00s)
    --- PASS: TestLauncherUserProductKey/英語小文字25文字の5文字ごとでの-区切りなのでエラーなし (0.00s)
    --- PASS: TestLauncherUserProductKey/aを含んでもエラーなし (0.00s)
    --- PASS: TestLauncherUserProductKey/zを含んでもエラーなし (0.00s)
    --- PASS: TestLauncherUserProductKey/`を含むのでエラー (0.00s)
    --- PASS: TestLauncherUserProductKey/{を含むのでエラー (0.00s)
    --- PASS: TestLauncherUserProductKey/英語大文字を含んでもエラーなし (0.00s)
    --- PASS: TestLauncherUserProductKey/Zを含んでもエラーなし (0.00s)
    --- PASS: TestLauncherUserProductKey/Aを含んでもエラーなし (0.00s)
    --- PASS: TestLauncherUserProductKey/[を含むのでエラー (0.00s)
    --- PASS: TestLauncherUserProductKey/@を含むのでエラー (0.00s)
    --- PASS: TestLauncherUserProductKey/英語大文字のみでもエラーなし (0.00s)
    --- PASS: TestLauncherUserProductKey/数字を含んでもエラーなし (0.00s)
    --- PASS: TestLauncherUserProductKey/0を含んでもエラーなし (0.00s)
    --- PASS: TestLauncherUserProductKey/9を含んでもエラーなし (0.00s)
    --- PASS: TestLauncherUserProductKey//を含むのでエラー (0.00s)
    --- PASS: TestLauncherUserProductKey/:を含むのでエラー (0.00s)
    --- PASS: TestLauncherUserProductKey/数字のみでもエラーなし (0.00s)
    --- PASS: TestLauncherUserProductKey/文字数が30文字以上なのでエラー (0.00s)
    --- PASS: TestLauncherUserProductKey/文字数が28文字以下なのでエラー (0.00s)
    --- PASS: TestLauncherUserProductKey/6番目が-でないのでエラー (0.00s)
    --- PASS: TestLauncherUserProductKey/12番目が-でないのでエラー (0.00s)
    --- PASS: TestLauncherUserProductKey/18番目が-でないのでエラー (0.00s)
    --- PASS: TestLauncherUserProductKey/24番目が-でないのでエラー (0.00s)
    --- PASS: TestLauncherUserProductKey/6,12,18,24番目以外に-があるのでエラー (0.00s)
PASS
ok  	github.com/traPtitech/trap-collection-server/src/domain/values	(cached)
?   	github.com/traPtitech/trap-collection-server/src/handler	[no test files]
=== RUN   TestGetSession
=== PAUSE TestGetSession
=== CONT  TestGetSession
=== RUN   TestGetSession/特に問題ないのでエラーなし
=== RUN   TestGetSession/セッションが存在しなくてもエラーなし
--- PASS: TestGetSession (0.00s)
    --- PASS: TestGetSession/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetSession/セッションが存在しなくてもエラーなし (0.00s)
PASS
ok  	github.com/traPtitech/trap-collection-server/src/handler/common	(cached)
# github.com/traPtitech/trap-collection-server/src/handler/v2.test
ld: warning: '/private/var/folders/s9/864hmsz17cgdx8gd_l92nyxc0000gn/T/go-link-3111662278/000013.o' has malformed LC_DYSYMTAB, expected 98 undefined symbols to start at index 1626, found 95 undefined symbols starting at index 1626
=== RUN   TestGetAdmins
=== PAUSE TestGetAdmins
=== RUN   TestPostAdmins
=== PAUSE TestPostAdmins
=== RUN   TestDeleteAdmin
=== PAUSE TestDeleteAdmin
=== RUN   TestTrapMemberAuthMiddleware
=== PAUSE TestTrapMemberAuthMiddleware
=== RUN   TestCheckTrapMemberAuth
=== PAUSE TestCheckTrapMemberAuth
=== RUN   TestGameInfoVisibilityChecker
=== PAUSE TestGameInfoVisibilityChecker
=== RUN   TestGameFileVisibilityChecker
=== PAUSE TestGameFileVisibilityChecker
=== RUN   TestGetProductKeys
=== PAUSE TestGetProductKeys
=== RUN   TestPostProductKey
=== PAUSE TestPostProductKey
=== RUN   TestPostActivateProductKey
=== PAUSE TestPostActivateProductKey
=== RUN   TestPostRevokeProductKey
=== PAUSE TestPostRevokeProductKey
=== RUN   TestPostEditionAuthorize
=== PAUSE TestPostEditionAuthorize
=== RUN   TestGetEditionInfo
=== PAUSE TestGetEditionInfo
=== RUN   TestGetEditions
=== PAUSE TestGetEditions
=== RUN   TestPostEdition
=== PAUSE TestPostEdition
=== RUN   TestDeleteEdition
=== PAUSE TestDeleteEdition
=== RUN   TestGetEdition
=== PAUSE TestGetEdition
=== RUN   TestPatchEdition
=== PAUSE TestPatchEdition
=== RUN   TestGetEditionGames
=== PAUSE TestGetEditionGames
=== RUN   TestPatchEditionGame
=== PAUSE TestPatchEditionGame
=== RUN   Test_isFileUploadRequest
=== PAUSE Test_isFileUploadRequest
=== RUN   TestGetGameFiles
=== PAUSE TestGetGameFiles
=== RUN   TestPostGameFile
=== PAUSE TestPostGameFile
=== RUN   TestGetGameFile
=== PAUSE TestGetGameFile
=== RUN   TestGetGameFileMeta
=== PAUSE TestGetGameFileMeta
=== RUN   TestDeleteGameGenre
=== PAUSE TestDeleteGameGenre
=== RUN   TestGetGameGenres
=== PAUSE TestGetGameGenres
=== RUN   TestPutGameGenres
=== PAUSE TestPutGameGenres
=== RUN   TestPatchGameGenre
=== PAUSE TestPatchGameGenre
=== RUN   TestGetGameImages
=== PAUSE TestGetGameImages
=== RUN   TestPostGameImage
=== PAUSE TestPostGameImage
=== RUN   TestGetGameImage
=== PAUSE TestGetGameImage
=== RUN   TestGetGameImageMeta
=== PAUSE TestGetGameImageMeta
=== RUN   TestPostGamePlayLogStart
=== PAUSE TestPostGamePlayLogStart
=== RUN   TestPatchGamePlayLogEnd
=== PAUSE TestPatchGamePlayLogEnd
=== RUN   TestGetEditionPlayStats
=== PAUSE TestGetEditionPlayStats
=== RUN   TestGetGamePlayStats
=== PAUSE TestGetGamePlayStats
=== RUN   TestPatchGameRole
=== PAUSE TestPatchGameRole
=== RUN   TestDeleteGameRole
=== PAUSE TestDeleteGameRole
=== RUN   TestGetGames
=== PAUSE TestGetGames
=== RUN   TestPostGame
=== PAUSE TestPostGame
=== RUN   TestDeleteGame
=== PAUSE TestDeleteGame
=== RUN   TestGetGame
=== PAUSE TestGetGame
=== RUN   TestPatchGame
=== PAUSE TestPatchGame
=== RUN   TestGetGameVersion
=== PAUSE TestGetGameVersion
=== RUN   TestPostGameVersion
=== PAUSE TestPostGameVersion
=== RUN   TestGetLatestGameVersion
=== PAUSE TestGetLatestGameVersion
=== RUN   TestGetGameVideos
=== PAUSE TestGetGameVideos
=== RUN   TestPostGameVideo
=== PAUSE TestPostGameVideo
=== RUN   TestGetGameVideo
=== PAUSE TestGetGameVideo
=== RUN   TestGetGameVideoMeta
=== PAUSE TestGetGameVideoMeta
=== RUN   TestGetCallback
=== PAUSE TestGetCallback
=== RUN   TestGetCode
=== PAUSE TestGetCode
=== RUN   TestPostLogout
=== PAUSE TestPostLogout
=== RUN   TestGetSeats
=== PAUSE TestGetSeats
=== RUN   TestPostSeat
=== PAUSE TestPostSeat
=== RUN   TestPatchSeatStatus
=== PAUSE TestPatchSeatStatus
=== RUN   TestGetSession
=== PAUSE TestGetSession
=== RUN   TestGetMe
=== PAUSE TestGetMe
=== RUN   TestGetUsers
=== PAUSE TestGetUsers
=== CONT  TestDeleteAdmin
=== CONT  TestPatchGamePlayLogEnd
=== RUN   TestPatchGamePlayLogEnd/request_bodyが不正なのでエラー
=== CONT  TestGetUsers
=== CONT  TestGetEditionGames
=== PAUSE TestPatchGamePlayLogEnd/request_bodyが不正なのでエラー
=== CONT  TestDeleteGameGenre
=== CONT  TestPostGameVideo
=== RUN   TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeがErrInvalidPlayLogIDなので404
=== CONT  TestPutGameGenres
=== CONT  TestGetGameVideos
=== RUN   TestDeleteGameGenre/特に問題ないのでエラー無し
=== RUN   TestGetGameVideos/特に問題ないのでエラーなし
=== RUN   TestDeleteAdmin/特に問題ないのでエラー無し
=== RUN   TestGetUsers/特に問題ないのでエラーなし
=== RUN   TestPutGameGenres/sessionが取得できないのでエラー
=== RUN   TestGetEditionGames/特に問題ないのでエラーなし
=== PAUSE TestGetEditionGames/特に問題ないのでエラーなし
=== RUN   TestPostGameVideo/特に問題ないのでエラーなし
=== RUN   TestGetEditionGames/ゲームURLとゲームファイルがnullでもエラーなし
=== PAUSE TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeがErrInvalidPlayLogIDなので404
=== RUN   TestGetGameVideos/動画タイプがmp4,mkv,m4vでないので500
=== PAUSE TestGetEditionGames/ゲームURLとゲームファイルがnullでもエラーなし
2025/10/31 21:55:43 error: failed to convert video type: invalid video type: 100
=== RUN   TestPutGameGenres/UpdateGameGenresがErrNoGameなので404
=== RUN   TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeがErrInvalidEndTimeなので400
=== RUN   TestGetGameVideos/GetGameVideosがErrInvalidGameIDなので404
=== RUN   TestGetUsers/userが複数でもエラーなし
=== RUN   TestGetEditionGames/windowsでもエラーなし
=== PAUSE TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeがErrInvalidEndTimeなので400
=== RUN   TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeがその他のエラーなので500
=== PAUSE TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeがその他のエラーなので500
=== RUN   TestGetGameVideos/GetGameVideosがエラーなので500
=== RUN   TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeがErrInvalidPlayLogEditionGamePairなので400
=== PAUSE TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeがErrInvalidPlayLogEditionGamePairなので400
=== RUN   TestPostGameVideo/m4vでもエラーなし
2025/10/31 21:55:43 error: failed to get game videos: error
=== RUN   TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeが成功するので200
=== PAUSE TestGetEditionGames/windowsでもエラーなし
=== PAUSE TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeが成功するので200
=== RUN   TestPutGameGenres/UpdateGameGenresがErrDuplicateGameGenreなので400
=== RUN   TestGetEditionGames/macでもエラーなし
=== RUN   TestDeleteGameGenre/存在しないジャンルIDなので404
=== CONT  TestGetLatestGameVersion
=== RUN   TestGetGameVideos/動画がなくても問題なし
=== PAUSE TestGetEditionGames/macでもエラーなし
=== RUN   TestGetLatestGameVersion/特に問題ないのでエラーなし
=== RUN   TestGetEditionGames/jarでもエラーなし
=== RUN   TestDeleteAdmin/sessionが無いので401
=== RUN   TestPostGameVideo/mkvでもエラーなし
=== RUN   TestDeleteAdmin/auth_sessionが無いのでエラー
=== PAUSE TestGetEditionGames/jarでもエラーなし
=== RUN   TestDeleteGameGenre/DeleteGameGenreがエラーなのでエラー
=== RUN   TestGetEditionGames/ファイルが複数あってももエラーなし
=== RUN   TestGetGameVideos/動画が複数あっても問題なし
=== PAUSE TestGetEditionGames/ファイルが複数あってももエラーなし
=== RUN   TestGetEditionGames/ファイルとurlが両方あってもエラーなし
=== PAUSE TestGetEditionGames/ファイルとurlが両方あってもエラーなし
=== RUN   TestGetEditionGames/2つ以上のゲームがリストに含まれていてもエラーなし
=== PAUSE TestGetEditionGames/2つ以上のゲームがリストに含まれていてもエラーなし
=== RUN   TestGetEditionGames/不正なeditionIDなので400
=== PAUSE TestGetEditionGames/不正なeditionIDなので400
=== RUN   TestGetEditionGames/サービス層でエラーが発生したので500
=== PAUSE TestGetEditionGames/サービス層でエラーが発生したので500
=== CONT  TestPostGameVersion
=== RUN   TestPostGameVersion/特に問題ないのでエラーなし
=== RUN   TestDeleteAdmin/存在しないユーザーなので400
2025/10/31 21:55:43 error: failed to delete game genre: error
=== RUN   TestPostGameVideo/mp4,m4v,mkvでないので500
=== RUN   TestPostGameVersion/requestがjsonでないので400
=== RUN   TestGetLatestGameVersion/GetLatestGameVersionがErrInvalidGameIDなので404
2025/10/31 21:55:43 error: failed to convert video type: invalid video type: 100
=== RUN   TestPostGameVersion/バージョン名が不適切なので400
=== RUN   TestDeleteAdmin/ユーザーが管理者ではないので400
--- PASS: TestDeleteGameGenre (0.01s)
    --- PASS: TestDeleteGameGenre/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestDeleteGameGenre/存在しないジャンルIDなので404 (0.00s)
    --- PASS: TestDeleteGameGenre/DeleteGameGenreがエラーなのでエラー (0.00s)
=== CONT  TestGetGameVersion
=== RUN   TestGetGameVersion/特に問題ないのでエラーなし
=== RUN   TestGetLatestGameVersion/GetLatestGameVersionがErrNoGameVersionなので404
=== RUN   TestPostGameVideo/SaveGameVideoがErrInvalidGameIDなので404
=== RUN   TestGetGameVideos/動画のタイプが複数あっても問題なし
=== RUN   TestGetLatestGameVersion/CreateGameVersionがエラーなので500
=== RUN   TestPostGameVideo/SaveGameVideoがErrInvalidFormatなので400
=== RUN   TestDeleteAdmin/自分を削除しようとしているので400
=== RUN   TestGetGameVersion/GetGameVersionsがErrInvalidGameIDなので404
=== RUN   TestPutGameGenres/UpdateGameGenresがエラーなので500
=== RUN   TestPostGameVideo/SaveGameVideoがエラーなので500
--- PASS: TestGetGameVideos (0.01s)
    --- PASS: TestGetGameVideos/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameVideos/動画タイプがmp4,mkv,m4vでないので500 (0.00s)
    --- PASS: TestGetGameVideos/GetGameVideosがErrInvalidGameIDなので404 (0.00s)
    --- PASS: TestGetGameVideos/GetGameVideosがエラーなので500 (0.00s)
    --- PASS: TestGetGameVideos/動画がなくても問題なし (0.00s)
    --- PASS: TestGetGameVideos/動画が複数あっても問題なし (0.00s)
    --- PASS: TestGetGameVideos/動画のタイプが複数あっても問題なし (0.00s)
=== CONT  TestGetGame
2025/10/31 21:55:43 failed to get latest game version: error
=== RUN   TestGetLatestGameVersion/windowsでもエラーなし
2025/10/31 21:55:43 error: failed to save game video: error
=== RUN   TestPostGameVideo/contentがrequest_bodyにないので400
=== RUN   TestGetLatestGameVersion/macでもエラーなし
--- PASS: TestPostGameVideo (0.01s)
    --- PASS: TestPostGameVideo/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestPostGameVideo/m4vでもエラーなし (0.00s)
    --- PASS: TestPostGameVideo/mkvでもエラーなし (0.00s)
    --- PASS: TestPostGameVideo/mp4,m4v,mkvでないので500 (0.00s)
    --- PASS: TestPostGameVideo/SaveGameVideoがErrInvalidGameIDなので404 (0.00s)
    --- PASS: TestPostGameVideo/SaveGameVideoがErrInvalidFormatなので400 (0.00s)
    --- PASS: TestPostGameVideo/SaveGameVideoがエラーなので500 (0.00s)
    --- PASS: TestPostGameVideo/contentがrequest_bodyにないので400 (0.00s)
=== CONT  TestPatchGame
=== RUN   TestPatchGame/特に問題ないのでエラーなし
=== RUN   TestGetGameVersion/GetGameVersionsがErrInvalidLimitなので400
=== RUN   TestGetLatestGameVersion/jarでもエラーなし
=== RUN   TestGetGame/特に問題ないのでエラーなし
=== RUN   TestPatchGame/visibilityがnilでもエラーなし
=== RUN   TestGetUsers/botがtrueでも正しく動く
2025/10/31 21:55:43 error: failed to update game genres: test error
=== RUN   TestGetLatestGameVersion/ファイルが複数あってもエラーなし
=== RUN   TestPatchGame/リクエストボディが正しくないので400
=== RUN   TestPostGameVersion/バージョン名が空文字なので400
=== RUN   TestGetGameVersion/GetGameVersionsがエラーなので500
2025/10/31 21:55:43 error: failed to get game versions: error
=== RUN   TestPatchGame/名前が空なので400
=== RUN   TestGetGameVersion/gameVersionが存在しなくてもエラーなし
=== RUN   TestGetGame/Maintainersが空でもエラーなし
=== RUN   TestGetUsers/botがfalseでも正しく動く
=== RUN   TestGetGameVersion/gameVersionが複数でもエラーなし
=== RUN   TestGetUsers/sessionが存在しないのでauthSessionも存在せず500
=== RUN   TestGetGame/Genresが空でもエラーなし
=== RUN   TestPatchGame/名前が長すぎるので400
2025/10/31 21:55:43 error: failed to get auth session: no value
=== RUN   TestGetGameVersion/windowsのファイルが存在しても問題なし
=== RUN   TestGetUsers/authSessionが存在しないので500
2025/10/31 21:55:43 error: failed to get auth session: no value
=== RUN   TestGetGameVersion/macのファイルが存在しても問題なし
=== RUN   TestGetUsers/GetAllActiveUserがエラーなので500
=== RUN   TestGetLatestGameVersion/ファイルとurlが両方あってもエラーなし
=== RUN   TestGetGame/visibilityがprivateでも問題なし
=== RUN   TestGetGameVersion/jarのファイルが存在しても問題なし
2025/10/31 21:55:43 error: failed to get user info: error
--- PASS: TestGetUsers (0.01s)
    --- PASS: TestGetUsers/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetUsers/userが複数でもエラーなし (0.01s)
    --- PASS: TestGetUsers/botがtrueでも正しく動く (0.00s)
    --- PASS: TestGetUsers/botがfalseでも正しく動く (0.00s)
    --- PASS: TestGetUsers/sessionが存在しないのでauthSessionも存在せず500 (0.00s)
    --- PASS: TestGetUsers/authSessionが存在しないので500 (0.00s)
    --- PASS: TestGetUsers/GetAllActiveUserがエラーなので500 (0.00s)
=== CONT  TestPostGame
--- PASS: TestGetLatestGameVersion (0.01s)
    --- PASS: TestGetLatestGameVersion/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetLatestGameVersion/GetLatestGameVersionがErrInvalidGameIDなので404 (0.00s)
    --- PASS: TestGetLatestGameVersion/GetLatestGameVersionがErrNoGameVersionなので404 (0.00s)
    --- PASS: TestGetLatestGameVersion/CreateGameVersionがエラーなので500 (0.00s)
    --- PASS: TestGetLatestGameVersion/windowsでもエラーなし (0.00s)
    --- PASS: TestGetLatestGameVersion/macでもエラーなし (0.00s)
    --- PASS: TestGetLatestGameVersion/jarでもエラーなし (0.00s)
    --- PASS: TestGetLatestGameVersion/ファイルが複数あってもエラーなし (0.00s)
    --- PASS: TestGetLatestGameVersion/ファイルとurlが両方あってもエラーなし (0.00s)
=== RUN   TestPatchGame/説明が空文字でもエラーなし
=== CONT  TestGetGames
=== RUN   TestGetGameVersion/ファイルが複数存在しても問題なし
=== RUN   TestGetGames/sortが変な値なので400
=== RUN   TestPostGame/特に問題ないのでエラーなし
=== RUN   TestGetGameVersion/ファイルとurlが両方存在しても問題なし
=== RUN   TestPatchGame/ゲームが存在しないので404
=== RUN   TestGetGame/visibilityがpublicでもエラーなし
=== RUN   TestGetGames/ジャンルの指定があってもエラー無し
=== RUN   TestPostGame/セッションがないので401
=== RUN   TestPostGame/authSessionがないので401
=== RUN   TestPatchGame/UpdateGameがエラーなので500
=== RUN   TestPutGameGenres/特に問題ないのでエラー無し
2025/10/31 21:55:43 error: failed to update game: test
=== RUN   TestGetGame/visibilityが不正なので500
--- PASS: TestPatchGame (0.01s)
    --- PASS: TestPatchGame/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestPatchGame/visibilityがnilでもエラーなし (0.00s)
    --- PASS: TestPatchGame/リクエストボディが正しくないので400 (0.00s)
    --- PASS: TestPatchGame/名前が空なので400 (0.00s)
    --- PASS: TestPatchGame/名前が長すぎるので400 (0.00s)
    --- PASS: TestPatchGame/説明が空文字でもエラーなし (0.00s)
    --- PASS: TestPatchGame/ゲームが存在しないので404 (0.00s)
    --- PASS: TestPatchGame/UpdateGameがエラーなので500 (0.00s)
2025/10/31 21:55:43 error: failed to get game visibility: 100
=== CONT  TestGetGameFile
=== RUN   TestGetGameFile/特に問題ないのでエラーなし
=== RUN   TestGetGame/ゲームが存在しないので404
=== RUN   TestPostGameVersion/descriptionが空文字でもエラーなし
=== RUN   TestGetGame/GetGameがエラーなので500
=== RUN   TestGetGames/allがfalseでもエラー無し
=== RUN   TestGetGameFile/GetGameFileがErrInvalidGameIDなので404
=== RUN   TestPostGameVersion/urlが不適切なので400
2025/10/31 21:55:43 error: failed to get game: error
=== RUN   TestPostGameVersion/CreateGameVersionがErrInvalidGameIDなので404
=== RUN   TestGetGame/authSessionが存在しないので管理者は空配列
=== RUN   TestPostGame/リクエストボディが正しくないので400
=== RUN   TestPostGameVersion/CreateGameVersionがErrInvalidGameImageIDなので400
=== RUN   TestPutGameGenres/リクエストボディがおかしいので400
=== RUN   TestPostGameVersion/CreateGameVersionがErrInvalidGameVideoIDなので400
=== RUN   TestDeleteAdmin/DeleteAdminがエラーなのでエラー
=== RUN   TestPostGameVersion/CreateGameVersionがErrNoAssetなので400
=== RUN   TestGetGameVersion/limitが存在しても問題なし
=== RUN   TestPostGame/名前が空なので400
=== RUN   TestPostGameVersion/CreateGameVersionがエラーなので500
=== RUN   TestGetGameFile/GetGameFileがErrInvalidGameFileIDなので404
2025/10/31 21:55:43 failed to create game version: error
=== RUN   TestGetGameFile/GetGameFileがエラーなので500
=== RUN   TestPostGameVersion/windowsでもエラーなし
=== RUN   TestGetGames/sortがCreatedAtでもエラー無し
2025/10/31 21:55:43 error: failed to get game file: error
=== RUN   TestPostGame/名前が長すぎるので400
--- PASS: TestGetGameFile (0.00s)
    --- PASS: TestGetGameFile/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameFile/GetGameFileがErrInvalidGameIDなので404 (0.00s)
    --- PASS: TestGetGameFile/GetGameFileがErrInvalidGameFileIDなので404 (0.00s)
    --- PASS: TestGetGameFile/GetGameFileがエラーなので500 (0.00s)
=== CONT  TestDeleteGameRole
=== RUN   TestDeleteGameRole/sessionがないので401
=== PAUSE TestDeleteGameRole/sessionがないので401
=== RUN   TestDeleteGameRole/authSessionが無効なので401
=== RUN   TestPostGameVersion/macでもエラーなし
=== PAUSE TestDeleteGameRole/authSessionが無効なので401
=== RUN   TestDeleteGameRole/GetGameがエラーなので500
=== RUN   TestGetGameVersion/offsetが存在しても問題なし
--- PASS: TestGetGame (0.01s)
    --- PASS: TestGetGame/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGame/Maintainersが空でもエラーなし (0.00s)
    --- PASS: TestGetGame/Genresが空でもエラーなし (0.00s)
    --- PASS: TestGetGame/visibilityがprivateでも問題なし (0.00s)
    --- PASS: TestGetGame/visibilityがpublicでもエラーなし (0.00s)
    --- PASS: TestGetGame/visibilityが不正なので500 (0.00s)
    --- PASS: TestGetGame/ゲームが存在しないので404 (0.00s)
    --- PASS: TestGetGame/GetGameがエラーなので500 (0.00s)
    --- PASS: TestGetGame/authSessionが存在しないので管理者は空配列 (0.00s)
=== RUN   TestPostGame/説明が空文字でもエラーなし
=== CONT  TestPatchGameRole
=== PAUSE TestDeleteGameRole/GetGameがエラーなので500
=== RUN   TestPostGameVersion/jarでもエラーなし
=== RUN   TestPatchGameRole/roleTypeがnilでも問題なし
=== PAUSE TestPatchGameRole/roleTypeがnilでも問題なし
=== RUN   TestDeleteGameRole/GetGameのvisibilityが無効なので500
=== PAUSE TestDeleteGameRole/GetGameのvisibilityが無効なので500
=== RUN   TestPatchGameRole/GetGameのvisibilityが無効なので500
=== RUN   TestDeleteGameRole/特に問題なく削除できる
=== PAUSE TestPatchGameRole/GetGameのvisibilityが無効なので500
=== RUN   TestPatchGameRole/ownerでも問題なし
=== PAUSE TestDeleteGameRole/特に問題なく削除できる
=== CONT  TestPostGameFile
=== RUN   TestDeleteGameRole/RemoveGameManagementRoleがErrInvalidRoleなので404
=== PAUSE TestPatchGameRole/ownerでも問題なし
--- PASS: TestGetGameVersion (0.01s)
    --- PASS: TestGetGameVersion/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameVersion/GetGameVersionsがErrInvalidGameIDなので404 (0.00s)
    --- PASS: TestGetGameVersion/GetGameVersionsがErrInvalidLimitなので400 (0.00s)
    --- PASS: TestGetGameVersion/GetGameVersionsがエラーなので500 (0.00s)
    --- PASS: TestGetGameVersion/gameVersionが存在しなくてもエラーなし (0.00s)
    --- PASS: TestGetGameVersion/gameVersionが複数でもエラーなし (0.00s)
    --- PASS: TestGetGameVersion/windowsのファイルが存在しても問題なし (0.00s)
    --- PASS: TestGetGameVersion/macのファイルが存在しても問題なし (0.00s)
    --- PASS: TestGetGameVersion/jarのファイルが存在しても問題なし (0.00s)
    --- PASS: TestGetGameVersion/ファイルが複数存在しても問題なし (0.00s)
    --- PASS: TestGetGameVersion/ファイルとurlが両方存在しても問題なし (0.01s)
    --- PASS: TestGetGameVersion/limitが存在しても問題なし (0.00s)
    --- PASS: TestGetGameVersion/offsetが存在しても問題なし (0.00s)
=== PAUSE TestDeleteGameRole/RemoveGameManagementRoleがErrInvalidRoleなので404
=== RUN   TestPatchGameRole/sessionがないので401
=== PAUSE TestPatchGameRole/sessionがないので401
=== RUN   TestPostGameFile/特に問題ないのでエラーなし
=== RUN   TestPostGameVersion/ファイルが複数あってもエラーなし
=== RUN   TestPatchGameRole/EditGameManagementRoleがErrNoGameManagementRoleUpdatedなので400
=== RUN   TestDeleteGameRole/RemoveGameManagementRoleがErrCannotDeleteOwnerなので400
=== PAUSE TestDeleteGameRole/RemoveGameManagementRoleがErrCannotDeleteOwnerなので400
2025/10/31 21:55:43 error: failed to delete admin: test
=== RUN   TestPutGameGenres/ジャンルが空でもエラー無し
=== RUN   TestGetGames/sortがLatestVersionでもエラー無し
=== RUN   TestDeleteGameRole/RemoveGameManagementRoleがErrNoGameなので400
=== PAUSE TestDeleteGameRole/RemoveGameManagementRoleがErrNoGameなので400
=== RUN   TestDeleteGameRole/RemoveGameManagementRoleがエラーなので500
=== PAUSE TestDeleteGameRole/RemoveGameManagementRoleがエラーなので500
=== RUN   TestDeleteGameRole/GetGameがErrNoGameなので404
=== PAUSE TestDeleteGameRole/GetGameがErrNoGameなので404
=== CONT  TestGetGamePlayStats
=== PAUSE TestPatchGameRole/EditGameManagementRoleがErrNoGameManagementRoleUpdatedなので400
=== RUN   TestGetGamePlayStats/異常系:_400_serviceでErrInvalidTimeRange
=== RUN   TestDeleteAdmin/残りの管理者が複数でもエラー無し
=== RUN   TestPatchGameRole/EditGameManagementRoleがErrNoGameなので404
=== PAUSE TestPatchGameRole/EditGameManagementRoleがErrNoGameなので404
=== RUN   TestPatchGameRole/EditGameManagementRoleがErrInvalidUserIDなので400
=== PAUSE TestPatchGameRole/EditGameManagementRoleがErrInvalidUserIDなので400
=== RUN   TestPostGameFile/win32でもエラーなし
=== RUN   TestPostGameVersion/ファイルとurlが両方あってもエラーなし
=== RUN   TestGetGames/ゲーム名の指定があってもエラー無し
=== PAUSE TestGetGamePlayStats/異常系:_400_serviceでErrInvalidTimeRange
=== RUN   TestGetGamePlayStats/異常系:400_serviceでErrTimePeriodTooLong
=== RUN   TestPostGameFile/macでもエラーなし
=== PAUSE TestGetGamePlayStats/異常系:400_serviceでErrTimePeriodTooLong
--- PASS: TestDeleteAdmin (0.02s)
    --- PASS: TestDeleteAdmin/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestDeleteAdmin/sessionが無いので401 (0.00s)
    --- PASS: TestDeleteAdmin/auth_sessionが無いのでエラー (0.00s)
    --- PASS: TestDeleteAdmin/存在しないユーザーなので400 (0.00s)
    --- PASS: TestDeleteAdmin/ユーザーが管理者ではないので400 (0.00s)
    --- PASS: TestDeleteAdmin/自分を削除しようとしているので400 (0.01s)
    --- PASS: TestDeleteAdmin/DeleteAdminがエラーなのでエラー (0.00s)
    --- PASS: TestDeleteAdmin/残りの管理者が複数でもエラー無し (0.00s)
=== CONT  TestGetGameFileMeta
=== RUN   TestPutGameGenres/ジャンルが長すぎるので400
=== RUN   TestGetGameFileMeta/特に問題ないのでエラーなし
=== RUN   TestGetGames/GetGamesがエラーなのでエラー
=== RUN   TestGetGameFileMeta/win32でもエラーなし
=== RUN   TestGetGamePlayStats/異常系:500_serviceでその他のエラー
=== PAUSE TestGetGamePlayStats/異常系:500_serviceでその他のエラー
=== RUN   TestPostGameVersion/CreateGameVersionがErrInvalidGameFileIDなので400
=== RUN   TestPostGameFile/win32,darwin,jarのいずれでもないので400
=== RUN   TestGetGamePlayStats/クエリパラメータなし
=== PAUSE TestGetGamePlayStats/クエリパラメータなし
=== RUN   TestGetGamePlayStats/正常系:_game_version_idあり
=== PAUSE TestGetGamePlayStats/正常系:_game_version_idあり
=== RUN   TestGetGamePlayStats/正常系:_start,_end指定
=== PAUSE TestGetGamePlayStats/正常系:_start,_end指定
=== RUN   TestPostGameFile/SaveGameFileがErrInvalidGameIDなので404
2025/10/31 21:55:43 error: failed to get games: GetGames error
=== RUN   TestGetGames/GetMyGamesがエラーなのでエラー
=== RUN   TestGetGameFileMeta/gifでもエラーなし
=== RUN   TestPostGameFile/SaveGameFileがErrNotZipFileなので400
=== RUN   TestGetGamePlayStats/異常系:404_serviceでErrInvalidGame
=== RUN   TestPutGameGenres/GetGameがエラーなので500
=== RUN   TestGetGameFileMeta/jpeg,png,gifのいずれでもないので500
=== RUN   TestPostGameFile/SaveGameFileがErrInvalidEntryPointなので400
2025/10/31 21:55:43 error: unknown game file type: 100
=== RUN   TestGetGameFileMeta/GetGameFileMetaがErrInvalidGameIDなので404
2025/10/31 21:55:43 error: failed to get game: test error
=== RUN   TestGetGameFileMeta/GetGameFileMetaがErrInvalidGameFileIDなので404
--- PASS: TestPutGameGenres (0.02s)
    --- PASS: TestPutGameGenres/sessionが取得できないのでエラー (0.00s)
    --- PASS: TestPutGameGenres/UpdateGameGenresがErrNoGameなので404 (0.00s)
    --- PASS: TestPutGameGenres/UpdateGameGenresがErrDuplicateGameGenreなので400 (0.00s)
    --- PASS: TestPutGameGenres/UpdateGameGenresがエラーなので500 (0.01s)
    --- PASS: TestPutGameGenres/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestPutGameGenres/リクエストボディがおかしいので400 (0.00s)
    --- PASS: TestPutGameGenres/ジャンルが空でもエラー無し (0.00s)
    --- PASS: TestPutGameGenres/ジャンルが長すぎるので400 (0.00s)
    --- PASS: TestPutGameGenres/GetGameがエラーなので500 (0.00s)
=== CONT  TestPatchEditionGame
=== RUN   TestPostGameFile/SaveGameFileがエラーなので500
=== RUN   TestPatchEditionGame/特に問題ないのでエラーなし
=== PAUSE TestPatchEditionGame/特に問題ないのでエラーなし
=== RUN   TestPatchEditionGame/空のゲームバージョン一覧でもエラーなし
=== PAUSE TestPatchEditionGame/空のゲームバージョン一覧でもエラーなし
=== RUN   TestPostGame/Genresが空でもエラー無し
=== RUN   TestPatchEditionGame/不正なリクエストボディなので400
=== RUN   TestGetGameFileMeta/GetGameFilesがエラーなので500
=== PAUSE TestPatchEditionGame/不正なリクエストボディなので400
=== RUN   TestPatchGameRole/EditGameManagementRoleがErrCannotEditOwnersなので400
=== RUN   TestPatchEditionGame/不正なゲームバージョンIDなので400
=== PAUSE TestPatchGameRole/EditGameManagementRoleがErrCannotEditOwnersなので400
=== RUN   TestPatchGameRole/maintainerでも問題なし
=== PAUSE TestPatchEditionGame/不正なゲームバージョンIDなので400
=== PAUSE TestPatchGameRole/maintainerでも問題なし
2025/10/31 21:55:43 error: failed to get game file meta: error
--- PASS: TestGetGameFileMeta (0.00s)
    --- PASS: TestGetGameFileMeta/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameFileMeta/win32でもエラーなし (0.00s)
    --- PASS: TestGetGameFileMeta/gifでもエラーなし (0.00s)
    --- PASS: TestGetGameFileMeta/jpeg,png,gifのいずれでもないので500 (0.00s)
    --- PASS: TestGetGameFileMeta/GetGameFileMetaがErrInvalidGameIDなので404 (0.00s)
    --- PASS: TestGetGameFileMeta/GetGameFileMetaがErrInvalidGameFileIDなので404 (0.00s)
    --- PASS: TestGetGameFileMeta/GetGameFilesがエラーなので500 (0.00s)
=== CONT  TestGetGameFiles
=== RUN   TestPatchEditionGame/ErrDuplicateGameVersionなので400
=== RUN   TestGetGameFiles/特に問題ないのでエラーなし
=== RUN   TestPatchGameRole/複数人いても問題なし
=== PAUSE TestPatchGameRole/複数人いても問題なし
=== PAUSE TestPatchEditionGame/ErrDuplicateGameVersionなので400
=== RUN   TestPatchGameRole/authSessionが無効なので401
=== RUN   TestPatchEditionGame/ErrDuplicateGameなので400
=== PAUSE TestPatchEditionGame/ErrDuplicateGameなので400
=== PAUSE TestPatchGameRole/authSessionが無効なので401
=== RUN   TestPatchGameRole/EditGameManagementRoleがエラーなので500
=== PAUSE TestPatchGameRole/EditGameManagementRoleがエラーなので500
=== RUN   TestPatchGameRole/GetGameがエラーなので500
=== RUN   TestGetGameFiles/win32でもエラーなし
=== RUN   TestPatchEditionGame/サービス層でエラーが発生したので500
=== PAUSE TestPatchEditionGame/サービス層でエラーが発生したので500
=== RUN   TestPatchEditionGame/windowsでもエラーなし
=== PAUSE TestPatchGameRole/GetGameがエラーなので500
=== RUN   TestPatchGameRole/複数ジャンルでも問題なし
=== RUN   TestPostGame/ジャンル名が長すぎるので400
=== PAUSE TestPatchEditionGame/windowsでもエラーなし
2025/10/31 21:55:43 error: failed to get games: GetGames error
=== PAUSE TestPatchGameRole/複数ジャンルでも問題なし
=== RUN   TestPatchGameRole/無効なroleTypeなので400
=== PAUSE TestPatchGameRole/無効なroleTypeなので400
=== RUN   TestGetGames/特に問題ないのでエラー無し
=== RUN   TestPatchGameRole/GetGameがErrNoGameなので404
=== RUN   TestGetGameFiles/darwinでもエラーなし
=== PAUSE TestPatchGameRole/GetGameがErrNoGameなので404
=== RUN   TestPostGameVersion/CreateGameVersionがErrInvalidFileTypeなので400
=== RUN   TestPatchEditionGame/macファイルでもエラーなし
=== PAUSE TestPatchEditionGame/macファイルでもエラーなし
=== RUN   TestPatchEditionGame/jarファイルでもエラーなし
=== PAUSE TestPatchEditionGame/jarファイルでもエラーなし
=== RUN   TestPatchEditionGame/ファイルが複数でもエラーなし
=== PAUSE TestPatchEditionGame/ファイルが複数でもエラーなし
=== RUN   TestPatchEditionGame/urlとファイルでもエラーなし
=== PAUSE TestPatchEditionGame/urlとファイルでもエラーなし
=== CONT  TestDeleteGame
=== CONT  TestPostGameImage
=== RUN   TestDeleteGame/特に問題ないのでエラーなし
=== RUN   TestPostGameImage/特に問題ないのでエラーなし
=== RUN   TestPostGameVersion/CreateGameVersionがErrDuplicateGameVersionなので400
=== RUN   TestPostGame/ジャンル名が0文字なので400
=== RUN   TestGetGames/ゲームが複数あっても問題なし
=== PAUSE TestGetGamePlayStats/異常系:404_serviceでErrInvalidGame
2025/10/31 21:55:43 error: failed to save game file: error
=== RUN   TestGetGameFiles/jar,win32,darwinのいずれでもないので500
=== CONT  TestGetEditionPlayStats
=== RUN   TestGetEditionPlayStats/GetEditionPlayStatsがErrTimePeriodTooLongなので400
=== RUN   TestPostGameImage/pngでもエラーなし
2025/10/31 21:55:43 error: unknown game file type: 100
=== PAUSE TestGetEditionPlayStats/GetEditionPlayStatsがErrTimePeriodTooLongなので400
--- PASS: TestPostGameVersion (0.02s)
    --- PASS: TestPostGameVersion/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestPostGameVersion/requestがjsonでないので400 (0.00s)
    --- PASS: TestPostGameVersion/バージョン名が不適切なので400 (0.00s)
    --- PASS: TestPostGameVersion/バージョン名が空文字なので400 (0.01s)
    --- PASS: TestPostGameVersion/descriptionが空文字でもエラーなし (0.00s)
    --- PASS: TestPostGameVersion/urlが不適切なので400 (0.00s)
    --- PASS: TestPostGameVersion/CreateGameVersionがErrInvalidGameIDなので404 (0.00s)
    --- PASS: TestPostGameVersion/CreateGameVersionがErrInvalidGameImageIDなので400 (0.00s)
    --- PASS: TestPostGameVersion/CreateGameVersionがErrInvalidGameVideoIDなので400 (0.00s)
    --- PASS: TestPostGameVersion/CreateGameVersionがErrNoAssetなので400 (0.00s)
    --- PASS: TestPostGameVersion/CreateGameVersionがエラーなので500 (0.00s)
    --- PASS: TestPostGameVersion/windowsでもエラーなし (0.00s)
    --- PASS: TestPostGameVersion/macでもエラーなし (0.00s)
    --- PASS: TestPostGameVersion/jarでもエラーなし (0.00s)
    --- PASS: TestPostGameVersion/ファイルが複数あってもエラーなし (0.00s)
    --- PASS: TestPostGameVersion/ファイルとurlが両方あってもエラーなし (0.00s)
    --- PASS: TestPostGameVersion/CreateGameVersionがErrInvalidGameFileIDなので400 (0.00s)
    --- PASS: TestPostGameVersion/CreateGameVersionがErrInvalidFileTypeなので400 (0.00s)
    --- PASS: TestPostGameVersion/CreateGameVersionがErrDuplicateGameVersionなので400 (0.00s)
=== CONT  TestGetGameImageMeta
=== RUN   TestPostGame/ジャンルが複数あっても問題なし
=== RUN   TestGetGameImageMeta/特に問題ないのでエラーなし
=== RUN   TestGetEditionPlayStats/クエリパラメータなしでエラーなし
=== PAUSE TestGetEditionPlayStats/クエリパラメータなしでエラーなし
=== RUN   TestDeleteGame/ゲームが存在しないので404
=== RUN   TestPostGameFile/contentがrequest_bodyにないので400
=== RUN   TestGetGameImageMeta/pngでもエラーなし
=== RUN   TestGetEditionPlayStats/start/endの両方を指定してもエラーなし
=== RUN   TestGetGameFiles/GetGameFilesがErrInvalidGameIDなので404
=== RUN   TestGetGameFiles/GetGameFilesがエラーなので500
=== RUN   TestDeleteGame/DeleteGameがエラーなので500
=== RUN   TestGetGameImageMeta/gifでもエラーなし
2025/10/31 21:55:43 error: failed to delete game: test
2025/10/31 21:55:43 error: failed to get game files: error
=== RUN   TestGetGameFiles/ファイルがなくても問題なし
--- PASS: TestDeleteGame (0.00s)
    --- PASS: TestDeleteGame/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestDeleteGame/ゲームが存在しないので404 (0.00s)
    --- PASS: TestDeleteGame/DeleteGameがエラーなので500 (0.00s)
=== CONT  TestGetGameImage
=== RUN   TestPostGame/CreateGameがエラーなので500
=== RUN   TestGetGameImage/特に問題ないのでエラーなし
=== RUN   TestPostGameFile/entryPointがrequest_bodyにないので400
=== RUN   TestGetGameImageMeta/jpeg,png,gifのいずれでもないので500
=== RUN   TestPostGameImage/gifでもエラーなし
2025/10/31 21:55:43 error: unknown game image type: 100
=== PAUSE TestGetEditionPlayStats/start/endの両方を指定してもエラーなし
=== RUN   TestGetGameImageMeta/GetGameImageMetaがErrInvalidGameIDなので404
=== RUN   TestGetEditionPlayStats/startのみ指定でもエラーなし
=== PAUSE TestGetEditionPlayStats/startのみ指定でもエラーなし
=== RUN   TestGetGames/ジャンルが複数あってもエラー無し
=== RUN   TestPostGameFile/typeがrequest_bodyにないので400
=== RUN   TestGetGameFiles/ファイルが複数あっても問題なし
=== RUN   TestGetGameImage/GetGameImageがErrInvalidGameIDなので404
=== RUN   TestPostGameImage/jpeg,png,gifのいずれでもないので500
--- PASS: TestPostGameFile (0.01s)
    --- PASS: TestPostGameFile/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestPostGameFile/win32でもエラーなし (0.00s)
    --- PASS: TestPostGameFile/macでもエラーなし (0.00s)
    --- PASS: TestPostGameFile/win32,darwin,jarのいずれでもないので400 (0.00s)
    --- PASS: TestPostGameFile/SaveGameFileがErrInvalidGameIDなので404 (0.00s)
    --- PASS: TestPostGameFile/SaveGameFileがErrNotZipFileなので400 (0.00s)
    --- PASS: TestPostGameFile/SaveGameFileがErrInvalidEntryPointなので400 (0.00s)
    --- PASS: TestPostGameFile/SaveGameFileがエラーなので500 (0.00s)
    --- PASS: TestPostGameFile/contentがrequest_bodyにないので400 (0.00s)
    --- PASS: TestPostGameFile/entryPointがrequest_bodyにないので400 (0.00s)
    --- PASS: TestPostGameFile/typeがrequest_bodyにないので400 (0.00s)
=== CONT  TestPostRevokeProductKey
=== RUN   TestPostRevokeProductKey/特に問題なし
=== PAUSE TestPostRevokeProductKey/特に問題なし
=== RUN   TestPostRevokeProductKey/ErrInvalidProductKeyなので400
=== PAUSE TestPostRevokeProductKey/ErrInvalidProductKeyなので400
=== RUN   TestPostRevokeProductKey/ErrKeyAlreadyRevokedなので404
=== PAUSE TestPostRevokeProductKey/ErrKeyAlreadyRevokedなので404
=== RUN   TestPostRevokeProductKey/エラーが発生して500
=== PAUSE TestPostRevokeProductKey/エラーが発生して500
2025/10/31 21:55:43 error: failed to create game: test
=== CONT  TestGetEdition
=== RUN   TestGetEdition/アンケートURLありのエディションが取得できる
=== PAUSE TestGetEdition/アンケートURLありのエディションが取得できる
=== RUN   TestGetEdition/アンケートURLなしのエディションが取得できる
=== RUN   TestPostGame/Ownersに重複があるので400
=== PAUSE TestGetEdition/アンケートURLなしのエディションが取得できる
=== RUN   TestGetGameImageMeta/GetGameImageMetaがErrInvalidGameImageIDなので404
=== RUN   TestGetEditionPlayStats/endのみ指定でもエラーなし
=== RUN   TestGetGames/authSessionが無くてもエラー無し
=== RUN   TestGetEdition/存在しないエディションIDなので400
=== PAUSE TestGetEdition/存在しないエディションIDなので400
=== RUN   TestGetEdition/GetEditionがエラーなので500
=== PAUSE TestGetEdition/GetEditionがエラーなので500
=== RUN   TestGetGameImage/GetGameImageがErrInvalidGameImageIDなので404
=== CONT  TestPostProductKey
2025/10/31 21:55:43 error: unknown game image type: 100
=== RUN   TestPostProductKey/ErrInvalidEditionIDなので400
=== PAUSE TestPostProductKey/ErrInvalidEditionIDなので400
=== RUN   TestPostGameImage/SaveGameImageがErrInvalidGameIDなので404
=== PAUSE TestGetEditionPlayStats/endのみ指定でもエラーなし
=== RUN   TestGetEditionPlayStats/GetEditionPlayStatsがErrInvalidEditionなので404
=== PAUSE TestGetEditionPlayStats/GetEditionPlayStatsがErrInvalidEditionなので404
=== RUN   TestGetGameImage/GetGameImageがエラーなので500
=== RUN   TestPostProductKey/ErrInvalidKeyNumなので400
=== RUN   TestGetEditionPlayStats/GetEditionPlayStatsがその他のエラーなので500
=== RUN   TestGetGames/allがfalseでauthSessionが無くてもエラー無し
=== RUN   TestGetGameImageMeta/GetGameImagesがエラーなので500
=== RUN   TestPostGameImage/SaveGameImageがエラーなので500
=== PAUSE TestPostProductKey/ErrInvalidKeyNumなので400
=== RUN   TestPostProductKey/エラーが発生して500
=== PAUSE TestPostProductKey/エラーが発生して500
=== RUN   TestPostProductKey/Numが負なので400
=== PAUSE TestPostProductKey/Numが負なので400
2025/10/31 21:55:43 error: failed to get game image meta: error
=== RUN   TestPostGame/Maintainersに重複があるので400
=== RUN   TestPostProductKey/特に問題なし
=== PAUSE TestPostProductKey/特に問題なし
=== CONT  TestDeleteEdition
=== RUN   TestDeleteEdition/特に問題ないのでエラー無し
--- PASS: TestGetGameImageMeta (0.01s)
    --- PASS: TestGetGameImageMeta/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameImageMeta/pngでもエラーなし (0.00s)
    --- PASS: TestGetGameImageMeta/gifでもエラーなし (0.00s)
    --- PASS: TestGetGameImageMeta/jpeg,png,gifのいずれでもないので500 (0.00s)
    --- PASS: TestGetGameImageMeta/GetGameImageMetaがErrInvalidGameIDなので404 (0.00s)
    --- PASS: TestGetGameImageMeta/GetGameImageMetaがErrInvalidGameImageIDなので404 (0.00s)
    --- PASS: TestGetGameImageMeta/GetGameImagesがエラーなので500 (0.00s)
=== PAUSE TestDeleteEdition/特に問題ないのでエラー無し
2025/10/31 21:55:43 error: failed to get game image: error
=== CONT  TestPostEdition
=== RUN   TestDeleteEdition/存在しないエディションIDなので400
=== PAUSE TestDeleteEdition/存在しないエディションIDなので400
2025/10/31 21:55:43 error: failed to save game image: error
=== CONT  TestGetEditions
--- PASS: TestGetGameImage (0.01s)
    --- PASS: TestGetGameImage/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameImage/GetGameImageがErrInvalidGameIDなので404 (0.00s)
    --- PASS: TestGetGameImage/GetGameImageがErrInvalidGameImageIDなので404 (0.00s)
    --- PASS: TestGetGameImage/GetGameImageがエラーなので500 (0.00s)
=== RUN   TestGetEditions/特に問題ないのでエラーなし
=== PAUSE TestGetEditions/特に問題ないのでエラーなし
=== RUN   TestPostGameImage/contentがrequest_bodyにないので400
=== RUN   TestDeleteEdition/DeleteEditionがエラーなので500
=== RUN   TestPostEdition/特に問題ないのでエラーなし
=== PAUSE TestPostEdition/特に問題ないのでエラーなし
=== PAUSE TestDeleteEdition/DeleteEditionがエラーなので500
=== PAUSE TestGetEditionPlayStats/GetEditionPlayStatsがその他のエラーなので500
=== RUN   TestPostEdition/アンケートURLがなくてもエラーなし
=== PAUSE TestPostEdition/アンケートURLがなくてもエラーなし
=== RUN   TestPostEdition/Edition名が空文字なので400
=== PAUSE TestPostEdition/Edition名が空文字なので400
=== CONT  TestGameFileVisibilityChecker
--- PASS: TestPostGameImage (0.01s)
    --- PASS: TestPostGameImage/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestPostGameImage/pngでもエラーなし (0.00s)
    --- PASS: TestPostGameImage/gifでもエラーなし (0.00s)
    --- PASS: TestPostGameImage/jpeg,png,gifのいずれでもないので500 (0.00s)
    --- PASS: TestPostGameImage/SaveGameImageがErrInvalidGameIDなので404 (0.00s)
    --- PASS: TestPostGameImage/SaveGameImageがエラーなので500 (0.00s)
    --- PASS: TestPostGameImage/contentがrequest_bodyにないので400 (0.00s)
=== RUN   TestGetEditionPlayStats/GetEditionPlayStatsがErrInvalidTimeRangeなので400
=== RUN   TestPostEdition/Edition名が長すぎるので400
=== RUN   TestGetGames/limitとoffsetとallがnilでもエラー無し
=== PAUSE TestPostEdition/Edition名が長すぎるので400
=== RUN   TestGameFileVisibilityChecker/部員なのでOK
=== PAUSE TestGetEditionPlayStats/GetEditionPlayStatsがErrInvalidTimeRangeなので400
=== RUN   TestPostGame/Ownersに重複があるので400#01
=== CONT  TestPostEditionAuthorize
=== CONT  TestGameInfoVisibilityChecker
=== RUN   TestPostEditionAuthorize/特に問題なし
=== PAUSE TestPostEditionAuthorize/特に問題なし
=== RUN   TestGetEditions/アンケートURLが無くてもエラーなし
=== RUN   TestPostEditionAuthorize/リクエストボディが無効なので400
=== PAUSE TestPostEditionAuthorize/リクエストボディが無効なので400
=== RUN   TestGetGameFiles/ファイルサイズが大きくてもエラーなし
=== PAUSE TestGameFileVisibilityChecker/部員なのでOK
=== RUN   TestPostEdition/URLが正しくないので400
=== PAUSE TestGetEditions/アンケートURLが無くてもエラーなし
=== RUN   TestPostEditionAuthorize/プロダクトキーが無効な形式なので400
=== RUN   TestGameInfoVisibilityChecker/部員なので問題なし
=== PAUSE TestPostEditionAuthorize/プロダクトキーが無効な形式なので400
=== PAUSE TestPostEdition/URLが正しくないので400
=== RUN   TestGameFileVisibilityChecker/トークンが無いが、publicなのでOK
=== RUN   TestPostEditionAuthorize/AuthorizeEditionがErrInvalidProductKeyなので400
=== PAUSE TestGameFileVisibilityChecker/トークンが無いが、publicなのでOK
=== RUN   TestPostEdition/ゲームバージョンが重複しているので400
=== RUN   TestGetEditions/GetEditionsがエラーなので500
--- PASS: TestGetGameFiles (0.01s)
    --- PASS: TestGetGameFiles/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameFiles/win32でもエラーなし (0.00s)
    --- PASS: TestGetGameFiles/darwinでもエラーなし (0.00s)
    --- PASS: TestGetGameFiles/jar,win32,darwinのいずれでもないので500 (0.00s)
    --- PASS: TestGetGameFiles/GetGameFilesがErrInvalidGameIDなので404 (0.00s)
    --- PASS: TestGetGameFiles/GetGameFilesがエラーなので500 (0.00s)
    --- PASS: TestGetGameFiles/ファイルがなくても問題なし (0.00s)
    --- PASS: TestGetGameFiles/ファイルが複数あっても問題なし (0.00s)
    --- PASS: TestGetGameFiles/ファイルサイズが大きくてもエラーなし (0.00s)
--- PASS: TestGetGames (0.03s)
    --- PASS: TestGetGames/sortが変な値なので400 (0.00s)
    --- PASS: TestGetGames/ジャンルの指定があってもエラー無し (0.00s)
    --- PASS: TestGetGames/allがfalseでもエラー無し (0.00s)
    --- PASS: TestGetGames/sortがCreatedAtでもエラー無し (0.00s)
    --- PASS: TestGetGames/sortがLatestVersionでもエラー無し (0.00s)
    --- PASS: TestGetGames/ゲーム名の指定があってもエラー無し (0.00s)
    --- PASS: TestGetGames/GetGamesがエラーなのでエラー (0.00s)
    --- PASS: TestGetGames/GetMyGamesがエラーなのでエラー (0.00s)
    --- PASS: TestGetGames/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestGetGames/ゲームが複数あっても問題なし (0.00s)
    --- PASS: TestGetGames/ジャンルが複数あってもエラー無し (0.00s)
    --- PASS: TestGetGames/authSessionが無くてもエラー無し (0.00s)
    --- PASS: TestGetGames/allがfalseでauthSessionが無くてもエラー無し (0.00s)
    --- PASS: TestGetGames/limitとoffsetとallがnilでもエラー無し (0.00s)
=== CONT  TestGetEditionInfo
=== PAUSE TestPostEditionAuthorize/AuthorizeEditionがErrInvalidProductKeyなので400
=== RUN   TestGameFileVisibilityChecker/部員でなく、limitedなので401
=== RUN   TestGetEditionInfo/アンケートURLがあっても問題なし
=== CONT  TestCheckTrapMemberAuth
=== PAUSE TestGetEditionInfo/アンケートURLがあっても問題なし
=== PAUSE TestPostEdition/ゲームバージョンが重複しているので400
=== PAUSE TestGetEditions/GetEditionsがエラーなので500
=== RUN   TestPostEditionAuthorize/AuthorizeEditionがエラーなので500
=== PAUSE TestPostEditionAuthorize/AuthorizeEditionがエラーなので500
=== RUN   TestGameInfoVisibilityChecker/Authenticateがエラーなのでエラー
=== RUN   TestPostGame/OwnersとMaintainersに重複があるので400
=== RUN   TestGetEditions/複数エディションでもエラーなし
=== CONT  TestPostActivateProductKey
=== PAUSE TestGetEditions/複数エディションでもエラーなし
=== RUN   TestCheckTrapMemberAuth/特に問題ないのでtrue
=== RUN   TestGetEditions/エディションが存在しなくてもでもエラーなし
=== PAUSE TestGetEditions/エディションが存在しなくてもでもエラーなし
=== PAUSE TestGameFileVisibilityChecker/部員でなく、limitedなので401
=== CONT  TestTrapMemberAuthMiddleware
=== RUN   TestGameFileVisibilityChecker/部員でなく、privateなので401
=== PAUSE TestGameFileVisibilityChecker/部員でなく、privateなので401
=== RUN   TestGameFileVisibilityChecker/ゲームが存在しないので404
=== PAUSE TestGameFileVisibilityChecker/ゲームが存在しないので404
=== CONT  TestPostLogout
=== RUN   TestPostLogout/特に問題ないのでエラーなし
=== RUN   TestPostActivateProductKey/特に問題なし
=== PAUSE TestPostActivateProductKey/特に問題なし
=== RUN   TestGetEditionInfo/contextにeditionが入ってないので500
=== RUN   TestPostActivateProductKey/ErrInvalidProductKeyなので400
=== RUN   TestPostEdition/ゲームが重複しているので400
=== PAUSE TestGetEditionInfo/contextにeditionが入ってないので500
=== RUN   TestGetEditionInfo/特に問題なし
=== PAUSE TestPostActivateProductKey/ErrInvalidProductKeyなので400
=== RUN   TestPostActivateProductKey/ErrKeyAlreadyActivatedなので404
=== PAUSE TestPostEdition/ゲームが重複しているので400
=== RUN   TestCheckTrapMemberAuth/セッションがないのでfalse
=== RUN   TestPostEdition/無効なゲームバージョンIDが含まれているので400
=== PAUSE TestGetEditionInfo/特に問題なし
=== PAUSE TestPostActivateProductKey/ErrKeyAlreadyActivatedなので404
2025/10/31 21:55:43 error: failed to check member auth: failed to check traP auth: error
=== CONT  TestPostAdmins
=== RUN   TestTrapMemberAuthMiddleware/okかつエラーなしなので通す
=== RUN   TestPostActivateProductKey/エラーが発生して500
=== RUN   TestGameInfoVisibilityChecker/limitedなのでエラー無し
=== RUN   TestCheckTrapMemberAuth/authSessionがないのでfalse
=== PAUSE TestPostEdition/無効なゲームバージョンIDが含まれているので400
=== RUN   TestPostGame/ジャンルに重複があるので400
=== RUN   TestPostLogout/sessionが存在しないので400
=== RUN   TestPostAdmins/特に問題ないのでエラー無し
=== RUN   TestPostEdition/サービス層でエラーが発生したので500
=== PAUSE TestPostEdition/サービス層でエラーが発生したので500
=== CONT  TestGetSession
=== RUN   TestPostLogout/authSessionが存在しないので400
=== PAUSE TestPostActivateProductKey/エラーが発生して500
=== RUN   TestGetSession/特に問題ないのでエラーなし
=== RUN   TestPostLogout/Logoutがエラーなので500
=== CONT  TestGetAdmins
=== RUN   TestGetAdmins/特に問題ないのでエラー無し
=== RUN   TestPostGame/visibilityがlimitedでも問題なし
=== RUN   TestGameInfoVisibilityChecker/privateなので403
2025/10/31 21:55:43 error: failed to logout: error
=== RUN   TestGetAdmins/sessionが無いので401
=== RUN   TestTrapMemberAuthMiddleware/okでないので401
=== RUN   TestGetAdmins/auth_session_が無いので401
=== RUN   TestGetSession/セッションが存在しなくてもエラーなし
=== RUN   TestCheckTrapMemberAuth/TraPAuthがErrOIDCSessionExpiredなのでfalse
--- PASS: TestGetSession (0.00s)
    --- PASS: TestGetSession/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetSession/セッションが存在しなくてもエラーなし (0.00s)
=== CONT  TestGetMe
=== RUN   TestGetMe/特に問題ないのでエラーなし
--- PASS: TestPostLogout (0.01s)
    --- PASS: TestPostLogout/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestPostLogout/sessionが存在しないので400 (0.00s)
    --- PASS: TestPostLogout/authSessionが存在しないので400 (0.00s)
    --- PASS: TestPostLogout/Logoutがエラーなので500 (0.00s)
=== RUN   TestGetAdmins/GetAdminsがエラーなので500
=== CONT  TestPatchSeatStatus
=== RUN   TestGameInfoVisibilityChecker/トークンが無いがprivateなので403
=== RUN   TestPatchSeatStatus/UpdateSeatStatusで存在しない座席IDが指定されたら404
=== RUN   TestTrapMemberAuthMiddleware/CheckLauncherAuthがエラーなので401
=== RUN   TestCheckTrapMemberAuth/TraPAuthがエラー(ErrOIDCSessionExpired以外)なのでエラー
2025/10/31 21:55:43 error: failed to get admins info: error
=== RUN   TestGetAdmins/adminが複数人いてもエラー無し
=== RUN   TestPostGame/visibilityがprivateでも問題なし
=== PAUSE TestPatchSeatStatus/UpdateSeatStatusで存在しない座席IDが指定されたら404
=== RUN   TestGetMe/sessionが存在しないのでauthSessionも存在せず500
=== RUN   TestPatchSeatStatus/UpdateSeatStatusで無効な座席ステータスが指定されたら404
=== PAUSE TestPatchSeatStatus/UpdateSeatStatusで無効な座席ステータスが指定されたら404
=== RUN   TestPatchSeatStatus/UpdateSeatStatusで座席が空席に変更された場合
2025/10/31 21:55:43 error: failed to check launcher auth: failed to check traP auth: error
=== PAUSE TestPatchSeatStatus/UpdateSeatStatusで座席が空席に変更された場合
=== RUN   TestPatchSeatStatus/UpdateSeatStatusの返り値に無効な座席ステータスが含まれていたら500
=== PAUSE TestPatchSeatStatus/UpdateSeatStatusの返り値に無効な座席ステータスが含まれていたら500
2025/10/31 21:55:43 error: failed to get auth session: no value
=== RUN   TestPatchSeatStatus/無効な座席ステータスが指定されたら400
=== PAUSE TestPatchSeatStatus/無効な座席ステータスが指定されたら400
--- PASS: TestTrapMemberAuthMiddleware (0.01s)
    --- PASS: TestTrapMemberAuthMiddleware/okかつエラーなしなので通す (0.00s)
    --- PASS: TestTrapMemberAuthMiddleware/okでないので401 (0.00s)
    --- PASS: TestTrapMemberAuthMiddleware/CheckLauncherAuthがエラーなので401 (0.00s)
=== RUN   TestPatchSeatStatus/正しく変更できる
--- PASS: TestCheckTrapMemberAuth (0.01s)
    --- PASS: TestCheckTrapMemberAuth/特に問題ないのでtrue (0.00s)
    --- PASS: TestCheckTrapMemberAuth/セッションがないのでfalse (0.00s)
    --- PASS: TestCheckTrapMemberAuth/authSessionがないのでfalse (0.00s)
    --- PASS: TestCheckTrapMemberAuth/TraPAuthがErrOIDCSessionExpiredなのでfalse (0.00s)
    --- PASS: TestCheckTrapMemberAuth/TraPAuthがエラー(ErrOIDCSessionExpired以外)なのでエラー (0.00s)
=== RUN   TestPostAdmins/sessionが無いので401
=== CONT  TestGetProductKeys
=== RUN   TestGameInfoVisibilityChecker/ゲームが存在しないのでエラー
=== RUN   TestGetMe/authSessionが存在しないので500
=== CONT  TestGetGameImages
=== RUN   TestGetGameImages/特に問題ないのでエラーなし
=== RUN   TestPostAdmins/auth_sessionが無いので401
=== PAUSE TestPatchSeatStatus/正しく変更できる
=== RUN   TestGetProductKeys/複数のプロダクトキーでも問題なし
=== RUN   TestPatchSeatStatus/UpdateSeatStatusがエラーなので500
=== PAUSE TestGetProductKeys/複数のプロダクトキーでも問題なし
--- PASS: TestGetAdmins (0.01s)
    --- PASS: TestGetAdmins/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestGetAdmins/sessionが無いので401 (0.00s)
    --- PASS: TestGetAdmins/auth_session_が無いので401 (0.00s)
    --- PASS: TestGetAdmins/GetAdminsがエラーなので500 (0.00s)
    --- PASS: TestGetAdmins/adminが複数人いてもエラー無し (0.00s)
=== CONT  TestPostGamePlayLogStart
=== RUN   TestGetProductKeys/statusがactiveでも問題なし
=== RUN   TestPostGamePlayLogStart/request_bodyが不正なのでエラー
=== PAUSE TestPatchSeatStatus/UpdateSeatStatusがエラーなので500
=== PAUSE TestPostGamePlayLogStart/request_bodyが不正なのでエラー
=== PAUSE TestGetProductKeys/statusがactiveでも問題なし
=== RUN   TestPostGamePlayLogStart/CreatePlayLogがErrInvalidEditionなので404
=== PAUSE TestPostGamePlayLogStart/CreatePlayLogがErrInvalidEditionなので404
=== CONT  TestGetCallback
2025/10/31 21:55:43 error: failed to get auth session: no value
=== RUN   TestGetProductKeys/statusが無効な値なので400
=== PAUSE TestGetProductKeys/statusが無効な値なので400
=== RUN   TestGetGameImages/pngでもエラーなし
=== RUN   TestPostGame/visibilityがnilでもprivateになる
=== RUN   TestGetMe/GetMeがエラーなので500
=== RUN   TestPostGamePlayLogStart/CreatePlayLogがErrInvalidGameなので404
=== RUN   TestGetCallback/特に問題ないのでエラーなし
=== PAUSE TestPostGamePlayLogStart/CreatePlayLogがErrInvalidGameなので404
=== RUN   TestGetProductKeys/GetProductKeysがErrInvalidEditionIDなので400
=== RUN   TestPostGamePlayLogStart/CreatePlayLogがErrInvalidGameVersionなので404
=== PAUSE TestGetProductKeys/GetProductKeysがErrInvalidEditionIDなので400
=== PAUSE TestPostGamePlayLogStart/CreatePlayLogがErrInvalidGameVersionなので404
=== RUN   TestPostAdmins/リクエストが不正なので400
=== RUN   TestPostGamePlayLogStart/CreatePlayLogがその他のエラーなので500
=== RUN   TestGameInfoVisibilityChecker/gameIDがuuidでないのでエラー
=== PAUSE TestPostGamePlayLogStart/CreatePlayLogがその他のエラーなので500
=== RUN   TestPostGamePlayLogStart/CreatePlayLogが成功するので201
=== RUN   TestGetGameImages/gifでもエラーなし
=== PAUSE TestPostGamePlayLogStart/CreatePlayLogが成功するので201
=== CONT  TestPostSeat
=== RUN   TestPostSeat/UpdateSeatNumで1000を超えたとき400
=== PAUSE TestPostSeat/UpdateSeatNumで1000を超えたとき400
=== RUN   TestPostSeat/正しく変更できる
=== RUN   TestGetProductKeys/GetProductKeysがエラーなので500
=== PAUSE TestGetProductKeys/GetProductKeysがエラーなので500
=== RUN   TestGetProductKeys/特に問題なし
=== PAUSE TestPostSeat/正しく変更できる
=== RUN   TestPostSeat/UpdateSeatNumがエラーなので500
=== PAUSE TestPostSeat/UpdateSeatNumがエラーなので500
=== PAUSE TestGetProductKeys/特に問題なし
=== RUN   TestPostSeat/UpdateSeatNumで0を指定した場合
=== RUN   TestGetProductKeys/プロダクトキーが無くても問題なし
=== PAUSE TestPostSeat/UpdateSeatNumで0を指定した場合
=== PAUSE TestGetProductKeys/プロダクトキーが無くても問題なし
=== RUN   TestPostSeat/UpdateSeatNumで1000を指定した場合
=== RUN   TestGetGameImages/jpeg,png,gifのいずれでもないので500
=== PAUSE TestPostSeat/UpdateSeatNumで1000を指定した場合
=== RUN   TestPostSeat/UpdateSeatNumが負のとき400
=== PAUSE TestPostSeat/UpdateSeatNumが負のとき400
=== RUN   TestGetProductKeys/statusがinactiveでも問題なし
=== RUN   TestPostAdmins/存在しないユーザーなので400
2025/10/31 21:55:43 error: failed to get user info: error
2025/10/31 21:55:43 error: unknown game image type: 100
=== PAUSE TestGetProductKeys/statusがinactiveでも問題なし
--- PASS: TestGetMe (0.01s)
    --- PASS: TestGetMe/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetMe/sessionが存在しないのでauthSessionも存在せず500 (0.00s)
    --- PASS: TestGetMe/authSessionが存在しないので500 (0.00s)
    --- PASS: TestGetMe/GetMeがエラーなので500 (0.00s)
=== RUN   TestPostGame/visibilityの値が正しくないので400
=== CONT  TestPatchEdition
=== RUN   TestGetGameImages/GetGameImagesがErrInvalidGameIDなので404
=== RUN   TestGetCallback/セッションがないので400
=== CONT  TestGetSeats
=== RUN   TestGetProductKeys/GetProductKeysに無効なstatusがあったらそれを飛ばす
=== RUN   TestPatchEdition/特に問題ないのでエラーなし
=== RUN   TestGetSeats/無効な座席ステータスが含まれていたらそれを飛ばす
=== PAUSE TestGetSeats/無効な座席ステータスが含まれていたらそれを飛ばす
=== PAUSE TestPatchEdition/特に問題ないのでエラーなし
=== PAUSE TestGetProductKeys/GetProductKeysに無効なstatusがあったらそれを飛ばす
=== RUN   TestGameInfoVisibilityChecker/GetGameがエラーなのでエラー
=== RUN   TestPatchEdition/URLがなくてもエラーなし
=== RUN   TestGetCallback/codeVerifierがないので400
=== PAUSE TestPatchEdition/URLがなくてもエラーなし
=== RUN   TestPatchEdition/リクエストボディが不正なので400
=== PAUSE TestPatchEdition/リクエストボディが不正なので400
=== CONT  TestGetGameVideoMeta
=== RUN   TestGetGameImages/GetGameImagesがエラーなので500
=== RUN   TestGetGameVideoMeta/特に問題ないのでエラーなし
=== RUN   TestPatchEdition/名前が空文字なので400
=== PAUSE TestPatchEdition/名前が空文字なので400
=== RUN   TestPostAdmins/ユーザーが既にadminなので400
2025/10/31 21:55:43 error: failed to get game images: error
=== RUN   TestGetGameImages/画像がなくても問題なし
=== RUN   TestGetCallback/CallbackがErrInvalidAuthStateOrCodeなので400
=== RUN   TestGetGameVideoMeta/m4vで問題ないのでエラーなし
--- PASS: TestPostGame (0.04s)
    --- PASS: TestPostGame/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestPostGame/セッションがないので401 (0.00s)
    --- PASS: TestPostGame/authSessionがないので401 (0.00s)
    --- PASS: TestPostGame/リクエストボディが正しくないので400 (0.00s)
    --- PASS: TestPostGame/名前が空なので400 (0.00s)
    --- PASS: TestPostGame/名前が長すぎるので400 (0.00s)
    --- PASS: TestPostGame/説明が空文字でもエラーなし (0.01s)
    --- PASS: TestPostGame/Genresが空でもエラー無し (0.00s)
    --- PASS: TestPostGame/ジャンル名が長すぎるので400 (0.00s)
    --- PASS: TestPostGame/ジャンル名が0文字なので400 (0.00s)
    --- PASS: TestPostGame/ジャンルが複数あっても問題なし (0.00s)
    --- PASS: TestPostGame/CreateGameがエラーなので500 (0.00s)
    --- PASS: TestPostGame/Ownersに重複があるので400 (0.00s)
    --- PASS: TestPostGame/Maintainersに重複があるので400 (0.00s)
    --- PASS: TestPostGame/Ownersに重複があるので400#01 (0.00s)
    --- PASS: TestPostGame/OwnersとMaintainersに重複があるので400 (0.00s)
    --- PASS: TestPostGame/ジャンルに重複があるので400 (0.00s)
    --- PASS: TestPostGame/visibilityがlimitedでも問題なし (0.00s)
    --- PASS: TestPostGame/visibilityがprivateでも問題なし (0.00s)
    --- PASS: TestPostGame/visibilityがnilでもprivateになる (0.00s)
    --- PASS: TestPostGame/visibilityの値が正しくないので400 (0.00s)
=== RUN   TestGetGameImages/画像が複数あっても問題なし
=== CONT  TestGetCode
2025/10/31 21:55:43 error: failed to get game visibility: error
=== RUN   TestGameInfoVisibilityChecker/publicなのでエラー無し
=== RUN   TestGetCode/特に問題ないのでエラーなし
=== RUN   TestGetGameVideoMeta/mkvで問題ないのでエラーなし
--- PASS: TestGetGameImages (0.00s)
    --- PASS: TestGetGameImages/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameImages/pngでもエラーなし (0.00s)
    --- PASS: TestGetGameImages/gifでもエラーなし (0.00s)
    --- PASS: TestGetGameImages/jpeg,png,gifのいずれでもないので500 (0.00s)
    --- PASS: TestGetGameImages/GetGameImagesがErrInvalidGameIDなので404 (0.00s)
    --- PASS: TestGetGameImages/GetGameImagesがエラーなので500 (0.00s)
    --- PASS: TestGetGameImages/画像がなくても問題なし (0.00s)
    --- PASS: TestGetGameImages/画像が複数あっても問題なし (0.00s)
=== CONT  TestPatchGameGenre
=== RUN   TestGetCallback/Callbackがエラーなので500
=== RUN   TestPatchGameGenre/リクエストボディがおかしいので400
=== RUN   TestGetGameVideoMeta/mp4,mkv,m4vでないので500
2025/10/31 21:55:43 error: failed to convert video type: invalid video type: 100
=== RUN   TestGetSeats/正しく取得できる
=== RUN   TestPatchEdition/名前が長すぎるので400
=== PAUSE TestGetSeats/正しく取得できる
=== PAUSE TestPatchEdition/名前が長すぎるので400
=== RUN   TestGetSeats/GetSeatsがエラーなので500
=== RUN   TestPostAdmins/AddAdminsがエラーなので500
=== RUN   TestGameInfoVisibilityChecker/トークンが無いがpublicなので問題なし
2025/10/31 21:55:43 error: failed to callback: error
=== RUN   TestGetGameVideoMeta/GetGameVideoMetaがErrInvalidGameIDなので404
=== PAUSE TestGetSeats/GetSeatsがエラーなので500
--- PASS: TestGetCallback (0.00s)
    --- PASS: TestGetCallback/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetCallback/セッションがないので400 (0.00s)
    --- PASS: TestGetCallback/codeVerifierがないので400 (0.00s)
    --- PASS: TestGetCallback/CallbackがErrInvalidAuthStateOrCodeなので400 (0.00s)
    --- PASS: TestGetCallback/Callbackがエラーなので500 (0.00s)
=== CONT  Test_isFileUploadRequest
=== RUN   Test_isFileUploadRequest/POST_/api/v2/games/:gameID/files
=== PAUSE Test_isFileUploadRequest/POST_/api/v2/games/:gameID/files
=== RUN   Test_isFileUploadRequest/POST_/api/v2/games/:gameID/images
=== RUN   TestGetCode/Authorizeがエラーなので500
=== PAUSE Test_isFileUploadRequest/POST_/api/v2/games/:gameID/images
=== CONT  TestGetGameVideo
=== RUN   TestPatchEdition/URLが正しくないので400
=== PAUSE TestPatchEdition/URLが正しくないので400
=== RUN   TestGetGameVideo/特に問題ないのでエラーなし
=== RUN   TestPatchEdition/ErrInvalidEditionIDなので400
=== RUN   Test_isFileUploadRequest/POST_/api/v2/games/:gameID/videos
=== RUN   TestGetGameVideo/GetGameVideoがErrInvalidGameIDなので404
=== RUN   TestGetGameVideoMeta/GetGameVideoMetaがErrInvalidGameVideoIDなので404
=== PAUSE TestPatchEdition/ErrInvalidEditionIDなので400
=== RUN   TestPatchGameGenre/ジャンル名が空なので400
=== RUN   TestPatchEdition/ErrDuplicateGameVersionなので500
2025/10/31 21:55:43 error: failed to generate code: error
=== PAUSE Test_isFileUploadRequest/POST_/api/v2/games/:gameID/videos
=== RUN   TestGameInfoVisibilityChecker/トークンが無いがlimitedなので問題なし
=== RUN   TestGetCode/CodeChallengeMethodがSHA256以外なので500
2025/10/31 21:55:43 error: failed to add admin: test
=== RUN   Test_isFileUploadRequest/GET_/api/v2/games/:gameID/files
=== PAUSE Test_isFileUploadRequest/GET_/api/v2/games/:gameID/files
=== RUN   Test_isFileUploadRequest/POST_/api/v2/games/:gameID/others
=== PAUSE Test_isFileUploadRequest/POST_/api/v2/games/:gameID/others
2025/10/31 21:55:43 error: failed to get code challenge: unsupported code challenge method: 100
=== RUN   TestPostAdmins/他にadminがいてもエラー無し
=== PAUSE TestPatchEdition/ErrDuplicateGameVersionなので500
=== RUN   Test_isFileUploadRequest/POST_/api/v2/games/files
=== RUN   TestPatchEdition/ErrDuplicateGameなので500
=== RUN   TestGetGameVideo/GetGameVideoがErrInvalidGameVideoIDなので404
=== PAUSE Test_isFileUploadRequest/POST_/api/v2/games/files
=== PAUSE TestPatchEdition/ErrDuplicateGameなので500
=== RUN   TestGetGameVideoMeta/GetGameVideosがエラーなので500
=== CONT  TestGetGameGenres
=== RUN   TestPatchEdition/サービス層でエラーなので500
=== RUN   TestGetCode/sessionが存在しなくてもエラーなし
2025/10/31 21:55:43 error: failed to get game video meta: error
=== RUN   TestGetGameGenres/特に問題ないのでエラー無し
=== PAUSE TestPatchEdition/サービス層でエラーなので500
=== RUN   TestGetGameVideo/GetGameVideoがエラーなので500
--- PASS: TestGameInfoVisibilityChecker (0.02s)
    --- PASS: TestGameInfoVisibilityChecker/部員なので問題なし (0.00s)
    --- PASS: TestGameInfoVisibilityChecker/Authenticateがエラーなのでエラー (0.00s)
    --- PASS: TestGameInfoVisibilityChecker/limitedなのでエラー無し (0.00s)
    --- PASS: TestGameInfoVisibilityChecker/privateなので403 (0.00s)
    --- PASS: TestGameInfoVisibilityChecker/トークンが無いがprivateなので403 (0.00s)
    --- PASS: TestGameInfoVisibilityChecker/ゲームが存在しないのでエラー (0.00s)
    --- PASS: TestGameInfoVisibilityChecker/gameIDがuuidでないのでエラー (0.00s)
    --- PASS: TestGameInfoVisibilityChecker/GetGameがエラーなのでエラー (0.00s)
    --- PASS: TestGameInfoVisibilityChecker/publicなのでエラー無し (0.00s)
    --- PASS: TestGameInfoVisibilityChecker/トークンが無いがpublicなので問題なし (0.00s)
    --- PASS: TestGameInfoVisibilityChecker/トークンが無いがlimitedなので問題なし (0.00s)
=== CONT  TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeが成功するので200
--- PASS: TestGetGameVideoMeta (0.00s)
    --- PASS: TestGetGameVideoMeta/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameVideoMeta/m4vで問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameVideoMeta/mkvで問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameVideoMeta/mp4,mkv,m4vでないので500 (0.00s)
    --- PASS: TestGetGameVideoMeta/GetGameVideoMetaがErrInvalidGameIDなので404 (0.00s)
    --- PASS: TestGetGameVideoMeta/GetGameVideoMetaがErrInvalidGameVideoIDなので404 (0.00s)
    --- PASS: TestGetGameVideoMeta/GetGameVideosがエラーなので500 (0.00s)
=== CONT  TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeがErrInvalidPlayLogEditionGamePairなので400
=== CONT  TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeがその他のエラーなので500
2025/10/31 21:55:43 error: failed to get game video: error
=== RUN   TestPatchGameGenre/ジャンル名が長すぎるので400
=== CONT  TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeがErrInvalidPlayLogIDなので404
--- PASS: TestGetGameVideo (0.00s)
    --- PASS: TestGetGameVideo/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameVideo/GetGameVideoがErrInvalidGameIDなので404 (0.00s)
    --- PASS: TestGetGameVideo/GetGameVideoがErrInvalidGameVideoIDなので404 (0.00s)
    --- PASS: TestGetGameVideo/GetGameVideoがエラーなので500 (0.00s)
--- PASS: TestPostAdmins (0.01s)
    --- PASS: TestPostAdmins/特に問題ないのでエラー無し (0.01s)
    --- PASS: TestPostAdmins/sessionが無いので401 (0.00s)
    --- PASS: TestPostAdmins/auth_sessionが無いので401 (0.00s)
    --- PASS: TestPostAdmins/リクエストが不正なので400 (0.00s)
    --- PASS: TestPostAdmins/存在しないユーザーなので400 (0.00s)
    --- PASS: TestPostAdmins/ユーザーが既にadminなので400 (0.00s)
    --- PASS: TestPostAdmins/AddAdminsがエラーなので500 (0.00s)
    --- PASS: TestPostAdmins/他にadminがいてもエラー無し (0.00s)
=== CONT  TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeがErrInvalidEndTimeなので400
--- PASS: TestGetCode (0.00s)
    --- PASS: TestGetCode/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetCode/Authorizeがエラーなので500 (0.00s)
    --- PASS: TestGetCode/CodeChallengeMethodがSHA256以外なので500 (0.00s)
    --- PASS: TestGetCode/sessionが存在しなくてもエラーなし (0.00s)
=== CONT  TestPatchGamePlayLogEnd/request_bodyが不正なのでエラー
=== CONT  TestGetEditionGames/ゲームURLとゲームファイルがnullでもエラーなし
=== CONT  TestGetEditionGames/サービス層でエラーが発生したので500
=== RUN   TestGetGameGenres/sessionがあってもエラー無し
=== CONT  TestGetEditionGames/不正なeditionIDなので400
2025/10/31 21:55:43 error: failed to get games: internal error
=== RUN   TestPatchGameGenre/UpdateGameGenreがErrNoGameGenreなので404
=== CONT  TestGetEditionGames/2つ以上のゲームがリストに含まれていてもエラーなし
=== CONT  TestGetEditionGames/ファイルとurlが両方あってもエラーなし
=== CONT  TestGetEditionGames/ファイルが複数あってももエラーなし
2025/10/31 21:55:43 error: failed to update game play log end time: assert.AnError general error for testing
=== CONT  TestGetEditionGames/jarでもエラーなし
=== CONT  TestGetEditionGames/windowsでもエラーなし
=== CONT  TestDeleteGameRole/sessionがないので401
=== CONT  TestGetEditionGames/特に問題ないのでエラーなし
=== CONT  TestDeleteGameRole/RemoveGameManagementRoleがエラーなので500
=== CONT  TestDeleteGameRole/RemoveGameManagementRoleがErrNoGameなので400
=== CONT  TestGetEditionGames/macでもエラーなし
--- PASS: TestPatchGamePlayLogEnd (0.00s)
    --- PASS: TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeがErrInvalidPlayLogIDなので404 (0.00s)
    --- PASS: TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeがErrInvalidEndTimeなので400 (0.00s)
    --- PASS: TestPatchGamePlayLogEnd/request_bodyが不正なのでエラー (0.00s)
    --- PASS: TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeが成功するので200 (0.00s)
    --- PASS: TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeがErrInvalidPlayLogEditionGamePairなので400 (0.00s)
    --- PASS: TestPatchGamePlayLogEnd/UpdatePlayLogEndTimeがその他のエラーなので500 (0.00s)
=== RUN   TestGetGameGenres/複数あってもエラー無し
=== CONT  TestDeleteGameRole/RemoveGameManagementRoleがErrCannotDeleteOwnerなので400
=== RUN   TestPatchGameGenre/UpdateGameGenreがErrDuplicateGameGenreNameなので400
=== CONT  TestDeleteGameRole/RemoveGameManagementRoleがErrInvalidRoleなので404
=== CONT  TestDeleteGameRole/特に問題なく削除できる
=== CONT  TestDeleteGameRole/GetGameのvisibilityが無効なので500
=== RUN   TestGetGameGenres/GetGameGenresがエラーなので500
=== RUN   TestPatchGameGenre/UpdateGameGenreがErrNoGameGenreUpdatedなので400
2025/10/31 21:55:43 error: failed to get game genres: test error
--- PASS: TestGetGameGenres (0.00s)
    --- PASS: TestGetGameGenres/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestGetGameGenres/sessionがあってもエラー無し (0.00s)
    --- PASS: TestGetGameGenres/複数あってもエラー無し (0.00s)
    --- PASS: TestGetGameGenres/GetGameGenresがエラーなので500 (0.00s)
=== CONT  TestDeleteGameRole/GetGameがErrNoGameなので404
=== CONT  TestDeleteGameRole/GetGameがエラーなので500
--- PASS: TestGetEditionGames (0.00s)
    --- PASS: TestGetEditionGames/サービス層でエラーが発生したので500 (0.00s)
    --- PASS: TestGetEditionGames/不正なeditionIDなので400 (0.00s)
    --- PASS: TestGetEditionGames/ゲームURLとゲームファイルがnullでもエラーなし (0.00s)
    --- PASS: TestGetEditionGames/ファイルとurlが両方あってもエラーなし (0.00s)
    --- PASS: TestGetEditionGames/ファイルが複数あってももエラーなし (0.00s)
    --- PASS: TestGetEditionGames/windowsでもエラーなし (0.00s)
    --- PASS: TestGetEditionGames/2つ以上のゲームがリストに含まれていてもエラーなし (0.00s)
    --- PASS: TestGetEditionGames/jarでもエラーなし (0.00s)
    --- PASS: TestGetEditionGames/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetEditionGames/macでもエラーなし (0.00s)
=== CONT  TestDeleteGameRole/authSessionが無効なので401
2025/10/31 21:55:43 error: failed to convert game visibility: invalid game visibility: 100
2025/10/31 21:55:43 error: failed to remove game management role: error
=== CONT  TestPatchEditionGame/不正なリクエストボディなので400
=== CONT  TestPatchGameRole/GetGameのvisibilityが無効なので500
=== CONT  TestPatchEditionGame/ファイルが複数でもエラーなし
=== CONT  TestPatchEditionGame/urlとファイルでもエラーなし
=== CONT  TestPatchEditionGame/macファイルでもエラーなし
2025/10/31 21:55:43 error: failed to get game: error
=== RUN   TestPatchGameGenre/UpdateGameGenreがエラーなので500
=== CONT  TestPatchEditionGame/jarファイルでもエラーなし
2025/10/31 21:55:43 error: failed to convert game visibility: invalid game visibility: 100
=== CONT  TestPatchEditionGame/ErrDuplicateGameなので400
=== CONT  TestPatchEditionGame/ErrDuplicateGameVersionなので400
=== CONT  TestPatchEditionGame/不正なゲームバージョンIDなので400
=== CONT  TestPatchEditionGame/windowsでもエラーなし
2025/10/31 21:55:43 error: failed to update game genre: test error
=== CONT  TestPatchEditionGame/サービス層でエラーが発生したので500
=== RUN   TestPatchGameGenre/特に問題ないのでエラー無し
=== CONT  TestPatchEditionGame/空のゲームバージョン一覧でもエラーなし
2025/10/31 21:55:43 error: failed to update edition games: internal error
=== CONT  TestPatchEditionGame/特に問題ないのでエラーなし
=== CONT  TestPatchGameRole/EditGameManagementRoleがErrNoGameManagementRoleUpdatedなので400
=== CONT  TestPatchGameRole/EditGameManagementRoleがErrInvalidUserIDなので400
=== CONT  TestPatchGameRole/EditGameManagementRoleがErrCannotEditOwnersなので400
=== CONT  TestPatchGameRole/maintainerでも問題なし
=== CONT  TestPatchGameRole/EditGameManagementRoleがErrNoGameなので404
--- PASS: TestPatchGameGenre (0.01s)
    --- PASS: TestPatchGameGenre/リクエストボディがおかしいので400 (0.00s)
    --- PASS: TestPatchGameGenre/ジャンル名が空なので400 (0.00s)
    --- PASS: TestPatchGameGenre/ジャンル名が長すぎるので400 (0.00s)
    --- PASS: TestPatchGameGenre/UpdateGameGenreがErrNoGameGenreなので404 (0.00s)
    --- PASS: TestPatchGameGenre/UpdateGameGenreがErrDuplicateGameGenreNameなので400 (0.00s)
    --- PASS: TestPatchGameGenre/UpdateGameGenreがErrNoGameGenreUpdatedなので400 (0.00s)
    --- PASS: TestPatchGameGenre/UpdateGameGenreがエラーなので500 (0.00s)
    --- PASS: TestPatchGameGenre/特に問題ないのでエラー無し (0.00s)
=== CONT  TestPatchGameRole/ownerでも問題なし
=== CONT  TestPatchGameRole/sessionがないので401
=== CONT  TestPatchGameRole/roleTypeがnilでも問題なし
--- PASS: TestPatchEditionGame (0.00s)
    --- PASS: TestPatchEditionGame/不正なリクエストボディなので400 (0.00s)
    --- PASS: TestPatchEditionGame/ファイルが複数でもエラーなし (0.00s)
    --- PASS: TestPatchEditionGame/macファイルでもエラーなし (0.00s)
    --- PASS: TestPatchEditionGame/ErrDuplicateGameなので400 (0.00s)
    --- PASS: TestPatchEditionGame/ErrDuplicateGameVersionなので400 (0.00s)
    --- PASS: TestPatchEditionGame/urlとファイルでもエラーなし (0.00s)
    --- PASS: TestPatchEditionGame/サービス層でエラーが発生したので500 (0.00s)
    --- PASS: TestPatchEditionGame/jarファイルでもエラーなし (0.00s)
    --- PASS: TestPatchEditionGame/空のゲームバージョン一覧でもエラーなし (0.00s)
    --- PASS: TestPatchEditionGame/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestPatchEditionGame/不正なゲームバージョンIDなので400 (0.00s)
    --- PASS: TestPatchEditionGame/windowsでもエラーなし (0.00s)
=== CONT  TestPatchGameRole/GetGameがErrNoGameなので404
--- PASS: TestDeleteGameRole (0.00s)
    --- PASS: TestDeleteGameRole/sessionがないので401 (0.00s)
    --- PASS: TestDeleteGameRole/RemoveGameManagementRoleがErrNoGameなので400 (0.00s)
    --- PASS: TestDeleteGameRole/RemoveGameManagementRoleがErrCannotDeleteOwnerなので400 (0.00s)
    --- PASS: TestDeleteGameRole/GetGameのvisibilityが無効なので500 (0.00s)
    --- PASS: TestDeleteGameRole/RemoveGameManagementRoleがエラーなので500 (0.00s)
    --- PASS: TestDeleteGameRole/RemoveGameManagementRoleがErrInvalidRoleなので404 (0.00s)
    --- PASS: TestDeleteGameRole/authSessionが無効なので401 (0.00s)
    --- PASS: TestDeleteGameRole/GetGameがエラーなので500 (0.00s)
    --- PASS: TestDeleteGameRole/GetGameがErrNoGameなので404 (0.00s)
    --- PASS: TestDeleteGameRole/特に問題なく削除できる (0.01s)
=== CONT  TestPatchGameRole/無効なroleTypeなので400
=== CONT  TestPatchGameRole/複数ジャンルでも問題なし
=== CONT  TestPatchGameRole/EditGameManagementRoleがエラーなので500
=== CONT  TestPatchGameRole/authSessionが無効なので401
=== CONT  TestPatchGameRole/GetGameがエラーなので500
=== CONT  TestGetGamePlayStats/正常系:_game_version_idあり
=== CONT  TestGetGamePlayStats/正常系:_start,_end指定
=== CONT  TestPatchGameRole/複数人いても問題なし
2025/10/31 21:55:43 error: failed to edit game management role: error
=== CONT  TestGetGamePlayStats/クエリパラメータなし
=== CONT  TestGetGamePlayStats/異常系:500_serviceでその他のエラー
=== CONT  TestGetGamePlayStats/異常系:404_serviceでErrInvalidGame
=== CONT  TestGetGamePlayStats/異常系:400_serviceでErrTimePeriodTooLong
=== CONT  TestGetGamePlayStats/異常系:_400_serviceでErrInvalidTimeRange
=== CONT  TestPostRevokeProductKey/ErrKeyAlreadyRevokedなので404
2025/10/31 21:55:43 error: failed to get game: error
=== CONT  TestPostRevokeProductKey/エラーが発生して500
=== CONT  TestPostRevokeProductKey/ErrInvalidProductKeyなので400
=== CONT  TestPostRevokeProductKey/特に問題なし
2025/10/31 21:55:43 get game play stats: assert.AnError general error for testing
=== CONT  TestGetEdition/GetEditionがエラーなので500
2025/10/31 21:55:43 error: failed to revoke product key: error
=== CONT  TestGetEdition/アンケートURLなしのエディションが取得できる
=== CONT  TestPostProductKey/Numが負なので400
=== CONT  TestGetEdition/存在しないエディションIDなので400
2025/10/31 21:55:43 error: failed to get edition: internal error
=== CONT  TestPostProductKey/エラーが発生して500
=== CONT  TestPostProductKey/ErrInvalidKeyNumなので400
=== CONT  TestDeleteEdition/存在しないエディションIDなので400
2025/10/31 21:55:43 error: failed to create product key: error
=== CONT  TestDeleteEdition/特に問題ないのでエラー無し
=== CONT  TestDeleteEdition/DeleteEditionがエラーなので500
=== CONT  TestGetEdition/アンケートURLありのエディションが取得できる
=== CONT  TestPostProductKey/ErrInvalidEditionIDなので400
=== CONT  TestGetEditionPlayStats/GetEditionPlayStatsがその他のエラーなので500
=== CONT  TestGetEditionPlayStats/GetEditionPlayStatsがErrInvalidEditionなので404
=== CONT  TestGetEditionPlayStats/GetEditionPlayStatsがErrInvalidTimeRangeなので400
2025/10/31 21:55:43 error: failed to delete edition: internal error
--- PASS: TestPatchGameRole (0.01s)
    --- PASS: TestPatchGameRole/GetGameのvisibilityが無効なので500 (0.00s)
    --- PASS: TestPatchGameRole/EditGameManagementRoleがErrInvalidUserIDなので400 (0.00s)
    --- PASS: TestPatchGameRole/sessionがないので401 (0.00s)
    --- PASS: TestPatchGameRole/EditGameManagementRoleがErrNoGameManagementRoleUpdatedなので400 (0.00s)
    --- PASS: TestPatchGameRole/EditGameManagementRoleがErrCannotEditOwnersなので400 (0.00s)
    --- PASS: TestPatchGameRole/EditGameManagementRoleがErrNoGameなので404 (0.00s)
    --- PASS: TestPatchGameRole/roleTypeがnilでも問題なし (0.00s)
    --- PASS: TestPatchGameRole/maintainerでも問題なし (0.00s)
    --- PASS: TestPatchGameRole/GetGameがErrNoGameなので404 (0.00s)
    --- PASS: TestPatchGameRole/authSessionが無効なので401 (0.00s)
    --- PASS: TestPatchGameRole/ownerでも問題なし (0.00s)
    --- PASS: TestPatchGameRole/EditGameManagementRoleがエラーなので500 (0.00s)
    --- PASS: TestPatchGameRole/複数人いても問題なし (0.00s)
    --- PASS: TestPatchGameRole/複数ジャンルでも問題なし (0.00s)
    --- PASS: TestPatchGameRole/GetGameがエラーなので500 (0.00s)
    --- PASS: TestPatchGameRole/無効なroleTypeなので400 (0.00s)
--- PASS: TestGetGamePlayStats (0.01s)
    --- PASS: TestGetGamePlayStats/正常系:_game_version_idあり (0.00s)
    --- PASS: TestGetGamePlayStats/正常系:_start,_end指定 (0.00s)
    --- PASS: TestGetGamePlayStats/異常系:400_serviceでErrTimePeriodTooLong (0.00s)
    --- PASS: TestGetGamePlayStats/異常系:404_serviceでErrInvalidGame (0.00s)
    --- PASS: TestGetGamePlayStats/クエリパラメータなし (0.00s)
    --- PASS: TestGetGamePlayStats/異常系:500_serviceでその他のエラー (0.00s)
    --- PASS: TestGetGamePlayStats/異常系:_400_serviceでErrInvalidTimeRange (0.00s)
2025/10/31 21:55:43 error: failed to get edition play stats: assert.AnError general error for testing
=== CONT  TestGetEditionPlayStats/startのみ指定でもエラーなし
=== CONT  TestPostProductKey/特に問題なし
=== CONT  TestGetEditionPlayStats/endのみ指定でもエラーなし
=== CONT  TestGetEditionPlayStats/start/endの両方を指定してもエラーなし
=== CONT  TestGetEditionPlayStats/クエリパラメータなしでエラーなし
=== CONT  TestGetEditionPlayStats/GetEditionPlayStatsがErrTimePeriodTooLongなので400
=== CONT  TestPostEditionAuthorize/リクエストボディが無効なので400
=== CONT  TestPostEditionAuthorize/AuthorizeEditionがErrInvalidProductKeyなので400
--- PASS: TestPostRevokeProductKey (0.00s)
    --- PASS: TestPostRevokeProductKey/ErrKeyAlreadyRevokedなので404 (0.00s)
    --- PASS: TestPostRevokeProductKey/特に問題なし (0.00s)
    --- PASS: TestPostRevokeProductKey/ErrInvalidProductKeyなので400 (0.00s)
    --- PASS: TestPostRevokeProductKey/エラーが発生して500 (0.00s)
=== CONT  TestPostEditionAuthorize/特に問題なし
=== CONT  TestPostEditionAuthorize/AuthorizeEditionがエラーなので500
--- PASS: TestGetEdition (0.00s)
    --- PASS: TestGetEdition/存在しないエディションIDなので400 (0.00s)
    --- PASS: TestGetEdition/GetEditionがエラーなので500 (0.00s)
    --- PASS: TestGetEdition/アンケートURLなしのエディションが取得できる (0.00s)
    --- PASS: TestGetEdition/アンケートURLありのエディションが取得できる (0.00s)
=== CONT  TestPostEditionAuthorize/プロダクトキーが無効な形式なので400
2025/10/31 21:55:43 error: failed to authorize launcher: error
=== CONT  TestGetEditions/特に問題ないのでエラーなし
=== CONT  TestGetEditions/エディションが存在しなくてもでもエラーなし
=== CONT  TestGetEditions/アンケートURLが無くてもエラーなし
=== CONT  TestGetEditions/複数エディションでもエラーなし
=== CONT  TestGetEditions/GetEditionsがエラーなので500
2025/10/31 21:55:43 error: failed to get editions: error
=== CONT  TestGameFileVisibilityChecker/部員でなく、limitedなので401
--- PASS: TestPostProductKey (0.00s)
    --- PASS: TestPostProductKey/Numが負なので400 (0.00s)
    --- PASS: TestPostProductKey/エラーが発生して500 (0.00s)
    --- PASS: TestPostProductKey/ErrInvalidKeyNumなので400 (0.00s)
    --- PASS: TestPostProductKey/ErrInvalidEditionIDなので400 (0.00s)
    --- PASS: TestPostProductKey/特に問題なし (0.00s)
=== CONT  TestGameFileVisibilityChecker/部員でなく、privateなので401
=== CONT  TestGameFileVisibilityChecker/ゲームが存在しないので404
=== CONT  TestGameFileVisibilityChecker/トークンが無いが、publicなのでOK
=== CONT  TestGameFileVisibilityChecker/部員なのでOK
=== CONT  TestGetEditionInfo/特に問題なし
=== CONT  TestGetEditionInfo/contextにeditionが入ってないので500
--- PASS: TestGetEditions (0.00s)
    --- PASS: TestGetEditions/エディションが存在しなくてもでもエラーなし (0.00s)
    --- PASS: TestGetEditions/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetEditions/GetEditionsがエラーなので500 (0.00s)
    --- PASS: TestGetEditions/アンケートURLが無くてもエラーなし (0.00s)
    --- PASS: TestGetEditions/複数エディションでもエラーなし (0.00s)
2025/10/31 21:55:43 error: failed to get edition: no value
=== CONT  TestGetEditionInfo/アンケートURLがあっても問題なし
=== CONT  TestPostEdition/Edition名が長すぎるので400
--- PASS: TestPostEditionAuthorize (0.00s)
    --- PASS: TestPostEditionAuthorize/リクエストボディが無効なので400 (0.00s)
    --- PASS: TestPostEditionAuthorize/AuthorizeEditionがErrInvalidProductKeyなので400 (0.00s)
    --- PASS: TestPostEditionAuthorize/プロダクトキーが無効な形式なので400 (0.00s)
    --- PASS: TestPostEditionAuthorize/AuthorizeEditionがエラーなので500 (0.00s)
    --- PASS: TestPostEditionAuthorize/特に問題なし (0.00s)
=== CONT  TestPostEdition/ゲームバージョンが重複しているので400
--- PASS: TestDeleteEdition (0.00s)
    --- PASS: TestDeleteEdition/存在しないエディションIDなので400 (0.00s)
    --- PASS: TestDeleteEdition/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestDeleteEdition/DeleteEditionがエラーなので500 (0.00s)
=== CONT  TestPostEdition/無効なゲームバージョンIDが含まれているので400
--- PASS: TestGetEditionInfo (0.00s)
    --- PASS: TestGetEditionInfo/contextにeditionが入ってないので500 (0.00s)
    --- PASS: TestGetEditionInfo/特に問題なし (0.00s)
    --- PASS: TestGetEditionInfo/アンケートURLがあっても問題なし (0.00s)
=== CONT  TestPostEdition/サービス層でエラーが発生したので500
=== CONT  TestPostEdition/ゲームが重複しているので400
=== CONT  TestPostEdition/URLが正しくないので400
=== CONT  TestPostActivateProductKey/特に問題なし
=== CONT  TestPostEdition/特に問題ないのでエラーなし
2025/10/31 21:55:43 error: failed to create edition: internal error
=== CONT  TestPostActivateProductKey/エラーが発生して500
=== CONT  TestPostEdition/Edition名が空文字なので400
=== CONT  TestPostEdition/アンケートURLがなくてもエラーなし
=== CONT  TestPatchSeatStatus/UpdateSeatStatusがエラーなので500
2025/10/31 21:55:43 error: failed to activate product key: error
=== CONT  TestPatchSeatStatus/UpdateSeatStatusで存在しない座席IDが指定されたら404
=== CONT  TestPostActivateProductKey/ErrKeyAlreadyActivatedなので404
=== CONT  TestPostActivateProductKey/ErrInvalidProductKeyなので400
=== NAME  TestPostEdition/特に問題ないのでエラーなし
    edition_test.go:411: テストケース: 特に問題ないのでエラーなし
--- PASS: TestGameFileVisibilityChecker (0.00s)
    --- PASS: TestGameFileVisibilityChecker/部員でなく、limitedなので401 (0.00s)
    --- PASS: TestGameFileVisibilityChecker/トークンが無いが、publicなのでOK (0.00s)
    --- PASS: TestGameFileVisibilityChecker/部員でなく、privateなので401 (0.00s)
    --- PASS: TestGameFileVisibilityChecker/部員なのでOK (0.00s)
    --- PASS: TestGameFileVisibilityChecker/ゲームが存在しないので404 (0.00s)
=== NAME  TestPostEdition/特に問題ないのでエラーなし
    edition_test.go:412: レスポンスコード: 201
=== CONT  TestPatchSeatStatus/無効な座席ステータスが指定されたら400
--- PASS: TestGetEditionPlayStats (0.01s)
    --- PASS: TestGetEditionPlayStats/GetEditionPlayStatsがその他のエラーなので500 (0.00s)
    --- PASS: TestGetEditionPlayStats/GetEditionPlayStatsがErrInvalidEditionなので404 (0.00s)
    --- PASS: TestGetEditionPlayStats/GetEditionPlayStatsがErrInvalidTimeRangeなので400 (0.00s)
    --- PASS: TestGetEditionPlayStats/GetEditionPlayStatsがErrTimePeriodTooLongなので400 (0.00s)
    --- PASS: TestGetEditionPlayStats/クエリパラメータなしでエラーなし (0.00s)
    --- PASS: TestGetEditionPlayStats/startのみ指定でもエラーなし (0.00s)
    --- PASS: TestGetEditionPlayStats/endのみ指定でもエラーなし (0.00s)
    --- PASS: TestGetEditionPlayStats/start/endの両方を指定してもエラーなし (0.00s)
=== CONT  TestPatchSeatStatus/UpdateSeatStatusで無効な座席ステータスが指定されたら404
2025/10/31 21:55:43 error: failed to patch seat status: assert.AnError general error for testing
2025/10/31 21:55:43 error: invalid seat status: invalid
=== CONT  TestPostGamePlayLogStart/CreatePlayLogが成功するので201
=== NAME  TestPostEdition/アンケートURLがなくてもエラーなし
    edition_test.go:411: テストケース: アンケートURLがなくてもエラーなし
    edition_test.go:412: レスポンスコード: 201
--- PASS: TestPostEdition (0.01s)
    --- PASS: TestPostEdition/Edition名が長すぎるので400 (0.00s)
    --- PASS: TestPostEdition/無効なゲームバージョンIDが含まれているので400 (0.00s)
    --- PASS: TestPostEdition/ゲームバージョンが重複しているので400 (0.00s)
    --- PASS: TestPostEdition/サービス層でエラーが発生したので500 (0.00s)
    --- PASS: TestPostEdition/URLが正しくないので400 (0.00s)
    --- PASS: TestPostEdition/ゲームが重複しているので400 (0.00s)
    --- PASS: TestPostEdition/Edition名が空文字なので400 (0.00s)
    --- PASS: TestPostEdition/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestPostEdition/アンケートURLがなくてもエラーなし (0.00s)
=== CONT  TestPostGamePlayLogStart/CreatePlayLogがその他のエラーなので500
=== CONT  TestPostGamePlayLogStart/CreatePlayLogがErrInvalidGameVersionなので404
=== CONT  TestPatchSeatStatus/正しく変更できる
2025/10/31 21:55:43 error: failed to create game play log: assert.AnError general error for testing
=== CONT  TestPostGamePlayLogStart/CreatePlayLogがErrInvalidEditionなので404
--- PASS: TestPostActivateProductKey (0.00s)
    --- PASS: TestPostActivateProductKey/特に問題なし (0.00s)
    --- PASS: TestPostActivateProductKey/エラーが発生して500 (0.00s)
    --- PASS: TestPostActivateProductKey/ErrKeyAlreadyActivatedなので404 (0.00s)
    --- PASS: TestPostActivateProductKey/ErrInvalidProductKeyなので400 (0.00s)
=== CONT  TestPostSeat/UpdateSeatNumで0を指定した場合
=== CONT  TestPatchSeatStatus/UpdateSeatStatusで座席が空席に変更された場合
=== CONT  TestPostSeat/UpdateSeatNumが負のとき400
=== CONT  TestPatchSeatStatus/UpdateSeatStatusの返り値に無効な座席ステータスが含まれていたら500
=== CONT  TestPostSeat/UpdateSeatNumで1000を指定した場合
=== CONT  TestPostGamePlayLogStart/CreatePlayLogがErrInvalidGameなので404
=== CONT  TestPostSeat/UpdateSeatNumがエラーなので500
=== CONT  TestPostSeat/正しく変更できる
2025/10/31 21:55:43 error: invalid seat status: 100
2025/10/31 21:55:43 error: failed to post seat: assert.AnError general error for testing
=== CONT  TestPostSeat/UpdateSeatNumで1000を超えたとき400
=== CONT  TestPostGamePlayLogStart/request_bodyが不正なのでエラー
=== CONT  TestGetProductKeys/GetProductKeysがErrInvalidEditionIDなので400
=== CONT  TestGetProductKeys/statusがinactiveでも問題なし
=== CONT  TestGetProductKeys/プロダクトキーが無くても問題なし
=== CONT  TestGetProductKeys/GetProductKeysがエラーなので500
--- PASS: TestPatchSeatStatus (0.00s)
    --- PASS: TestPatchSeatStatus/UpdateSeatStatusがエラーなので500 (0.00s)
    --- PASS: TestPatchSeatStatus/無効な座席ステータスが指定されたら400 (0.00s)
    --- PASS: TestPatchSeatStatus/UpdateSeatStatusで無効な座席ステータスが指定されたら404 (0.00s)
    --- PASS: TestPatchSeatStatus/正しく変更できる (0.00s)
    --- PASS: TestPatchSeatStatus/UpdateSeatStatusで存在しない座席IDが指定されたら404 (0.00s)
    --- PASS: TestPatchSeatStatus/UpdateSeatStatusで座席が空席に変更された場合 (0.00s)
    --- PASS: TestPatchSeatStatus/UpdateSeatStatusの返り値に無効な座席ステータスが含まれていたら500 (0.00s)
=== CONT  TestGetProductKeys/特に問題なし
=== CONT  TestGetProductKeys/statusが無効な値なので400
=== CONT  TestGetProductKeys/statusがactiveでも問題なし
2025/10/31 21:55:43 failed to get product keys: error
--- PASS: TestPostSeat (0.00s)
    --- PASS: TestPostSeat/UpdateSeatNumが負のとき400 (0.00s)
    --- PASS: TestPostSeat/UpdateSeatNumで0を指定した場合 (0.00s)
    --- PASS: TestPostSeat/UpdateSeatNumで1000を指定した場合 (0.00s)
    --- PASS: TestPostSeat/UpdateSeatNumがエラーなので500 (0.00s)
    --- PASS: TestPostSeat/正しく変更できる (0.00s)
    --- PASS: TestPostSeat/UpdateSeatNumで1000を超えたとき400 (0.00s)
=== CONT  TestGetProductKeys/GetProductKeysに無効なstatusがあったらそれを飛ばす
=== CONT  TestGetProductKeys/複数のプロダクトキーでも問題なし
=== CONT  TestGetSeats/正しく取得できる
=== CONT  TestGetSeats/GetSeatsがエラーなので500
=== CONT  Test_isFileUploadRequest/POST_/api/v2/games/:gameID/files
2025/10/31 21:55:43 error: failed to get seats: assert.AnError general error for testing
=== CONT  TestGetSeats/無効な座席ステータスが含まれていたらそれを飛ばす
=== CONT  Test_isFileUploadRequest/POST_/api/v2/games/:gameID/others
=== CONT  Test_isFileUploadRequest/GET_/api/v2/games/:gameID/files
=== CONT  Test_isFileUploadRequest/POST_/api/v2/games/:gameID/videos
--- PASS: TestPostGamePlayLogStart (0.00s)
    --- PASS: TestPostGamePlayLogStart/CreatePlayLogが成功するので201 (0.00s)
    --- PASS: TestPostGamePlayLogStart/CreatePlayLogがその他のエラーなので500 (0.00s)
    --- PASS: TestPostGamePlayLogStart/CreatePlayLogがErrInvalidGameVersionなので404 (0.00s)
    --- PASS: TestPostGamePlayLogStart/CreatePlayLogがErrInvalidEditionなので404 (0.00s)
    --- PASS: TestPostGamePlayLogStart/request_bodyが不正なのでエラー (0.00s)
    --- PASS: TestPostGamePlayLogStart/CreatePlayLogがErrInvalidGameなので404 (0.00s)
=== CONT  Test_isFileUploadRequest/POST_/api/v2/games/files
2025/10/31 21:55:43 error: invalid seat status: 100
=== CONT  TestPatchEdition/特に問題ないのでエラーなし
=== CONT  TestPatchEdition/サービス層でエラーなので500
=== CONT  TestPatchEdition/ErrDuplicateGameなので500
=== CONT  TestPatchEdition/ErrDuplicateGameVersionなので500
=== CONT  Test_isFileUploadRequest/POST_/api/v2/games/:gameID/images
2025/10/31 21:55:43 error: invalid product key status: 100
=== CONT  TestPatchEdition/ErrInvalidEditionIDなので400
--- PASS: TestGetSeats (0.00s)
    --- PASS: TestGetSeats/GetSeatsがエラーなので500 (0.00s)
    --- PASS: TestGetSeats/正しく取得できる (0.00s)
    --- PASS: TestGetSeats/無効な座席ステータスが含まれていたらそれを飛ばす (0.00s)
2025/10/31 21:55:43 error: failed to update edition: internal error
2025/10/31 21:55:43 error: failed to update edition: duplicate game version
=== CONT  TestPatchEdition/URLがなくてもエラーなし
=== CONT  TestPatchEdition/リクエストボディが不正なので400
--- PASS: TestGetProductKeys (0.00s)
    --- PASS: TestGetProductKeys/プロダクトキーが無くても問題なし (0.00s)
    --- PASS: TestGetProductKeys/statusがinactiveでも問題なし (0.00s)
    --- PASS: TestGetProductKeys/statusが無効な値なので400 (0.00s)
    --- PASS: TestGetProductKeys/GetProductKeysがErrInvalidEditionIDなので400 (0.00s)
    --- PASS: TestGetProductKeys/GetProductKeysがエラーなので500 (0.00s)
    --- PASS: TestGetProductKeys/特に問題なし (0.00s)
    --- PASS: TestGetProductKeys/statusがactiveでも問題なし (0.00s)
    --- PASS: TestGetProductKeys/複数のプロダクトキーでも問題なし (0.00s)
    --- PASS: TestGetProductKeys/GetProductKeysに無効なstatusがあったらそれを飛ばす (0.00s)
=== CONT  TestPatchEdition/名前が空文字なので400
=== CONT  TestPatchEdition/URLが正しくないので400
2025/10/31 21:55:43 error: failed to update edition: duplicate game
=== CONT  TestPatchEdition/名前が長すぎるので400
--- PASS: Test_isFileUploadRequest (0.00s)
    --- PASS: Test_isFileUploadRequest/POST_/api/v2/games/:gameID/files (0.00s)
    --- PASS: Test_isFileUploadRequest/POST_/api/v2/games/:gameID/others (0.00s)
    --- PASS: Test_isFileUploadRequest/GET_/api/v2/games/:gameID/files (0.00s)
    --- PASS: Test_isFileUploadRequest/POST_/api/v2/games/:gameID/videos (0.00s)
    --- PASS: Test_isFileUploadRequest/POST_/api/v2/games/:gameID/images (0.00s)
    --- PASS: Test_isFileUploadRequest/POST_/api/v2/games/files (0.00s)
--- PASS: TestPatchEdition (0.01s)
    --- PASS: TestPatchEdition/サービス層でエラーなので500 (0.00s)
    --- PASS: TestPatchEdition/ErrDuplicateGameVersionなので500 (0.00s)
    --- PASS: TestPatchEdition/URLがなくてもエラーなし (0.00s)
    --- PASS: TestPatchEdition/URLが正しくないので400 (0.00s)
    --- PASS: TestPatchEdition/ErrDuplicateGameなので500 (0.00s)
    --- PASS: TestPatchEdition/リクエストボディが不正なので400 (0.00s)
    --- PASS: TestPatchEdition/ErrInvalidEditionIDなので400 (0.00s)
    --- PASS: TestPatchEdition/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestPatchEdition/名前が長すぎるので400 (0.00s)
    --- PASS: TestPatchEdition/名前が空文字なので400 (0.00s)
PASS
ok  	github.com/traPtitech/trap-collection-server/src/handler/v2	(cached)
?   	github.com/traPtitech/trap-collection-server/src/handler/v2/openapi	[no test files]
?   	github.com/traPtitech/trap-collection-server/src/repository	[no test files]
# github.com/traPtitech/trap-collection-server/src/service/v2.test
ld: warning: '/private/var/folders/s9/864hmsz17cgdx8gd_l92nyxc0000gn/T/go-link-1498293131/000013.o' has malformed LC_DYSYMTAB, expected 98 undefined symbols to start at index 1626, found 95 undefined symbols starting at index 1626
# github.com/traPtitech/trap-collection-server/src/repository/gorm2.test
ld: warning: '/private/var/folders/s9/864hmsz17cgdx8gd_l92nyxc0000gn/T/go-link-1780279927/000013.o' has malformed LC_DYSYMTAB, expected 98 undefined symbols to start at index 1626, found 95 undefined symbols starting at index 1626
[mysql] 2025/10/31 23:00:18 packets.go:58 unexpected EOF
[mysql] 2025/10/31 23:00:19 packets.go:58 unexpected EOF
[mysql] 2025/10/31 23:00:20 packets.go:58 unexpected EOF
[mysql] 2025/10/31 23:00:21 packets.go:58 unexpected EOF

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/schema/migrate.go:91
[0m[32m[info] [0mmigrate apply result: &{Env:{Driver:mariadb URL:maria://@localhost:55029/trap_collection?parseTime=true Dir:file://migrations} Pending:[{Name:20250327121655.sql Version:20250327121655 Description: Content:} {Name:20250505054607_organize_indices.sql Version:20250505054607 Description:organize_indices Content:} {Name:20250711133437_add_game_play_logs.sql Version:20250711133437 Description:add_game_play_logs Content:}] Applied:[0xc00016c420 0xc00016c4d0 0xc00016c580] Current: Target:20250711133437 Start:2025-10-31 23:00:23.850339 +0900 JST End:2025-10-31 23:00:24.080561 +0900 JST Error:}

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_metrics.go:153
[0m[33m[1.459ms] [34;1m[rows:0][0m SELECT deleted_at IS NOT NULL OR expires_at < '2025-10-31 23:00:24.088' AS is_deleted, count(*) as count FROM `access_tokens` GROUP BY `is_deleted`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_metrics.go:187
[0m[33m[12.172ms] [34;1m[rows:0][0m SELECT deleted_at IS NOT NULL AS is_deleted, count(*) as count FROM `games` GROUP BY `is_deleted`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_metrics.go:250
[0m[33m[0.460ms] [34;1m[rows:0][0m SELECT game_image_types.name AS type, count(*) as count FROM `v2_game_images` JOIN game_image_types ON v2_game_images.image_type_id = game_image_types.id AND game_image_types.active GROUP BY `type`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_metrics.go:278
[0m[33m[0.364ms] [34;1m[rows:0][0m SELECT game_video_types.name AS type, count(*) as count FROM `v2_game_videos` JOIN game_video_types ON v2_game_videos.video_type_id = game_video_types.id AND game_video_types.active GROUP BY `type`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_metrics.go:222
[0m[33m[0.385ms] [34;1m[rows:0][0m SELECT game_file_types.name AS type, count(*) as count FROM `v2_game_files` JOIN game_file_types ON v2_game_files.file_type_id = game_file_types.id AND game_file_types.active GROUP BY `type`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_metrics.go:306
[0m[33m[0.438ms] [34;1m[rows:0][0m SELECT seat_statuses.name AS type, count(*) as count FROM `seats` JOIN seat_statuses ON seats.status_id = seat_statuses.id AND seat_statuses.active GROUP BY `type`
=== RUN   TestSaveEdition
=== PAUSE TestSaveEdition
=== RUN   TestUpdateEdition
=== RUN   TestUpdateEdition/特に問題ないのでエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:392
[0m[33m[1.484ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`questionnaire_url`,`created_at`) VALUES ('4a180271-6a1c-4d80-913f-60f342ec91af','test1','https://example.com','2025-10-31 23:00:24.104') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:94
[0m[33m[1.089ms] [34;1m[rows:1][0m UPDATE `editions` SET `name`='test2',`questionnaire_url`='https://example2.com' WHERE id = '4a180271-6a1c-4d80-913f-60f342ec91af' AND `editions`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:417
[0m[33m[0.298ms] [34;1m[rows:1][0m SELECT * FROM `editions` WHERE `editions`.`deleted_at` IS NULL ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:381
[0m[33m[0.695ms] [34;1m[rows:1][0m DELETE FROM `editions`
=== RUN   TestUpdateEdition/別のエディションが存在してもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:392
[0m[33m[0.942ms] [34;1m[rows:2][0m INSERT INTO `editions` (`id`,`name`,`questionnaire_url`,`created_at`) VALUES ('4a180271-6a1c-4d80-913f-60f342ec91af','test1','https://example.com','2025-10-31 23:00:24.104'),('a10e5285-7b35-407d-86f4-d2f7100c179f','test2','https://example.com','2025-10-31 22:00:24.104') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:94
[0m[33m[0.834ms] [34;1m[rows:1][0m UPDATE `editions` SET `name`='test3',`questionnaire_url`='https://example2.com' WHERE id = '4a180271-6a1c-4d80-913f-60f342ec91af' AND `editions`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:417
[0m[33m[0.290ms] [34;1m[rows:2][0m SELECT * FROM `editions` WHERE `editions`.`deleted_at` IS NULL ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:381
[0m[33m[0.643ms] [34;1m[rows:2][0m DELETE FROM `editions`
=== RUN   TestUpdateEdition/アンケートURLが存在しなくなってもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:392
[0m[33m[0.869ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`questionnaire_url`,`created_at`) VALUES ('4a180271-6a1c-4d80-913f-60f342ec91af','test1','https://example.com','2025-10-31 23:00:24.104') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:94
[0m[33m[0.789ms] [34;1m[rows:1][0m UPDATE `editions` SET `name`='test2',`questionnaire_url`=NULL WHERE id = '4a180271-6a1c-4d80-913f-60f342ec91af' AND `editions`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:417
[0m[33m[0.293ms] [34;1m[rows:1][0m SELECT * FROM `editions` WHERE `editions`.`deleted_at` IS NULL ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:381
[0m[33m[0.633ms] [34;1m[rows:1][0m DELETE FROM `editions`
=== RUN   TestUpdateEdition/アンケートURLが存在するようになってもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:392
[0m[33m[0.958ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`created_at`) VALUES ('4a180271-6a1c-4d80-913f-60f342ec91af','test1','2025-10-31 23:00:24.104') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:94
[0m[33m[0.751ms] [34;1m[rows:1][0m UPDATE `editions` SET `name`='test2',`questionnaire_url`='https://example.com' WHERE id = '4a180271-6a1c-4d80-913f-60f342ec91af' AND `editions`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:417
[0m[33m[0.280ms] [34;1m[rows:1][0m SELECT * FROM `editions` WHERE `editions`.`deleted_at` IS NULL ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:381
[0m[33m[0.615ms] [34;1m[rows:1][0m DELETE FROM `editions`
=== RUN   TestUpdateEdition/アンケートURLが変わってもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:392
[0m[33m[0.808ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`questionnaire_url`,`created_at`) VALUES ('4a180271-6a1c-4d80-913f-60f342ec91af','test1','https://example.com','2025-10-31 23:00:24.104') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:94
[0m[33m[0.857ms] [34;1m[rows:1][0m UPDATE `editions` SET `name`='test2',`questionnaire_url`='https://example2.com' WHERE id = '4a180271-6a1c-4d80-913f-60f342ec91af' AND `editions`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:417
[0m[33m[0.244ms] [34;1m[rows:1][0m SELECT * FROM `editions` WHERE `editions`.`deleted_at` IS NULL ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:381
[0m[33m[0.719ms] [34;1m[rows:1][0m DELETE FROM `editions`
=== RUN   TestUpdateEdition/エディションが無いのでErrNoRecordUpdated

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:94
[0m[33m[0.681ms] [34;1m[rows:0][0m UPDATE `editions` SET `name`='test2',`questionnaire_url`='https://example.com' WHERE id = '4a180271-6a1c-4d80-913f-60f342ec91af' AND `editions`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:381
[0m[33m[0.450ms] [34;1m[rows:0][0m DELETE FROM `editions`
--- PASS: TestUpdateEdition (0.02s)
    --- PASS: TestUpdateEdition/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestUpdateEdition/別のエディションが存在してもエラーなし (0.00s)
    --- PASS: TestUpdateEdition/アンケートURLが存在しなくなってもエラーなし (0.00s)
    --- PASS: TestUpdateEdition/アンケートURLが存在するようになってもエラーなし (0.00s)
    --- PASS: TestUpdateEdition/アンケートURLが変わってもエラーなし (0.00s)
    --- PASS: TestUpdateEdition/エディションが無いのでErrNoRecordUpdated (0.00s)
=== RUN   TestDeleteEdition
=== RUN   TestDeleteEdition/特に問題ないのでエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:542
[0m[33m[0.883ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`questionnaire_url`,`created_at`) VALUES ('3745690a-3708-48c4-b14d-49393db2c57a','test1',NULL,'2025-10-31 22:00:24.121') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:117
[0m[33m[0.795ms] [34;1m[rows:1][0m UPDATE `editions` SET `deleted_at`='2025-10-31 23:00:24.123' WHERE id = '3745690a-3708-48c4-b14d-49393db2c57a' AND `editions`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:567
[0m[33m[0.230ms] [34;1m[rows:0][0m SELECT * FROM `editions` WHERE `editions`.`deleted_at` IS NULL ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:531
[0m[33m[0.558ms] [34;1m[rows:1][0m DELETE FROM `editions`
=== RUN   TestDeleteEdition/他のゲームがあっても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:542
[0m[33m[0.884ms] [34;1m[rows:2][0m INSERT INTO `editions` (`id`,`name`,`questionnaire_url`,`created_at`) VALUES ('3745690a-3708-48c4-b14d-49393db2c57a','test1',NULL,'2025-10-31 22:00:24.121'),('17496c0c-2143-4aad-8ea3-8c97157b3746','test2','https://example2.com','2025-10-31 21:00:24.121') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:117
[0m[33m[0.788ms] [34;1m[rows:1][0m UPDATE `editions` SET `deleted_at`='2025-10-31 23:00:24.126' WHERE id = '3745690a-3708-48c4-b14d-49393db2c57a' AND `editions`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:567
[0m[33m[0.251ms] [34;1m[rows:1][0m SELECT * FROM `editions` WHERE `editions`.`deleted_at` IS NULL ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:531
[0m[33m[0.567ms] [34;1m[rows:2][0m DELETE FROM `editions`
=== RUN   TestDeleteEdition/エディションが存在しないのでErrNoRecordDeleted

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:542
[0m[33m[1.240ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`questionnaire_url`,`created_at`) VALUES ('17496c0c-2143-4aad-8ea3-8c97157b3746','test1',NULL,'2025-10-31 22:00:24.121') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:117
[0m[33m[0.683ms] [34;1m[rows:0][0m UPDATE `editions` SET `deleted_at`='2025-10-31 23:00:24.129' WHERE id = '3745690a-3708-48c4-b14d-49393db2c57a' AND `editions`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:531
[0m[33m[0.761ms] [34;1m[rows:1][0m DELETE FROM `editions`
--- PASS: TestDeleteEdition (0.01s)
    --- PASS: TestDeleteEdition/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestDeleteEdition/他のゲームがあっても問題なし (0.00s)
    --- PASS: TestDeleteEdition/エディションが存在しないのでErrNoRecordDeleted (0.00s)
=== RUN   TestUpdateEditionGameVersions

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:641
[0m[33m[1.037ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`,`latest_version_updated_at`) VALUES ('ab09c6c8-6584-4479-b08c-1b247afcf5fb','test game','test description',1,'2025-10-31 23:00:24.13','2025-10-31 23:00:24.13') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:643
[0m[33m[0.789ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('c852b32b-b0a6-410d-b38a-16a7b2461170','ab09c6c8-6584-4479-b08c-1b247afcf5fb',1,'2025-10-31 23:00:24.13') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:645
[0m[33m[0.875ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('555283e5-1e06-49d5-b2d0-64fc25f88b1b','ab09c6c8-6584-4479-b08c-1b247afcf5fb',1,'2025-10-31 23:00:24.13') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:647
[0m[33m[1.289ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('164a2ac5-bb82-4610-b044-5bfc4eb713ae','ab09c6c8-6584-4479-b08c-1b247afcf5fb','c852b32b-b0a6-410d-b38a-16a7b2461170','555283e5-1e06-49d5-b2d0-64fc25f88b1b','v1.0.0','test description','2025-10-31 23:00:24.13') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:649
[0m[33m[0.833ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('938c31b1-db9a-44ba-923a-e3dffef9d71d','ab09c6c8-6584-4479-b08c-1b247afcf5fb','c852b32b-b0a6-410d-b38a-16a7b2461170','555283e5-1e06-49d5-b2d0-64fc25f88b1b','v2.0.0','test description','2025-10-31 23:00:24.13') RETURNING `url`,`created_at`
=== RUN   TestUpdateEditionGameVersions/特に問題ないのでエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:808
[0m[33m[0.528ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('164a2ac5-bb82-4610-b044-5bfc4eb713ae','ab09c6c8-6584-4479-b08c-1b247afcf5fb','c852b32b-b0a6-410d-b38a-16a7b2461170','555283e5-1e06-49d5-b2d0-64fc25f88b1b','v1.0.0','test description','2025-10-31 23:00:24') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:808
[0m[33m[1.365ms] [34;1m[rows:1][0m INSERT INTO `edition_game_version_relations` (`edition_id`,`game_version_id`) VALUES ('3553f757-da1e-4ee2-a715-3e5883c9dec1','164a2ac5-bb82-4610-b044-5bfc4eb713ae') ON DUPLICATE KEY UPDATE `edition_id`=`edition_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:808
[0m[33m[2.836ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`created_at`) VALUES ('3553f757-da1e-4ee2-a715-3e5883c9dec1','test1','2025-10-31 23:00:24.135') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:239
[0m[33m[0.473ms] [34;1m[rows:2][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`) VALUES ('164a2ac5-bb82-4610-b044-5bfc4eb713ae','00000000-0000-0000-0000-000000000000','00000000-0000-0000-0000-000000000000','00000000-0000-0000-0000-000000000000','',''),('938c31b1-db9a-44ba-923a-e3dffef9d71d','00000000-0000-0000-0000-000000000000','00000000-0000-0000-0000-000000000000','00000000-0000-0000-0000-000000000000','','') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:239
[0m[33m[0.370ms] [34;1m[rows:1][0m INSERT INTO `edition_game_version_relations` (`edition_id`,`game_version_id`) VALUES ('3553f757-da1e-4ee2-a715-3e5883c9dec1','164a2ac5-bb82-4610-b044-5bfc4eb713ae'),('3553f757-da1e-4ee2-a715-3e5883c9dec1','938c31b1-db9a-44ba-923a-e3dffef9d71d') ON DUPLICATE KEY UPDATE `edition_id`=`edition_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:239
[0m[33m[0.651ms] [34;1m[rows:0][0m DELETE FROM `edition_game_version_relations` WHERE `edition_game_version_relations`.`edition_id` = '3553f757-da1e-4ee2-a715-3e5883c9dec1' AND `edition_game_version_relations`.`game_version_id` NOT IN ('164a2ac5-bb82-4610-b044-5bfc4eb713ae','938c31b1-db9a-44ba-923a-e3dffef9d71d')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:831
[0m[33m[0.436ms] [34;1m[rows:2][0m SELECT * FROM `edition_game_version_relations` WHERE `edition_game_version_relations`.`edition_id` = '3553f757-da1e-4ee2-a715-3e5883c9dec1'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:831
[0m[33m[0.496ms] [34;1m[rows:2][0m SELECT * FROM `v2_game_versions` WHERE `v2_game_versions`.`id` IN ('164a2ac5-bb82-4610-b044-5bfc4eb713ae','938c31b1-db9a-44ba-923a-e3dffef9d71d')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:831
[0m[33m[1.324ms] [34;1m[rows:1][0m SELECT * FROM `editions` WHERE `editions`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:793
[0m[33m[0.254ms] [34;1m[rows:1][0m SELECT * FROM `editions` WHERE `editions`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:797
[0m[33m[1.109ms] [34;1m[rows:2][0m DELETE FROM `edition_game_version_relations` WHERE `edition_game_version_relations`.`edition_id` = '3553f757-da1e-4ee2-a715-3e5883c9dec1'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:801
[0m[33m[0.643ms] [34;1m[rows:1][0m DELETE FROM `editions`
=== RUN   TestUpdateEditionGameVersions/空配列で全ての関連をクリア

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:808
[0m[33m[0.441ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('164a2ac5-bb82-4610-b044-5bfc4eb713ae','ab09c6c8-6584-4479-b08c-1b247afcf5fb','c852b32b-b0a6-410d-b38a-16a7b2461170','555283e5-1e06-49d5-b2d0-64fc25f88b1b','v1.0.0','test description','2025-10-31 23:00:24') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:808
[0m[33m[0.386ms] [34;1m[rows:1][0m INSERT INTO `edition_game_version_relations` (`edition_id`,`game_version_id`) VALUES ('3553f757-da1e-4ee2-a715-3e5883c9dec1','164a2ac5-bb82-4610-b044-5bfc4eb713ae') ON DUPLICATE KEY UPDATE `edition_id`=`edition_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:808
[0m[33m[1.841ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`created_at`) VALUES ('3553f757-da1e-4ee2-a715-3e5883c9dec1','test1','2025-10-31 23:00:24.135') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:239
[0m[33m[0.747ms] [34;1m[rows:1][0m DELETE FROM `edition_game_version_relations` WHERE `edition_game_version_relations`.`edition_id` = '3553f757-da1e-4ee2-a715-3e5883c9dec1'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:831
[0m[33m[0.401ms] [34;1m[rows:0][0m SELECT * FROM `edition_game_version_relations` WHERE `edition_game_version_relations`.`edition_id` = '3553f757-da1e-4ee2-a715-3e5883c9dec1'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:831
[0m[33m[0.727ms] [34;1m[rows:1][0m SELECT * FROM `editions` WHERE `editions`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:793
[0m[33m[0.246ms] [34;1m[rows:1][0m SELECT * FROM `editions` WHERE `editions`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:797
[0m[33m[0.671ms] [34;1m[rows:0][0m DELETE FROM `edition_game_version_relations` WHERE `edition_game_version_relations`.`edition_id` = '3553f757-da1e-4ee2-a715-3e5883c9dec1'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:801
[0m[33m[0.573ms] [34;1m[rows:1][0m DELETE FROM `editions`
=== RUN   TestUpdateEditionGameVersions/存在しないエディションIDでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:808
[0m[33m[0.455ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('164a2ac5-bb82-4610-b044-5bfc4eb713ae','ab09c6c8-6584-4479-b08c-1b247afcf5fb','c852b32b-b0a6-410d-b38a-16a7b2461170','555283e5-1e06-49d5-b2d0-64fc25f88b1b','v1.0.0','test description','2025-10-31 23:00:24') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:808
[0m[33m[0.359ms] [34;1m[rows:1][0m INSERT INTO `edition_game_version_relations` (`edition_id`,`game_version_id`) VALUES ('3553f757-da1e-4ee2-a715-3e5883c9dec1','164a2ac5-bb82-4610-b044-5bfc4eb713ae') ON DUPLICATE KEY UPDATE `edition_id`=`edition_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:808
[0m[33m[1.782ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`created_at`) VALUES ('3553f757-da1e-4ee2-a715-3e5883c9dec1','dummy edition','2025-10-31 23:00:24.135') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:239
[0m[33m[0.404ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`) VALUES ('164a2ac5-bb82-4610-b044-5bfc4eb713ae','00000000-0000-0000-0000-000000000000','00000000-0000-0000-0000-000000000000','00000000-0000-0000-0000-000000000000','','') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `url`,`created_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:239 [35;1mError 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`trap_collection`.`edition_game_version_relations`, CONSTRAINT `fk_edition_game_version_relations_edition_table` FOREIGN KEY (`edition_id`) REFERENCES `editions` (`id`))
[0m[33m[0.409ms] [34;1m[rows:0][0m INSERT INTO `edition_game_version_relations` (`edition_id`,`game_version_id`) VALUES ('c62c02f6-c20f-43a1-a722-ede13c1ea76d','164a2ac5-bb82-4610-b044-5bfc4eb713ae') ON DUPLICATE KEY UPDATE `edition_id`=`edition_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:793
[0m[33m[0.238ms] [34;1m[rows:1][0m SELECT * FROM `editions` WHERE `editions`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:797
[0m[33m[0.766ms] [34;1m[rows:1][0m DELETE FROM `edition_game_version_relations` WHERE `edition_game_version_relations`.`edition_id` = '3553f757-da1e-4ee2-a715-3e5883c9dec1'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:801
[0m[33m[0.540ms] [34;1m[rows:1][0m DELETE FROM `editions`
=== RUN   TestUpdateEditionGameVersions/editionが複数あっても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:808
[0m[33m[0.456ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('164a2ac5-bb82-4610-b044-5bfc4eb713ae','ab09c6c8-6584-4479-b08c-1b247afcf5fb','c852b32b-b0a6-410d-b38a-16a7b2461170','555283e5-1e06-49d5-b2d0-64fc25f88b1b','v1.0.0','test description','2025-10-31 23:00:24') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:808
[0m[33m[0.361ms] [34;1m[rows:2][0m INSERT INTO `edition_game_version_relations` (`edition_id`,`game_version_id`) VALUES ('3553f757-da1e-4ee2-a715-3e5883c9dec1','164a2ac5-bb82-4610-b044-5bfc4eb713ae'),('fb144cdd-3fcc-4e75-b320-bf7ef6ef114c','164a2ac5-bb82-4610-b044-5bfc4eb713ae') ON DUPLICATE KEY UPDATE `edition_id`=`edition_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:808
[0m[33m[1.833ms] [34;1m[rows:2][0m INSERT INTO `editions` (`id`,`name`,`created_at`) VALUES ('3553f757-da1e-4ee2-a715-3e5883c9dec1','test1','2025-10-31 23:00:24.135'),('fb144cdd-3fcc-4e75-b320-bf7ef6ef114c','test2','2025-10-31 23:00:24.135') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:239
[0m[33m[0.475ms] [34;1m[rows:2][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`) VALUES ('164a2ac5-bb82-4610-b044-5bfc4eb713ae','00000000-0000-0000-0000-000000000000','00000000-0000-0000-0000-000000000000','00000000-0000-0000-0000-000000000000','',''),('938c31b1-db9a-44ba-923a-e3dffef9d71d','00000000-0000-0000-0000-000000000000','00000000-0000-0000-0000-000000000000','00000000-0000-0000-0000-000000000000','','') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:239
[0m[33m[0.364ms] [34;1m[rows:1][0m INSERT INTO `edition_game_version_relations` (`edition_id`,`game_version_id`) VALUES ('3553f757-da1e-4ee2-a715-3e5883c9dec1','164a2ac5-bb82-4610-b044-5bfc4eb713ae'),('3553f757-da1e-4ee2-a715-3e5883c9dec1','938c31b1-db9a-44ba-923a-e3dffef9d71d') ON DUPLICATE KEY UPDATE `edition_id`=`edition_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:239
[0m[33m[0.746ms] [34;1m[rows:0][0m DELETE FROM `edition_game_version_relations` WHERE `edition_game_version_relations`.`edition_id` = '3553f757-da1e-4ee2-a715-3e5883c9dec1' AND `edition_game_version_relations`.`game_version_id` NOT IN ('164a2ac5-bb82-4610-b044-5bfc4eb713ae','938c31b1-db9a-44ba-923a-e3dffef9d71d')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:831
[0m[33m[0.411ms] [34;1m[rows:3][0m SELECT * FROM `edition_game_version_relations` WHERE `edition_game_version_relations`.`edition_id` IN ('3553f757-da1e-4ee2-a715-3e5883c9dec1','fb144cdd-3fcc-4e75-b320-bf7ef6ef114c')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:831
[0m[33m[0.440ms] [34;1m[rows:2][0m SELECT * FROM `v2_game_versions` WHERE `v2_game_versions`.`id` IN ('164a2ac5-bb82-4610-b044-5bfc4eb713ae','938c31b1-db9a-44ba-923a-e3dffef9d71d')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:831
[0m[33m[1.248ms] [34;1m[rows:2][0m SELECT * FROM `editions` WHERE `editions`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:793
[0m[33m[0.252ms] [34;1m[rows:2][0m SELECT * FROM `editions` WHERE `editions`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:797
[0m[33m[0.763ms] [34;1m[rows:2][0m DELETE FROM `edition_game_version_relations` WHERE `edition_game_version_relations`.`edition_id` = '3553f757-da1e-4ee2-a715-3e5883c9dec1'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:797
[0m[33m[0.776ms] [34;1m[rows:1][0m DELETE FROM `edition_game_version_relations` WHERE `edition_game_version_relations`.`edition_id` = 'fb144cdd-3fcc-4e75-b320-bf7ef6ef114c'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:801
[0m[33m[0.585ms] [34;1m[rows:2][0m DELETE FROM `editions`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:655
[0m[33m[0.585ms] [34;1m[rows:2][0m DELETE FROM `v2_game_versions`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:657
[0m[33m[0.553ms] [34;1m[rows:1][0m DELETE FROM `v2_game_images`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:659
[0m[33m[0.545ms] [34;1m[rows:1][0m DELETE FROM `v2_game_videos`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:661
[0m[33m[0.595ms] [34;1m[rows:1][0m DELETE FROM `games`
--- PASS: TestUpdateEditionGameVersions (0.04s)
    --- PASS: TestUpdateEditionGameVersions/特に問題ないのでエラー無し (0.01s)
    --- PASS: TestUpdateEditionGameVersions/空配列で全ての関連をクリア (0.01s)
    --- PASS: TestUpdateEditionGameVersions/存在しないエディションIDでエラー (0.01s)
    --- PASS: TestUpdateEditionGameVersions/editionが複数あっても問題なし (0.01s)
=== RUN   TestRemoveGameGenre

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:44
[0m[33m[0.422ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestRemoveGameGenre/特に問題ないのでエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:196
[0m[33m[0.907ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('1d372560-1522-4e12-8c82-bd5100e2b315','test','2025-10-31 22:00:24.166') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:66
[0m[33m[0.954ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '1d372560-1522-4e12-8c82-bd5100e2b315'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:66
[0m[33m[1.768ms] [34;1m[rows:1][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` = '1d372560-1522-4e12-8c82-bd5100e2b315'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:217
[0m[33m[0.212ms] [34;1m[rows:0][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:173
[0m[33m[0.165ms] [34;1m[rows:0][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:180
[0m[33m[0.181ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` IN (NULL)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:180
[0m[33m[0.644ms] [34;1m[rows:0][0m DELETE FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:185
[0m[33m[0.614ms] [34;1m[rows:0][0m UPDATE `games` SET `deleted_at`='2025-10-31 23:00:24.17' WHERE `games`.`deleted_at` IS NULL
=== RUN   TestRemoveGameGenre/該当するジャンルが存在しないのでErrNoRecordDeleted

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:196
[0m[33m[0.789ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('18d90cf0-678b-41e1-a6fe-69c83ba25790','test','2025-10-31 22:00:24.166') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:66
[0m[33m[0.343ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = 'd288a314-8b41-49b6-be72-f5ec709062dd'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:66
[0m[33m[1.027ms] [34;1m[rows:0][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` = 'd288a314-8b41-49b6-be72-f5ec709062dd'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:217
[0m[33m[0.344ms] [34;1m[rows:0][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '18d90cf0-678b-41e1-a6fe-69c83ba25790'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:217
[0m[33m[0.635ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:173
[0m[33m[0.193ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:180
[0m[33m[0.323ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '18d90cf0-678b-41e1-a6fe-69c83ba25790'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:180
[0m[33m[1.099ms] [34;1m[rows:1][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` = '18d90cf0-678b-41e1-a6fe-69c83ba25790'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:185
[0m[33m[0.629ms] [34;1m[rows:0][0m UPDATE `games` SET `deleted_at`='2025-10-31 23:00:24.175' WHERE `games`.`deleted_at` IS NULL
=== RUN   TestRemoveGameGenre/ジャンルが複数あっても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:196
[0m[33m[0.791ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('c5d3814f-1ab3-40a2-b198-34ae1592ef06','test1','2025-10-31 22:00:24.166'),('0083cd50-0e76-4019-b284-3c7f45d4c03c','test2','2025-10-31 21:00:24.166') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:66
[0m[33m[0.307ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = 'c5d3814f-1ab3-40a2-b198-34ae1592ef06'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:66
[0m[33m[1.097ms] [34;1m[rows:1][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` = 'c5d3814f-1ab3-40a2-b198-34ae1592ef06'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:217
[0m[33m[0.555ms] [34;1m[rows:0][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '0083cd50-0e76-4019-b284-3c7f45d4c03c'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:217
[0m[33m[0.956ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:173
[0m[33m[0.202ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:180
[0m[33m[0.303ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '0083cd50-0e76-4019-b284-3c7f45d4c03c'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:180
[0m[33m[1.074ms] [34;1m[rows:1][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` = '0083cd50-0e76-4019-b284-3c7f45d4c03c'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:185
[0m[33m[0.641ms] [34;1m[rows:0][0m UPDATE `games` SET `deleted_at`='2025-10-31 23:00:24.18' WHERE `games`.`deleted_at` IS NULL
=== RUN   TestRemoveGameGenre/ゲームが紐づいていてもエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:196
[0m[33m[0.495ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('9390e77e-c3d0-4116-96fb-650cbbc3ae1c','test','test',1,'2025-10-31 22:00:24.166') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:196
[0m[33m[0.379ms] [34;1m[rows:2][0m INSERT INTO `game_genre_relations` (`genre_id`,`game_id`) VALUES ('2925b372-6f06-4ec8-9402-264c09843622','9390e77e-c3d0-4116-96fb-650cbbc3ae1c'),('20e3e68f-90aa-4398-b24f-41e573c23f88','9390e77e-c3d0-4116-96fb-650cbbc3ae1c') ON DUPLICATE KEY UPDATE `genre_id`=`genre_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:196
[0m[33m[1.826ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('2925b372-6f06-4ec8-9402-264c09843622','test','2025-10-31 22:00:24.166'),('20e3e68f-90aa-4398-b24f-41e573c23f88','test2','2025-10-31 21:00:24.166') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:66
[0m[33m[0.328ms] [34;1m[rows:1][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '2925b372-6f06-4ec8-9402-264c09843622'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:66
[0m[33m[1.076ms] [34;1m[rows:1][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` = '2925b372-6f06-4ec8-9402-264c09843622'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:217
[0m[33m[0.366ms] [34;1m[rows:1][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '20e3e68f-90aa-4398-b24f-41e573c23f88'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:217
[0m[33m[0.396ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`id` = '9390e77e-c3d0-4116-96fb-650cbbc3ae1c' AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:217
[0m[33m[1.097ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:173
[0m[33m[0.201ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:180
[0m[33m[0.331ms] [34;1m[rows:1][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '20e3e68f-90aa-4398-b24f-41e573c23f88'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:180
[0m[33m[1.088ms] [34;1m[rows:1][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` = '20e3e68f-90aa-4398-b24f-41e573c23f88'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:185
[0m[33m[0.740ms] [34;1m[rows:1][0m UPDATE `games` SET `deleted_at`='2025-10-31 23:00:24.186' WHERE `games`.`deleted_at` IS NULL
--- PASS: TestRemoveGameGenre (0.02s)
    --- PASS: TestRemoveGameGenre/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestRemoveGameGenre/該当するジャンルが存在しないのでErrNoRecordDeleted (0.00s)
    --- PASS: TestRemoveGameGenre/ジャンルが複数あっても問題なし (0.00s)
    --- PASS: TestRemoveGameGenre/ゲームが紐づいていてもエラー無し (0.01s)
=== RUN   TestGetGameGenresWithNames
=== RUN   TestGetGameGenresWithNames/特に問題ないのでエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:345
[0m[33m[0.814ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('22490371-afc1-49a3-bebe-15b158c97de5','ジャンル','2025-10-31 22:00:24.186') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:88
[0m[33m[0.371ms] [34;1m[rows:1][0m SELECT * FROM `game_genres` WHERE name IN ('ジャンル')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.203ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.298ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '22490371-afc1-49a3-bebe-15b158c97de5'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[1.075ms] [34;1m[rows:1][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` = '22490371-afc1-49a3-bebe-15b158c97de5'
=== RUN   TestGetGameGenresWithNames/ジャンルが複数でも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:345
[0m[33m[0.803ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('22490371-afc1-49a3-bebe-15b158c97de5','ジャンル1','2025-10-31 22:00:24.186'),('26fb77f0-fce7-4e29-b588-ca57580f51e6','ジャンル2','2025-10-31 21:00:24.186') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:88
[0m[33m[0.360ms] [34;1m[rows:2][0m SELECT * FROM `game_genres` WHERE name IN ('ジャンル1','ジャンル2')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.197ms] [34;1m[rows:2][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.333ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` IN ('22490371-afc1-49a3-bebe-15b158c97de5','26fb77f0-fce7-4e29-b588-ca57580f51e6')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[1.148ms] [34;1m[rows:2][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` IN ('22490371-afc1-49a3-bebe-15b158c97de5','26fb77f0-fce7-4e29-b588-ca57580f51e6')
=== RUN   TestGetGameGenresWithNames/関係ないジャンルがDBに合っても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:345
[0m[33m[0.803ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('22490371-afc1-49a3-bebe-15b158c97de5','ジャンル1','2025-10-31 22:00:24.186'),('26fb77f0-fce7-4e29-b588-ca57580f51e6','ジャンル2','2025-10-31 21:00:24.186') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:88
[0m[33m[0.351ms] [34;1m[rows:1][0m SELECT * FROM `game_genres` WHERE name IN ('ジャンル1')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.231ms] [34;1m[rows:2][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.298ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` IN ('22490371-afc1-49a3-bebe-15b158c97de5','26fb77f0-fce7-4e29-b588-ca57580f51e6')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[1.085ms] [34;1m[rows:2][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` IN ('22490371-afc1-49a3-bebe-15b158c97de5','26fb77f0-fce7-4e29-b588-ca57580f51e6')
=== RUN   TestGetGameGenresWithNames/該当するジャンルが存在しないのでErrRecordNotFound

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:345
[0m[33m[0.786ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('26fb77f0-fce7-4e29-b588-ca57580f51e6','ジャンル2','2025-10-31 21:00:24.186') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:88
[0m[33m[0.323ms] [34;1m[rows:0][0m SELECT * FROM `game_genres` WHERE name IN ('ジャンル1')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.188ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.298ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '26fb77f0-fce7-4e29-b588-ca57580f51e6'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[1.046ms] [34;1m[rows:1][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` = '26fb77f0-fce7-4e29-b588-ca57580f51e6'
--- PASS: TestGetGameGenresWithNames (0.01s)
    --- PASS: TestGetGameGenresWithNames/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestGetGameGenresWithNames/ジャンルが複数でも問題なし (0.00s)
    --- PASS: TestGetGameGenresWithNames/関係ないジャンルがDBに合っても問題なし (0.00s)
    --- PASS: TestGetGameGenresWithNames/該当するジャンルが存在しないのでErrRecordNotFound (0.00s)
=== RUN   TestSaveGameGenres
=== RUN   TestSaveGameGenres/他にジャンルがあってもエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:443
[0m[33m[0.766ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('d0ea044f-7053-4f66-91a3-5091b1eb0a39','ジャンル2','2025-10-31 22:00:24.197') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:122
[0m[33m[0.758ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('45d28392-d7c2-4a0b-a9f7-fb40f7d548b5','ジャンル1','2025-10-31 23:00:24.197') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:463
[0m[33m[0.239ms] [34;1m[rows:2][0m SELECT * FROM `game_genres` ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.204ms] [34;1m[rows:2][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.313ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` IN ('45d28392-d7c2-4a0b-a9f7-fb40f7d548b5','d0ea044f-7053-4f66-91a3-5091b1eb0a39')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[1.525ms] [34;1m[rows:2][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` IN ('45d28392-d7c2-4a0b-a9f7-fb40f7d548b5','d0ea044f-7053-4f66-91a3-5091b1eb0a39')
=== RUN   TestSaveGameGenres/複数ジャンルの作成でもエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:122
[0m[33m[0.801ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('45d28392-d7c2-4a0b-a9f7-fb40f7d548b5','ジャンル1','2025-10-31 23:00:24.197'),('d0ea044f-7053-4f66-91a3-5091b1eb0a39','ジャンル2','2025-10-31 23:00:23.197') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:463
[0m[33m[0.212ms] [34;1m[rows:2][0m SELECT * FROM `game_genres` ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.198ms] [34;1m[rows:2][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.301ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` IN ('45d28392-d7c2-4a0b-a9f7-fb40f7d548b5','d0ea044f-7053-4f66-91a3-5091b1eb0a39')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[1.074ms] [34;1m[rows:2][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` IN ('45d28392-d7c2-4a0b-a9f7-fb40f7d548b5','d0ea044f-7053-4f66-91a3-5091b1eb0a39')
=== RUN   TestSaveGameGenres/ジャンルが重複しているのでErrDuplicatedUniqueKey

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:443
[0m[33m[0.771ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('d0ea044f-7053-4f66-91a3-5091b1eb0a39','ジャンル1','2025-10-31 22:00:24.197') RETURNING `created_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:122 [35;1mError 1062 (23000): Duplicate entry 'ジャンル1' for key 'uni_game_genres_name'
[0m[33m[0.740ms] [34;1m[rows:0][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('45d28392-d7c2-4a0b-a9f7-fb40f7d548b5','ジャンル1','2025-10-31 23:00:24.197') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:463
[0m[33m[0.187ms] [34;1m[rows:1][0m SELECT * FROM `game_genres` ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.179ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.282ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = 'd0ea044f-7053-4f66-91a3-5091b1eb0a39'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[1.054ms] [34;1m[rows:1][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` = 'd0ea044f-7053-4f66-91a3-5091b1eb0a39'
=== RUN   TestSaveGameGenres/特に問題ないのでエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:122
[0m[33m[0.789ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('45d28392-d7c2-4a0b-a9f7-fb40f7d548b5','ジャンル1','2025-10-31 23:00:24.197') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:463
[0m[33m[0.211ms] [34;1m[rows:1][0m SELECT * FROM `game_genres` ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.210ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.304ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '45d28392-d7c2-4a0b-a9f7-fb40f7d548b5'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[1.044ms] [34;1m[rows:1][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` = '45d28392-d7c2-4a0b-a9f7-fb40f7d548b5'
--- PASS: TestSaveGameGenres (0.01s)
    --- PASS: TestSaveGameGenres/他にジャンルがあってもエラー無し (0.00s)
    --- PASS: TestSaveGameGenres/複数ジャンルの作成でもエラー無し (0.00s)
    --- PASS: TestSaveGameGenres/ジャンルが重複しているのでErrDuplicatedUniqueKey (0.00s)
    --- PASS: TestSaveGameGenres/特に問題ないのでエラー無し (0.00s)
=== RUN   TestRegisterGenresToGame
=== RUN   TestRegisterGenresToGame/ジャンルの追加でも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:685
[0m[33m[0.896ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('571498a1-6f38-47e5-839e-29600e3e433f','test','test',1,'2025-10-31 23:00:24.209') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:692
[0m[33m[0.437ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('571498a1-6f38-47e5-839e-29600e3e433f','test','test',1,'2025-10-31 23:00:24.209') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:692
[0m[33m[0.319ms] [34;1m[rows:1][0m INSERT INTO `game_genre_relations` (`genre_id`,`game_id`) VALUES ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','571498a1-6f38-47e5-839e-29600e3e433f') ON DUPLICATE KEY UPDATE `genre_id`=`genre_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:692
[0m[33m[1.633ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','ジャンル1','2025-10-31 23:00:24.209'),('e5974284-cbb2-49e8-bec5-122fb3f911d9','ジャンル2','2025-10-31 22:00:24.209') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:145
[0m[33m[0.373ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`id` = '571498a1-6f38-47e5-839e-29600e3e433f' AND `games`.`deleted_at` IS NULL ORDER BY `games`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:157
[0m[33m[0.344ms] [34;1m[rows:2][0m SELECT * FROM `game_genres` WHERE `id` IN ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','e5974284-cbb2-49e8-bec5-122fb3f911d9')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:166
[0m[33m[0.404ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','ジャンル1','2025-10-31 23:00:24'),('e5974284-cbb2-49e8-bec5-122fb3f911d9','ジャンル2','2025-10-31 22:00:24') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:166
[0m[33m[0.343ms] [34;1m[rows:1][0m INSERT INTO `game_genre_relations` (`game_id`,`genre_id`) VALUES ('571498a1-6f38-47e5-839e-29600e3e433f','48efe747-b5a8-4cc4-a427-da81d68ce2e7'),('571498a1-6f38-47e5-839e-29600e3e433f','e5974284-cbb2-49e8-bec5-122fb3f911d9') ON DUPLICATE KEY UPDATE `game_id`=`game_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:166
[0m[33m[0.617ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` = '571498a1-6f38-47e5-839e-29600e3e433f' AND `game_genre_relations`.`genre_id` NOT IN ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','e5974284-cbb2-49e8-bec5-122fb3f911d9')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:716
[0m[33m[0.383ms] [34;1m[rows:2][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` IN ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','e5974284-cbb2-49e8-bec5-122fb3f911d9')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:716
[0m[33m[0.371ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`id` = '571498a1-6f38-47e5-839e-29600e3e433f' AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:716
[0m[33m[1.260ms] [34;1m[rows:2][0m SELECT * FROM `game_genres` WHERE `game_genres`.`id` in ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','e5974284-cbb2-49e8-bec5-122fb3f911d9') ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.204ms] [34;1m[rows:2][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.343ms] [34;1m[rows:2][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` IN ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','e5974284-cbb2-49e8-bec5-122fb3f911d9')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[1.160ms] [34;1m[rows:2][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` IN ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','e5974284-cbb2-49e8-bec5-122fb3f911d9')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:678
[0m[33m[0.569ms] [34;1m[rows:2][0m DELETE FROM `games`
=== RUN   TestRegisterGenresToGame/存在しないゲームなのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:685
[0m[33m[0.822ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('571498a1-6f38-47e5-839e-29600e3e433f','test','test',1,'2025-10-31 23:00:24.209') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:692
[0m[33m[0.438ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`,`latest_version_updated_at`) VALUES ('571498a1-6f38-47e5-839e-29600e3e433f','test','test',1,'2025-10-31 23:00:24','2025-10-31 23:00:24') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:692
[0m[33m[0.319ms] [34;1m[rows:1][0m INSERT INTO `game_genre_relations` (`genre_id`,`game_id`) VALUES ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','571498a1-6f38-47e5-839e-29600e3e433f') ON DUPLICATE KEY UPDATE `genre_id`=`genre_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:692
[0m[33m[1.604ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','ジャンル1','2025-10-31 23:00:24.209') RETURNING `created_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:145 [35;1mrecord not found
[0m[33m[0.363ms] [34;1m[rows:0][0m SELECT * FROM `games` WHERE `games`.`id` = '3c346053-1767-4fa7-9443-69fda9280a46' AND `games`.`deleted_at` IS NULL ORDER BY `games`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:716
[0m[33m[0.346ms] [34;1m[rows:1][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '48efe747-b5a8-4cc4-a427-da81d68ce2e7'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:716
[0m[33m[0.361ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`id` = '571498a1-6f38-47e5-839e-29600e3e433f' AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:716
[0m[33m[1.185ms] [34;1m[rows:1][0m SELECT * FROM `game_genres` WHERE `game_genres`.`id` in ('48efe747-b5a8-4cc4-a427-da81d68ce2e7') ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.162ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.248ms] [34;1m[rows:1][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '48efe747-b5a8-4cc4-a427-da81d68ce2e7'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.928ms] [34;1m[rows:1][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` = '48efe747-b5a8-4cc4-a427-da81d68ce2e7'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:678
[0m[33m[0.480ms] [34;1m[rows:1][0m DELETE FROM `games`
=== RUN   TestRegisterGenresToGame/存在しないジャンルなのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:685
[0m[33m[0.711ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('571498a1-6f38-47e5-839e-29600e3e433f','test','test',1,'2025-10-31 23:00:24.209') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:692
[0m[33m[0.359ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`,`latest_version_updated_at`) VALUES ('571498a1-6f38-47e5-839e-29600e3e433f','test','test',1,'2025-10-31 23:00:24','2025-10-31 23:00:24') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:692
[0m[33m[0.256ms] [34;1m[rows:1][0m INSERT INTO `game_genre_relations` (`genre_id`,`game_id`) VALUES ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','571498a1-6f38-47e5-839e-29600e3e433f') ON DUPLICATE KEY UPDATE `genre_id`=`genre_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:692
[0m[33m[1.367ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','ジャンル1','2025-10-31 23:00:24.209') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:145
[0m[33m[0.337ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`id` = '571498a1-6f38-47e5-839e-29600e3e433f' AND `games`.`deleted_at` IS NULL ORDER BY `games`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:157
[0m[33m[0.243ms] [34;1m[rows:0][0m SELECT * FROM `game_genres` WHERE `id` IN ('e999c60d-ee9f-4422-a5da-913edc56c403')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:716
[0m[33m[0.304ms] [34;1m[rows:1][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '48efe747-b5a8-4cc4-a427-da81d68ce2e7'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:716
[0m[33m[0.662ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`id` = '571498a1-6f38-47e5-839e-29600e3e433f' AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:716
[0m[33m[1.392ms] [34;1m[rows:1][0m SELECT * FROM `game_genres` WHERE `game_genres`.`id` in ('48efe747-b5a8-4cc4-a427-da81d68ce2e7') ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.160ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.272ms] [34;1m[rows:1][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '48efe747-b5a8-4cc4-a427-da81d68ce2e7'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.956ms] [34;1m[rows:1][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` = '48efe747-b5a8-4cc4-a427-da81d68ce2e7'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:678
[0m[33m[0.462ms] [34;1m[rows:1][0m DELETE FROM `games`
=== RUN   TestRegisterGenresToGame/ジャンルが空でもエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:685
[0m[33m[0.696ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('571498a1-6f38-47e5-839e-29600e3e433f','test','test',1,'2025-10-31 23:00:24.209') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:692
[0m[33m[0.382ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`,`latest_version_updated_at`) VALUES ('571498a1-6f38-47e5-839e-29600e3e433f','test','test',1,'2025-10-31 23:00:24','2025-10-31 23:00:24') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:692
[0m[33m[0.295ms] [34;1m[rows:1][0m INSERT INTO `game_genre_relations` (`genre_id`,`game_id`) VALUES ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','571498a1-6f38-47e5-839e-29600e3e433f') ON DUPLICATE KEY UPDATE `genre_id`=`genre_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:692
[0m[33m[1.436ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','ジャンル1','2025-10-31 23:00:24.209') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:145
[0m[33m[0.329ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`id` = '571498a1-6f38-47e5-839e-29600e3e433f' AND `games`.`deleted_at` IS NULL ORDER BY `games`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:157
[0m[33m[0.144ms] [34;1m[rows:0][0m SELECT * FROM `game_genres` WHERE `id` IN (NULL)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:166
[0m[33m[0.766ms] [34;1m[rows:1][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` = '571498a1-6f38-47e5-839e-29600e3e433f'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:716
[0m[33m[0.269ms] [34;1m[rows:0][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '48efe747-b5a8-4cc4-a427-da81d68ce2e7'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:716
[0m[33m[0.654ms] [34;1m[rows:1][0m SELECT * FROM `game_genres` WHERE `game_genres`.`id` in ('48efe747-b5a8-4cc4-a427-da81d68ce2e7') ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.169ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.256ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '48efe747-b5a8-4cc4-a427-da81d68ce2e7'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.920ms] [34;1m[rows:1][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` = '48efe747-b5a8-4cc4-a427-da81d68ce2e7'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:678
[0m[33m[0.464ms] [34;1m[rows:1][0m DELETE FROM `games`
=== RUN   TestRegisterGenresToGame/特に問題ないのでエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:685
[0m[33m[0.699ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('571498a1-6f38-47e5-839e-29600e3e433f','test','test',1,'2025-10-31 23:00:24.209') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:692
[0m[33m[0.632ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','ジャンル1','2025-10-31 23:00:24.209') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:145
[0m[33m[0.323ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`id` = '571498a1-6f38-47e5-839e-29600e3e433f' AND `games`.`deleted_at` IS NULL ORDER BY `games`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:157
[0m[33m[0.272ms] [34;1m[rows:1][0m SELECT * FROM `game_genres` WHERE `id` IN ('48efe747-b5a8-4cc4-a427-da81d68ce2e7')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:166
[0m[33m[0.317ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','ジャンル1','2025-10-31 23:00:24') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:166
[0m[33m[0.281ms] [34;1m[rows:1][0m INSERT INTO `game_genre_relations` (`game_id`,`genre_id`) VALUES ('571498a1-6f38-47e5-839e-29600e3e433f','48efe747-b5a8-4cc4-a427-da81d68ce2e7') ON DUPLICATE KEY UPDATE `game_id`=`game_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:166
[0m[33m[0.483ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` = '571498a1-6f38-47e5-839e-29600e3e433f' AND `game_genre_relations`.`genre_id` <> '48efe747-b5a8-4cc4-a427-da81d68ce2e7'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:716
[0m[33m[0.300ms] [34;1m[rows:1][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '48efe747-b5a8-4cc4-a427-da81d68ce2e7'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:716
[0m[33m[0.310ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`id` = '571498a1-6f38-47e5-839e-29600e3e433f' AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:716
[0m[33m[1.013ms] [34;1m[rows:1][0m SELECT * FROM `game_genres` WHERE `game_genres`.`id` in ('48efe747-b5a8-4cc4-a427-da81d68ce2e7') ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.166ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.269ms] [34;1m[rows:1][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '48efe747-b5a8-4cc4-a427-da81d68ce2e7'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.937ms] [34;1m[rows:1][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` = '48efe747-b5a8-4cc4-a427-da81d68ce2e7'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:678
[0m[33m[0.430ms] [34;1m[rows:1][0m DELETE FROM `games`
=== RUN   TestRegisterGenresToGame/違うジャンルが紐づいていても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:685
[0m[33m[0.707ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('571498a1-6f38-47e5-839e-29600e3e433f','test','test',1,'2025-10-31 23:00:24.209') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:692
[0m[33m[0.370ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`,`latest_version_updated_at`) VALUES ('571498a1-6f38-47e5-839e-29600e3e433f','test','test',1,'2025-10-31 23:00:24','2025-10-31 23:00:24') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:692
[0m[33m[0.278ms] [34;1m[rows:1][0m INSERT INTO `game_genre_relations` (`genre_id`,`game_id`) VALUES ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','571498a1-6f38-47e5-839e-29600e3e433f') ON DUPLICATE KEY UPDATE `genre_id`=`genre_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:692
[0m[33m[1.411ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','ジャンル1','2025-10-31 23:00:24.209'),('e5974284-cbb2-49e8-bec5-122fb3f911d9','ジャンル2','2025-10-31 22:00:24.209') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:145
[0m[33m[0.308ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`id` = '571498a1-6f38-47e5-839e-29600e3e433f' AND `games`.`deleted_at` IS NULL ORDER BY `games`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:157
[0m[33m[0.281ms] [34;1m[rows:1][0m SELECT * FROM `game_genres` WHERE `id` IN ('e5974284-cbb2-49e8-bec5-122fb3f911d9')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:166
[0m[33m[0.308ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('e5974284-cbb2-49e8-bec5-122fb3f911d9','ジャンル2','2025-10-31 22:00:24') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:166
[0m[33m[0.262ms] [34;1m[rows:1][0m INSERT INTO `game_genre_relations` (`game_id`,`genre_id`) VALUES ('571498a1-6f38-47e5-839e-29600e3e433f','e5974284-cbb2-49e8-bec5-122fb3f911d9') ON DUPLICATE KEY UPDATE `game_id`=`game_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:166
[0m[33m[0.592ms] [34;1m[rows:1][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` = '571498a1-6f38-47e5-839e-29600e3e433f' AND `game_genre_relations`.`genre_id` <> 'e5974284-cbb2-49e8-bec5-122fb3f911d9'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:716
[0m[33m[0.304ms] [34;1m[rows:1][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` IN ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','e5974284-cbb2-49e8-bec5-122fb3f911d9')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:716
[0m[33m[0.295ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`id` = '571498a1-6f38-47e5-839e-29600e3e433f' AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:716
[0m[33m[1.032ms] [34;1m[rows:2][0m SELECT * FROM `game_genres` WHERE `game_genres`.`id` in ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','e5974284-cbb2-49e8-bec5-122fb3f911d9') ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.187ms] [34;1m[rows:2][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.246ms] [34;1m[rows:1][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` IN ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','e5974284-cbb2-49e8-bec5-122fb3f911d9')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.931ms] [34;1m[rows:2][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` IN ('48efe747-b5a8-4cc4-a427-da81d68ce2e7','e5974284-cbb2-49e8-bec5-122fb3f911d9')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:678
[0m[33m[0.471ms] [34;1m[rows:1][0m DELETE FROM `games`
--- PASS: TestRegisterGenresToGame (0.04s)
    --- PASS: TestRegisterGenresToGame/ジャンルの追加でも問題なし (0.01s)
    --- PASS: TestRegisterGenresToGame/存在しないゲームなのでエラー (0.01s)
    --- PASS: TestRegisterGenresToGame/存在しないジャンルなのでエラー (0.01s)
    --- PASS: TestRegisterGenresToGame/ジャンルが空でもエラー無し (0.01s)
    --- PASS: TestRegisterGenresToGame/特に問題ないのでエラー無し (0.01s)
    --- PASS: TestRegisterGenresToGame/違うジャンルが紐づいていても問題なし (0.01s)
=== RUN   TestGetGameGenres

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:767
[0m[33m[0.186ms] [34;1m[rows:3][0m SELECT * FROM `game_visibility_types`
=== RUN   TestGetGameGenres/visibilityの値がおかしいのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.156ms] [34;1m[rows:0][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.139ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` IN (NULL)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.543ms] [34;1m[rows:0][0m DELETE FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:915
[0m[33m[0.520ms] [34;1m[rows:0][0m UPDATE `games` SET `deleted_at`='2025-10-31 23:00:24.252' WHERE `games`.`deleted_at` IS NULL
=== RUN   TestGetGameGenres/特に問題ないのでエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:922
[0m[33m[0.355ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('2b5f34e7-c701-4bfc-83e3-b5662f4ce2ad','game1','',1,'2025-10-31 22:00:24.25') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:922
[0m[33m[0.263ms] [34;1m[rows:1][0m INSERT INTO `game_genre_relations` (`genre_id`,`game_id`) VALUES ('590e44d8-f3f6-4698-bb19-7d4714e738c3','2b5f34e7-c701-4bfc-83e3-b5662f4ce2ad') ON DUPLICATE KEY UPDATE `genre_id`=`genre_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:922
[0m[33m[1.357ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('590e44d8-f3f6-4698-bb19-7d4714e738c3','3D','2025-10-31 23:00:24.25') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:211
[0m[33m[1.683ms] [34;1m[rows:1][0m SELECT COUNT(ggr.game_id) AS Num, game_genres.* FROM game_genres LEFT JOIN game_genre_relations AS ggr ON game_genres.id = ggr.genre_id LEFT JOIN games AS g ON g.id = ggr.game_id LEFT JOIN game_visibility_types AS gvt ON g.visibility_type_id = gvt.id WHERE gvt.name IN ('public','limited','private') GROUP BY ggr.genre_id ORDER BY game_genres.created_at DESC

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.166ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.255ms] [34;1m[rows:1][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` = '590e44d8-f3f6-4698-bb19-7d4714e738c3'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.918ms] [34;1m[rows:1][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` = '590e44d8-f3f6-4698-bb19-7d4714e738c3'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:915
[0m[33m[0.582ms] [34;1m[rows:1][0m UPDATE `games` SET `deleted_at`='2025-10-31 23:00:24.257' WHERE `games`.`deleted_at` IS NULL
=== RUN   TestGetGameGenres/ジャンルが無くてもエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:211
[0m[33m[0.345ms] [34;1m[rows:0][0m SELECT COUNT(ggr.game_id) AS Num, game_genres.* FROM game_genres LEFT JOIN game_genre_relations AS ggr ON game_genres.id = ggr.genre_id LEFT JOIN games AS g ON g.id = ggr.game_id LEFT JOIN game_visibility_types AS gvt ON g.visibility_type_id = gvt.id WHERE gvt.name IN ('public','limited','private') GROUP BY ggr.genre_id ORDER BY game_genres.created_at DESC

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.153ms] [34;1m[rows:0][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.126ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` IN (NULL)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.515ms] [34;1m[rows:0][0m DELETE FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:915
[0m[33m[0.718ms] [34;1m[rows:0][0m UPDATE `games` SET `deleted_at`='2025-10-31 23:00:24.259' WHERE `games`.`deleted_at` IS NULL
=== RUN   TestGetGameGenres/ジャンルがたくさんあってもエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:922
[0m[33m[0.463ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`,`latest_version_updated_at`) VALUES ('2b5f34e7-c701-4bfc-83e3-b5662f4ce2ad','game1','',1,'2025-10-31 22:00:24','2025-10-31 23:00:24'),('6e193ec0-e86a-4ac3-a507-05f71983fe84','game2','',3,'2025-10-31 21:00:24.25',DEFAULT) ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:922
[0m[33m[0.282ms] [34;1m[rows:2][0m INSERT INTO `game_genre_relations` (`genre_id`,`game_id`) VALUES ('590e44d8-f3f6-4698-bb19-7d4714e738c3','2b5f34e7-c701-4bfc-83e3-b5662f4ce2ad'),('07e21ce7-9e04-4c83-bf22-4e27ba547e01','6e193ec0-e86a-4ac3-a507-05f71983fe84') ON DUPLICATE KEY UPDATE `genre_id`=`genre_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:922
[0m[33m[1.559ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('590e44d8-f3f6-4698-bb19-7d4714e738c3','3D','2025-10-31 22:00:24.25'),('07e21ce7-9e04-4c83-bf22-4e27ba547e01','2D','2025-10-31 21:00:24.25') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:211
[0m[33m[0.629ms] [34;1m[rows:2][0m SELECT COUNT(ggr.game_id) AS Num, game_genres.* FROM game_genres LEFT JOIN game_genre_relations AS ggr ON game_genres.id = ggr.genre_id LEFT JOIN games AS g ON g.id = ggr.game_id LEFT JOIN game_visibility_types AS gvt ON g.visibility_type_id = gvt.id WHERE gvt.name IN ('public','limited','private') GROUP BY ggr.genre_id ORDER BY game_genres.created_at DESC

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.221ms] [34;1m[rows:2][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.255ms] [34;1m[rows:2][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` IN ('07e21ce7-9e04-4c83-bf22-4e27ba547e01','590e44d8-f3f6-4698-bb19-7d4714e738c3')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.934ms] [34;1m[rows:2][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` IN ('07e21ce7-9e04-4c83-bf22-4e27ba547e01','590e44d8-f3f6-4698-bb19-7d4714e738c3')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:915
[0m[33m[0.920ms] [34;1m[rows:1][0m UPDATE `games` SET `deleted_at`='2025-10-31 23:00:24.264' WHERE `games`.`deleted_at` IS NULL
=== RUN   TestGetGameGenres/1つのジャンルにゲームがたくさんあってもエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:922
[0m[33m[0.469ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`,`deleted_at`,`latest_version_updated_at`) VALUES ('2b5f34e7-c701-4bfc-83e3-b5662f4ce2ad','game1','',1,'2025-10-31 22:00:24','2025-10-31 23:00:24','2025-10-31 23:00:24'),('6e193ec0-e86a-4ac3-a507-05f71983fe84','game2','',3,'2025-10-31 21:00:24',DEFAULT,'2025-10-31 23:00:24') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:922
[0m[33m[0.312ms] [34;1m[rows:4][0m INSERT INTO `game_genre_relations` (`genre_id`,`game_id`) VALUES ('590e44d8-f3f6-4698-bb19-7d4714e738c3','2b5f34e7-c701-4bfc-83e3-b5662f4ce2ad'),('590e44d8-f3f6-4698-bb19-7d4714e738c3','6e193ec0-e86a-4ac3-a507-05f71983fe84'),('07e21ce7-9e04-4c83-bf22-4e27ba547e01','2b5f34e7-c701-4bfc-83e3-b5662f4ce2ad'),('07e21ce7-9e04-4c83-bf22-4e27ba547e01','6e193ec0-e86a-4ac3-a507-05f71983fe84') ON DUPLICATE KEY UPDATE `genre_id`=`genre_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:922
[0m[33m[2.358ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('590e44d8-f3f6-4698-bb19-7d4714e738c3','3D','2025-10-31 22:00:24.25'),('07e21ce7-9e04-4c83-bf22-4e27ba547e01','2D','2025-10-31 21:00:24.25') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:211
[0m[33m[0.503ms] [34;1m[rows:2][0m SELECT COUNT(ggr.game_id) AS Num, game_genres.* FROM game_genres LEFT JOIN game_genre_relations AS ggr ON game_genres.id = ggr.genre_id LEFT JOIN games AS g ON g.id = ggr.game_id LEFT JOIN game_visibility_types AS gvt ON g.visibility_type_id = gvt.id WHERE gvt.name IN ('public','limited','private') GROUP BY ggr.genre_id ORDER BY game_genres.created_at DESC

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.185ms] [34;1m[rows:2][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.272ms] [34;1m[rows:4][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` IN ('07e21ce7-9e04-4c83-bf22-4e27ba547e01','590e44d8-f3f6-4698-bb19-7d4714e738c3')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.963ms] [34;1m[rows:2][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` IN ('07e21ce7-9e04-4c83-bf22-4e27ba547e01','590e44d8-f3f6-4698-bb19-7d4714e738c3')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:915
[0m[33m[0.576ms] [34;1m[rows:0][0m UPDATE `games` SET `deleted_at`='2025-10-31 23:00:24.269' WHERE `games`.`deleted_at` IS NULL
=== RUN   TestGetGameGenres/1つのジャンルにゲームが無くてもエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:922
[0m[33m[0.543ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`,`deleted_at`,`latest_version_updated_at`) VALUES ('2b5f34e7-c701-4bfc-83e3-b5662f4ce2ad','game1','',1,'2025-10-31 22:00:24','2025-10-31 23:00:24','2025-10-31 23:00:24'),('6e193ec0-e86a-4ac3-a507-05f71983fe84','game2','',3,'2025-10-31 21:00:24','2025-10-31 23:00:24','2025-10-31 23:00:24') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:922
[0m[33m[0.340ms] [34;1m[rows:2][0m INSERT INTO `game_genre_relations` (`genre_id`,`game_id`) VALUES ('590e44d8-f3f6-4698-bb19-7d4714e738c3','2b5f34e7-c701-4bfc-83e3-b5662f4ce2ad'),('590e44d8-f3f6-4698-bb19-7d4714e738c3','6e193ec0-e86a-4ac3-a507-05f71983fe84') ON DUPLICATE KEY UPDATE `genre_id`=`genre_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:922
[0m[33m[1.839ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('590e44d8-f3f6-4698-bb19-7d4714e738c3','3D','2025-10-31 22:00:24.25'),('07e21ce7-9e04-4c83-bf22-4e27ba547e01','2D','2025-10-31 21:00:24.25') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:211
[0m[33m[0.441ms] [34;1m[rows:1][0m SELECT COUNT(ggr.game_id) AS Num, game_genres.* FROM game_genres LEFT JOIN game_genre_relations AS ggr ON game_genres.id = ggr.genre_id LEFT JOIN games AS g ON g.id = ggr.game_id LEFT JOIN game_visibility_types AS gvt ON g.visibility_type_id = gvt.id WHERE gvt.name IN ('public','limited','private') GROUP BY ggr.genre_id ORDER BY game_genres.created_at DESC

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.263ms] [34;1m[rows:2][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.313ms] [34;1m[rows:2][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` IN ('07e21ce7-9e04-4c83-bf22-4e27ba547e01','590e44d8-f3f6-4698-bb19-7d4714e738c3')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[1.163ms] [34;1m[rows:2][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` IN ('07e21ce7-9e04-4c83-bf22-4e27ba547e01','590e44d8-f3f6-4698-bb19-7d4714e738c3')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:915
[0m[33m[0.581ms] [34;1m[rows:0][0m UPDATE `games` SET `deleted_at`='2025-10-31 23:00:24.273' WHERE `games`.`deleted_at` IS NULL
=== RUN   TestGetGameGenres/全てのvisibilityでなくてもok

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:922
[0m[33m[0.465ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`,`deleted_at`,`latest_version_updated_at`) VALUES ('2b5f34e7-c701-4bfc-83e3-b5662f4ce2ad','game1','',1,'2025-10-31 22:00:24','2025-10-31 23:00:24','2025-10-31 23:00:24'),('6e193ec0-e86a-4ac3-a507-05f71983fe84','game2','',3,'2025-10-31 21:00:24','2025-10-31 23:00:24','2025-10-31 23:00:24') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:922
[0m[33m[0.302ms] [34;1m[rows:2][0m INSERT INTO `game_genre_relations` (`genre_id`,`game_id`) VALUES ('590e44d8-f3f6-4698-bb19-7d4714e738c3','2b5f34e7-c701-4bfc-83e3-b5662f4ce2ad'),('590e44d8-f3f6-4698-bb19-7d4714e738c3','6e193ec0-e86a-4ac3-a507-05f71983fe84') ON DUPLICATE KEY UPDATE `genre_id`=`genre_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:922
[0m[33m[1.631ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('590e44d8-f3f6-4698-bb19-7d4714e738c3','3D','2025-10-31 22:00:24.25'),('07e21ce7-9e04-4c83-bf22-4e27ba547e01','2D','2025-10-31 21:00:24.25') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:211
[0m[33m[0.408ms] [34;1m[rows:1][0m SELECT COUNT(ggr.game_id) AS Num, game_genres.* FROM game_genres LEFT JOIN game_genre_relations AS ggr ON game_genres.id = ggr.genre_id LEFT JOIN games AS g ON g.id = ggr.game_id LEFT JOIN game_visibility_types AS gvt ON g.visibility_type_id = gvt.id WHERE gvt.name IN ('public','limited') GROUP BY ggr.genre_id ORDER BY game_genres.created_at DESC

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.177ms] [34;1m[rows:2][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.285ms] [34;1m[rows:2][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` IN ('07e21ce7-9e04-4c83-bf22-4e27ba547e01','590e44d8-f3f6-4698-bb19-7d4714e738c3')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[1.023ms] [34;1m[rows:2][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` IN ('07e21ce7-9e04-4c83-bf22-4e27ba547e01','590e44d8-f3f6-4698-bb19-7d4714e738c3')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:915
[0m[33m[0.533ms] [34;1m[rows:0][0m UPDATE `games` SET `deleted_at`='2025-10-31 23:00:24.277' WHERE `games`.`deleted_at` IS NULL
--- PASS: TestGetGameGenres (0.03s)
    --- PASS: TestGetGameGenres/visibilityの値がおかしいのでエラー (0.00s)
    --- PASS: TestGetGameGenres/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestGetGameGenres/ジャンルが無くてもエラー無し (0.00s)
    --- PASS: TestGetGameGenres/ジャンルがたくさんあってもエラー無し (0.00s)
    --- PASS: TestGetGameGenres/1つのジャンルにゲームがたくさんあってもエラー無し (0.00s)
    --- PASS: TestGetGameGenres/1つのジャンルにゲームが無くてもエラー無し (0.00s)
    --- PASS: TestGetGameGenres/全てのvisibilityでなくてもok (0.00s)
=== RUN   TestUpdateGameGenre
=== RUN   TestUpdateGameGenre/特に問題ないのでエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1048
[0m[33m[0.688ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('845223db-f98e-4db4-ace1-7b0602700b6c','test','2025-10-31 23:00:24.277') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:244
[0m[33m[0.618ms] [34;1m[rows:1][0m UPDATE `game_genres` SET `name`='test2' WHERE `id` = '845223db-f98e-4db4-ace1-7b0602700b6c'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1069
[0m[33m[0.168ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1051
[0m[33m[0.460ms] [34;1m[rows:1][0m DELETE FROM `game_genres`
=== RUN   TestUpdateGameGenre/他のジャンルがあってもエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1048
[0m[33m[0.656ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('845223db-f98e-4db4-ace1-7b0602700b6c','test','2025-10-31 23:00:24.277'),('43b635fb-5050-4092-9863-df2cf882a298','test3','2025-10-31 23:00:24.277') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:244
[0m[33m[0.660ms] [34;1m[rows:1][0m UPDATE `game_genres` SET `name`='test2' WHERE `id` = '845223db-f98e-4db4-ace1-7b0602700b6c'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1069
[0m[33m[0.176ms] [34;1m[rows:2][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1051
[0m[33m[0.464ms] [34;1m[rows:2][0m DELETE FROM `game_genres`
=== RUN   TestUpdateGameGenre/ジャンルが存在しないのでErrNoRecordUpdated

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1048
[0m[33m[0.700ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('845223db-f98e-4db4-ace1-7b0602700b6c','test','2025-10-31 23:00:24.277') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:244
[0m[33m[0.520ms] [34;1m[rows:0][0m UPDATE `game_genres` SET `name`='test2' WHERE `id` = '43b635fb-5050-4092-9863-df2cf882a298'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1069
[0m[33m[0.174ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1051
[0m[33m[0.449ms] [34;1m[rows:1][0m DELETE FROM `game_genres`
=== RUN   TestUpdateGameGenre/ジャンル名が存在するのでErrDuplicatedUniqueKey

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1048
[0m[33m[1.030ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('845223db-f98e-4db4-ace1-7b0602700b6c','test','2025-10-31 23:00:24.277'),('43b635fb-5050-4092-9863-df2cf882a298','test2','2025-10-31 23:00:24.277') RETURNING `created_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:244 [35;1mError 1062 (23000): Duplicate entry 'test2' for key 'uni_game_genres_name'
[0m[33m[0.555ms] [34;1m[rows:0][0m UPDATE `game_genres` SET `name`='test2' WHERE `id` = '845223db-f98e-4db4-ace1-7b0602700b6c'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1069
[0m[33m[0.171ms] [34;1m[rows:2][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1051
[0m[33m[0.467ms] [34;1m[rows:2][0m DELETE FROM `game_genres`
=== RUN   TestUpdateGameGenre/変更が無いのでErrNoRecordUpdated

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1048
[0m[33m[0.698ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('845223db-f98e-4db4-ace1-7b0602700b6c','test','2025-10-31 23:00:24.277') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:244
[0m[33m[0.491ms] [34;1m[rows:0][0m UPDATE `game_genres` SET `name`='test' WHERE `id` = '845223db-f98e-4db4-ace1-7b0602700b6c'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1069
[0m[33m[0.155ms] [34;1m[rows:1][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1051
[0m[33m[0.456ms] [34;1m[rows:1][0m DELETE FROM `game_genres`
--- PASS: TestUpdateGameGenre (0.01s)
    --- PASS: TestUpdateGameGenre/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestUpdateGameGenre/他のジャンルがあってもエラー無し (0.00s)
    --- PASS: TestUpdateGameGenre/ジャンルが存在しないのでErrNoRecordUpdated (0.00s)
    --- PASS: TestUpdateGameGenre/ジャンル名が存在するのでErrDuplicatedUniqueKey (0.00s)
    --- PASS: TestUpdateGameGenre/変更が無いのでErrNoRecordUpdated (0.00s)
=== RUN   TestGetGameGenre

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1107
[0m[33m[0.711ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('409a4f90-0ddd-4eb4-bfd3-c466dcff19e1','test','2025-10-31 23:00:24.288'),('25913d86-c729-4d0f-b613-e7a24100faeb','test2','2025-10-31 23:00:24.288') RETURNING `created_at`
=== RUN   TestGetGameGenre/特に問題ないのでエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:267
[0m[33m[0.385ms] [34;1m[rows:1][0m SELECT * FROM `game_genres` WHERE `game_genres`.`id` = '409a4f90-0ddd-4eb4-bfd3-c466dcff19e1' ORDER BY `game_genres`.`id` LIMIT 1
=== RUN   TestGetGameGenre/存在しないジャンルなのでErrRecordNotFound

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:267 [35;1mrecord not found
[0m[33m[0.294ms] [34;1m[rows:0][0m SELECT * FROM `game_genres` WHERE `game_genres`.`id` = '4f8185b5-8cc5-44dd-930b-82c21542479b' ORDER BY `game_genres`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1110
[0m[33m[0.475ms] [34;1m[rows:2][0m DELETE FROM `game_genres`
--- PASS: TestGetGameGenre (0.00s)
    --- PASS: TestGetGameGenre/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestGetGameGenre/存在しないジャンルなのでErrRecordNotFound (0.00s)
=== RUN   TestGetGamesByGenreID

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1183
[0m[33m[0.204ms] [34;1m[rows:3][0m SELECT * FROM `game_visibility_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1217
[0m[33m[0.352ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('09e812e5-aa71-4995-aca0-f57096bc2064','ジャンル1','2025-10-31 23:00:24.29'),('bb2e9ced-5700-46a4-a0f9-9fbc3e007fca','ジャンル2','2025-10-31 22:00:24.29') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1217
[0m[33m[0.312ms] [34;1m[rows:3][0m INSERT INTO `game_genre_relations` (`game_id`,`genre_id`) VALUES ('475d0267-cff1-4587-bd16-24b343825822','09e812e5-aa71-4995-aca0-f57096bc2064'),('475d0267-cff1-4587-bd16-24b343825822','bb2e9ced-5700-46a4-a0f9-9fbc3e007fca'),('ce8f319a-ad4b-4d08-a20e-7083d62d97a1','bb2e9ced-5700-46a4-a0f9-9fbc3e007fca') ON DUPLICATE KEY UPDATE `game_id`=`game_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1217
[0m[33m[1.591ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('475d0267-cff1-4587-bd16-24b343825822','test','test',1,'2025-10-31 23:00:24.29'),('ce8f319a-ad4b-4d08-a20e-7083d62d97a1','test2','test2',1,'2025-10-31 22:00:24.29') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`
=== RUN   TestGetGamesByGenreID/特に問題ないのでエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:292
[0m[33m[0.284ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`id` = 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:292
[0m[33m[0.794ms] [34;1m[rows:1][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at` FROM `games` JOIN game_genre_relations ON games.id = game_genre_relations.game_id WHERE genre_id = '09e812e5-aa71-4995-aca0-f57096bc2064' AND `games`.`deleted_at` IS NULL
=== RUN   TestGetGamesByGenreID/複数のゲームでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:292
[0m[33m[0.275ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`id` = 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:292
[0m[33m[0.753ms] [34;1m[rows:2][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at` FROM `games` JOIN game_genre_relations ON games.id = game_genre_relations.game_id WHERE genre_id = 'bb2e9ced-5700-46a4-a0f9-9fbc3e007fca' AND `games`.`deleted_at` IS NULL
=== RUN   TestGetGamesByGenreID/ゲームが無くても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre.go:292
[0m[33m[0.361ms] [34;1m[rows:0][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at` FROM `games` JOIN game_genre_relations ON games.id = game_genre_relations.game_id WHERE genre_id = '9ca7b4a4-1b61-4721-b9e8-b4683bf3bb75' AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1295
[0m[33m[0.194ms] [34;1m[rows:2][0m SELECT * FROM `game_genres`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[0.275ms] [34;1m[rows:3][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`genre_id` IN ('09e812e5-aa71-4995-aca0-f57096bc2064','bb2e9ced-5700-46a4-a0f9-9fbc3e007fca')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1303
[0m[33m[1.037ms] [34;1m[rows:2][0m DELETE FROM `game_genres` WHERE `game_genres`.`id` IN ('09e812e5-aa71-4995-aca0-f57096bc2064','bb2e9ced-5700-46a4-a0f9-9fbc3e007fca')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_genre_test.go:1221
[0m[33m[0.515ms] [34;1m[rows:4][0m DELETE FROM `games`
--- PASS: TestGetGamesByGenreID (0.01s)
    --- PASS: TestGetGamesByGenreID/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestGetGamesByGenreID/複数のゲームでも問題なし (0.00s)
    --- PASS: TestGetGamesByGenreID/ゲームが無くても問題なし (0.00s)
=== RUN   TestAddGameManagementRoles
=== PAUSE TestAddGameManagementRoles
=== RUN   TestUpdateGameManagementRole
=== PAUSE TestUpdateGameManagementRole
=== RUN   TestRemoveGameManagementRole
=== PAUSE TestRemoveGameManagementRole
=== RUN   TestGetGameManagersByGameID
=== PAUSE TestGetGameManagersByGameID
=== RUN   TestGetGameManagementRole
=== PAUSE TestGetGameManagementRole
=== RUN   TestCreateLauncherSession
=== PAUSE TestCreateLauncherSession
=== RUN   TestCreateLauncherUsers
=== PAUSE TestCreateLauncherUsers
=== RUN   TestDeleteLauncherUser
=== PAUSE TestDeleteLauncherUser
=== RUN   TestGetLauncherUserByProductKey
=== PAUSE TestGetLauncherUserByProductKey
=== RUN   TestAddAdminV2
=== RUN   TestAddAdminV2/特に問題ないので問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth.go:33
[0m[33m[0.809ms] [34;1m[rows:1][0m INSERT INTO `admins` (`user_id`) VALUES ('c46df7a8-9d32-438e-9e18-5bf3b8efbecf')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth_test.go:91
[0m[33m[0.300ms] [34;1m[rows:1][0m SELECT * FROM `admins` WHERE user_id = 'c46df7a8-9d32-438e-9e18-5bf3b8efbecf' ORDER BY `admins`.`user_id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth_test.go:62
[0m[33m[0.475ms] [34;1m[rows:1][0m DELETE FROM `admins`
=== RUN   TestAddAdminV2/既に登録されているのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth_test.go:69
[0m[33m[0.600ms] [34;1m[rows:1][0m INSERT INTO `admins` (`user_id`) VALUES ('7424eabd-1469-45ab-ad2b-e97e86425a8c')

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth.go:33 [35;1mError 1062 (23000): Duplicate entry '7424eabd-1469-45ab-ad2b-e97e86425a8c' for key 'PRIMARY'
[0m[33m[0.515ms] [34;1m[rows:0][0m INSERT INTO `admins` (`user_id`) VALUES ('7424eabd-1469-45ab-ad2b-e97e86425a8c')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth_test.go:62
[0m[33m[0.459ms] [34;1m[rows:1][0m DELETE FROM `admins`
--- PASS: TestAddAdminV2 (0.00s)
    --- PASS: TestAddAdminV2/特に問題ないので問題なし (0.00s)
    --- PASS: TestAddAdminV2/既に登録されているのでエラー (0.00s)
=== RUN   TestGetAdminsV2
=== RUN   TestGetAdminsV2/特に問題ないのでエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth_test.go:171
[0m[33m[0.648ms] [34;1m[rows:1][0m INSERT INTO `admins` (`user_id`) VALUES ('0084f290-3703-463f-a5c1-7c3373e009e4')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth.go:47
[0m[33m[0.163ms] [34;1m[rows:1][0m SELECT * FROM `admins`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth_test.go:164
[0m[33m[0.455ms] [34;1m[rows:1][0m DELETE FROM `admins`
=== RUN   TestGetAdminsV2/adminが存在しなくてもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth.go:47
[0m[33m[0.142ms] [34;1m[rows:0][0m SELECT * FROM `admins`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth_test.go:164
[0m[33m[0.385ms] [34;1m[rows:0][0m DELETE FROM `admins`
=== RUN   TestGetAdminsV2/adminが複数でもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth_test.go:171
[0m[33m[0.633ms] [34;1m[rows:2][0m INSERT INTO `admins` (`user_id`) VALUES ('0084f290-3703-463f-a5c1-7c3373e009e4'),('f7f6c802-8546-487e-a95f-87f7d074be85')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth.go:47
[0m[33m[0.175ms] [34;1m[rows:2][0m SELECT * FROM `admins`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth_test.go:164
[0m[33m[0.461ms] [34;1m[rows:2][0m DELETE FROM `admins`
--- PASS: TestGetAdminsV2 (0.00s)
    --- PASS: TestGetAdminsV2/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetAdminsV2/adminが存在しなくてもエラーなし (0.00s)
    --- PASS: TestGetAdminsV2/adminが複数でもエラーなし (0.00s)
=== RUN   TestDeleteAdminV2
=== RUN   TestDeleteAdminV2/特に問題ないのでエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth_test.go:274
[0m[33m[0.557ms] [34;1m[rows:1][0m INSERT INTO `admins` (`user_id`) VALUES ('3a6a82c0-f8f2-4b37-a16d-a1a848cf859f')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth.go:67
[0m[33m[0.567ms] [34;1m[rows:1][0m DELETE FROM `admins` WHERE user_id = '3a6a82c0-f8f2-4b37-a16d-a1a848cf859f'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth_test.go:298
[0m[33m[0.129ms] [34;1m[rows:0][0m SELECT * FROM `admins`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth_test.go:267
[0m[33m[0.335ms] [34;1m[rows:0][0m DELETE FROM `admins`
=== RUN   TestDeleteAdminV2/他のadminが存在してもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth_test.go:274
[0m[33m[0.541ms] [34;1m[rows:2][0m INSERT INTO `admins` (`user_id`) VALUES ('3a6a82c0-f8f2-4b37-a16d-a1a848cf859f'),('949788ce-4692-4d53-9f4d-addf1d7f4150')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth.go:67
[0m[33m[0.552ms] [34;1m[rows:1][0m DELETE FROM `admins` WHERE user_id = '3a6a82c0-f8f2-4b37-a16d-a1a848cf859f'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth_test.go:298
[0m[33m[0.155ms] [34;1m[rows:1][0m SELECT * FROM `admins`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth_test.go:267
[0m[33m[0.940ms] [34;1m[rows:1][0m DELETE FROM `admins`
=== RUN   TestDeleteAdminV2/adminが存在しないのでErrNoRecordDeleted

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth.go:67
[0m[33m[0.475ms] [34;1m[rows:0][0m DELETE FROM `admins` WHERE user_id = '3a6a82c0-f8f2-4b37-a16d-a1a848cf859f'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_admin_auth_test.go:267
[0m[33m[0.350ms] [34;1m[rows:0][0m DELETE FROM `admins`
--- PASS: TestDeleteAdminV2 (0.01s)
    --- PASS: TestDeleteAdminV2/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestDeleteAdminV2/他のadminが存在してもエラーなし (0.00s)
    --- PASS: TestDeleteAdminV2/adminが存在しないのでErrNoRecordDeleted (0.00s)
=== RUN   TestGetGameFilesWithoutTypesV2
=== PAUSE TestGetGameFilesWithoutTypesV2
=== RUN   TestSaveGameFileV2
=== PAUSE TestSaveGameFileV2
=== RUN   TestGetGameFile
=== PAUSE TestGetGameFile
=== RUN   TestGetGameFilesV2
=== PAUSE TestGetGameFilesV2
=== RUN   TestSaveGameImageV2
=== PAUSE TestSaveGameImageV2
=== RUN   TestGetGameImage
=== PAUSE TestGetGameImage
=== RUN   TestGetGameImages
=== PAUSE TestGetGameImages
=== RUN   TestCreateGamePlayLog
=== PAUSE TestCreateGamePlayLog
=== RUN   TestGetGamePlayLog

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:535
[0m[33m[0.669ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`) VALUES ('986deec1-2c56-4f70-8fde-bf6167b2cdd1','Test') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:536
[0m[33m[0.733ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`) VALUES ('5b375435-2f44-4432-8f8d-4013f03501ec','Test','',1) RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:537
[0m[33m[0.670ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`) VALUES ('39419510-90db-49a1-8890-4edbde3b14fd','5b375435-2f44-4432-8f8d-4013f03501ec',1) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:538
[0m[33m[0.622ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`) VALUES ('7fd90eb7-ac9a-48d5-b9c2-3ce3aa382b4a','5b375435-2f44-4432-8f8d-4013f03501ec',1) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:539
[0m[33m[0.657ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`) VALUES ('efd98755-3074-4e39-bac6-6daef9890919','5b375435-2f44-4432-8f8d-4013f03501ec','39419510-90db-49a1-8890-4edbde3b14fd','7fd90eb7-ac9a-48d5-b9c2-3ce3aa382b4a','Test','test') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:540
[0m[33m[0.841ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`created_at`,`updated_at`) VALUES ('876ecf4e-0165-4d1b-838b-40d886e99a89','986deec1-2c56-4f70-8fde-bf6167b2cdd1','5b375435-2f44-4432-8f8d-4013f03501ec','efd98755-3074-4e39-bac6-6daef9890919','2025-10-31 23:00:24.309','2025-10-31 23:00:24.309','2025-10-31 23:00:24.309') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:541
[0m[33m[0.710ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`end_time`,`created_at`,`updated_at`) VALUES ('1573a6d8-57c4-4711-a130-2df78b924a80','986deec1-2c56-4f70-8fde-bf6167b2cdd1','5b375435-2f44-4432-8f8d-4013f03501ec','efd98755-3074-4e39-bac6-6daef9890919','2025-10-31 22:00:24.309','2025-10-31 23:00:24.309','2025-10-31 22:00:24.309','2025-10-31 23:00:24.309') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`
=== RUN   TestGetGamePlayLog/正常な場合(EndTimeがNULL)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:75
[0m[33m[0.342ms] [34;1m[rows:1][0m SELECT * FROM `game_play_logs` WHERE id = '876ecf4e-0165-4d1b-838b-40d886e99a89' ORDER BY `game_play_logs`.`id` LIMIT 1
=== RUN   TestGetGamePlayLog/正常な場合(EndTimeが非NULL)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:75
[0m[33m[0.335ms] [34;1m[rows:1][0m SELECT * FROM `game_play_logs` WHERE id = '1573a6d8-57c4-4711-a130-2df78b924a80' ORDER BY `game_play_logs`.`id` LIMIT 1
=== RUN   TestGetGamePlayLog/存在しない場合

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:75 [35;1mrecord not found
[0m[33m[0.322ms] [34;1m[rows:0][0m SELECT * FROM `game_play_logs` WHERE id = 'c3989a4f-c877-4409-b914-85b91ba49007' ORDER BY `game_play_logs`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:545
[0m[33m[0.605ms] [34;1m[rows:1][0m DELETE FROM `game_play_logs` WHERE `game_play_logs`.`id` = '876ecf4e-0165-4d1b-838b-40d886e99a89'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:546
[0m[33m[0.560ms] [34;1m[rows:1][0m DELETE FROM `game_play_logs` WHERE `game_play_logs`.`id` = '1573a6d8-57c4-4711-a130-2df78b924a80'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:547
[0m[33m[0.603ms] [34;1m[rows:1][0m DELETE FROM `v2_game_versions` WHERE `v2_game_versions`.`id` = 'efd98755-3074-4e39-bac6-6daef9890919'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:548
[0m[33m[0.576ms] [34;1m[rows:1][0m DELETE FROM `v2_game_videos` WHERE `v2_game_videos`.`id` = '7fd90eb7-ac9a-48d5-b9c2-3ce3aa382b4a'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:549
[0m[33m[0.600ms] [34;1m[rows:1][0m DELETE FROM `v2_game_images` WHERE `v2_game_images`.`id` = '39419510-90db-49a1-8890-4edbde3b14fd'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:550
[0m[33m[0.609ms] [34;1m[rows:1][0m DELETE FROM `games` WHERE `games`.`id` = '5b375435-2f44-4432-8f8d-4013f03501ec'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:551
[0m[33m[0.637ms] [34;1m[rows:1][0m DELETE FROM `editions` WHERE `editions`.`id` = '986deec1-2c56-4f70-8fde-bf6167b2cdd1'
--- PASS: TestGetGamePlayLog (0.01s)
    --- PASS: TestGetGamePlayLog/正常な場合(EndTimeがNULL) (0.00s)
    --- PASS: TestGetGamePlayLog/正常な場合(EndTimeが非NULL) (0.00s)
    --- PASS: TestGetGamePlayLog/存在しない場合 (0.00s)
=== RUN   TestUpdateGamePlayLogEndTime
=== PAUSE TestUpdateGamePlayLogEndTime
=== RUN   TestGetGamePlayStats

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:915
[0m[33m[0.718ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`) VALUES ('067f47d9-c543-496f-ba15-ef328aae162b','Test') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:916
[0m[33m[0.712ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`) VALUES ('1a852a58-57f0-49c7-86cb-2e3ebfc7bb47','Test','',1) RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:917
[0m[33m[0.651ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`) VALUES ('a4db4508-7de1-44f8-a9f8-97f884e5265c','1a852a58-57f0-49c7-86cb-2e3ebfc7bb47',1) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:918
[0m[33m[0.659ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`) VALUES ('0140adb4-d307-40a0-9cc3-02b90b9ed946','1a852a58-57f0-49c7-86cb-2e3ebfc7bb47',1) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:919
[0m[33m[0.698ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`) VALUES ('e131f4a6-6580-42a1-81ed-64c43924d8c4','1a852a58-57f0-49c7-86cb-2e3ebfc7bb47','a4db4508-7de1-44f8-a9f8-97f884e5265c','0140adb4-d307-40a0-9cc3-02b90b9ed946','Test','test') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:920
[0m[33m[0.676ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`) VALUES ('961b1fa0-a3f1-45ce-96cd-6a6b7a4bf26c','1a852a58-57f0-49c7-86cb-2e3ebfc7bb47','a4db4508-7de1-44f8-a9f8-97f884e5265c','0140adb4-d307-40a0-9cc3-02b90b9ed946','Test2','test2') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:921
[0m[33m[1.025ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`end_time`,`created_at`,`updated_at`) VALUES ('15dc95a8-8913-43eb-8dc9-5c770ef9eabc','067f47d9-c543-496f-ba15-ef328aae162b','1a852a58-57f0-49c7-86cb-2e3ebfc7bb47','e131f4a6-6580-42a1-81ed-64c43924d8c4','2025-09-03 15:00:00','2025-09-03 15:10:00','2025-10-31 23:00:24.32','2025-10-31 23:00:24.32') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:922
[0m[33m[0.727ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`end_time`,`created_at`,`updated_at`) VALUES ('15ceae61-eace-4ee0-9375-76411fcb77a7','067f47d9-c543-496f-ba15-ef328aae162b','1a852a58-57f0-49c7-86cb-2e3ebfc7bb47','e131f4a6-6580-42a1-81ed-64c43924d8c4','2025-09-03 15:30:00','2025-09-03 15:50:00','2025-10-31 23:00:24.32','2025-10-31 23:00:24.32') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:923
[0m[33m[0.696ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`end_time`,`created_at`,`updated_at`) VALUES ('8fb1524b-4caa-4ab0-afc9-1ac3c2b7a968','067f47d9-c543-496f-ba15-ef328aae162b','1a852a58-57f0-49c7-86cb-2e3ebfc7bb47','e131f4a6-6580-42a1-81ed-64c43924d8c4','2025-09-03 16:00:00','2025-09-03 16:30:00','2025-10-31 23:00:24.32','2025-10-31 23:00:24.32') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:924
[0m[33m[0.638ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`end_time`,`created_at`,`updated_at`) VALUES ('9d2255a0-651b-4271-8074-1a8e996ee65a','067f47d9-c543-496f-ba15-ef328aae162b','1a852a58-57f0-49c7-86cb-2e3ebfc7bb47','e131f4a6-6580-42a1-81ed-64c43924d8c4','2025-09-03 17:00:00','2025-09-03 17:40:00','2025-10-31 23:00:24.32','2025-10-31 23:00:24.32') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:925
[0m[33m[0.673ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`created_at`,`updated_at`) VALUES ('0d762fe3-d278-4ba5-b3f8-6738589dbaa6','067f47d9-c543-496f-ba15-ef328aae162b','1a852a58-57f0-49c7-86cb-2e3ebfc7bb47','e131f4a6-6580-42a1-81ed-64c43924d8c4','2025-09-03 18:00:00','2025-10-31 23:00:24.32','2025-10-31 23:00:24.32') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:926
[0m[33m[0.696ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`end_time`,`created_at`,`updated_at`) VALUES ('0fd86862-2cee-4d02-92a3-e848d1f9ba4f','067f47d9-c543-496f-ba15-ef328aae162b','1a852a58-57f0-49c7-86cb-2e3ebfc7bb47','e131f4a6-6580-42a1-81ed-64c43924d8c4','2025-09-03 13:50:00','2025-09-03 14:20:00','2025-10-31 23:00:24.32','2025-10-31 23:00:24.32') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:927
[0m[33m[0.665ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`end_time`,`created_at`,`updated_at`) VALUES ('6159ec2f-457c-4289-8408-319a6bcd45f7','067f47d9-c543-496f-ba15-ef328aae162b','1a852a58-57f0-49c7-86cb-2e3ebfc7bb47','961b1fa0-a3f1-45ce-96cd-6a6b7a4bf26c','2025-09-03 15:00:00','2025-09-03 15:30:00','2025-10-31 23:00:24.32','2025-10-31 23:00:24.32') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`
=== RUN   TestGetGamePlayStats/普通の取得

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:150
[0m[33m[0.472ms] [34;1m[rows:3][0m SELECT * FROM `game_play_logs` WHERE game_id = '1a852a58-57f0-49c7-86cb-2e3ebfc7bb47' AND game_version_id = 'e131f4a6-6580-42a1-81ed-64c43924d8c4' AND ((start_time < '2025-09-03 17:00:00' AND end_time > '2025-09-03 15:00:00') OR (start_time < '2025-09-03 17:00:00' AND end_time IS NULL))
=== RUN   TestGetGamePlayStats/gameVersion1のプレイ中のログを含めて取得

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:150
[0m[33m[0.447ms] [34;1m[rows:3][0m SELECT * FROM `game_play_logs` WHERE game_id = '1a852a58-57f0-49c7-86cb-2e3ebfc7bb47' AND game_version_id = 'e131f4a6-6580-42a1-81ed-64c43924d8c4' AND ((start_time < '2025-09-03 18:20:00' AND end_time > '2025-09-03 16:00:00') OR (start_time < '2025-09-03 18:20:00' AND end_time IS NULL))
=== RUN   TestGetGamePlayStats/時間を跨ぐようなログの取得

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:150
[0m[33m[0.758ms] [34;1m[rows:2][0m SELECT * FROM `game_play_logs` WHERE game_id = '1a852a58-57f0-49c7-86cb-2e3ebfc7bb47' AND game_version_id = 'e131f4a6-6580-42a1-81ed-64c43924d8c4' AND ((start_time < '2025-09-03 16:00:00' AND end_time > '2025-09-03 14:30:00') OR (start_time < '2025-09-03 16:00:00' AND end_time IS NULL))
=== RUN   TestGetGamePlayStats/endtimeがNULLでスタートが指定時間より前のログの取得

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:150
[0m[33m[0.384ms] [34;1m[rows:1][0m SELECT * FROM `game_play_logs` WHERE game_id = '1a852a58-57f0-49c7-86cb-2e3ebfc7bb47' AND game_version_id = 'e131f4a6-6580-42a1-81ed-64c43924d8c4' AND ((start_time < '2025-09-03 18:50:00' AND end_time > '2025-09-03 18:30:00') OR (start_time < '2025-09-03 18:50:00' AND end_time IS NULL))
=== RUN   TestGetGamePlayStats/00分を跨ぐログの取得

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:150
[0m[33m[0.385ms] [34;1m[rows:1][0m SELECT * FROM `game_play_logs` WHERE game_id = '1a852a58-57f0-49c7-86cb-2e3ebfc7bb47' AND game_version_id = 'e131f4a6-6580-42a1-81ed-64c43924d8c4' AND ((start_time < '2025-09-03 14:30:00' AND end_time > '2025-09-03 13:30:00') OR (start_time < '2025-09-03 14:30:00' AND end_time IS NULL))
=== RUN   TestGetGamePlayStats/バージョンID無しで取得_(全バージョン集計)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:150
[0m[33m[0.540ms] [34;1m[rows:7][0m SELECT * FROM `game_play_logs` WHERE game_id = '1a852a58-57f0-49c7-86cb-2e3ebfc7bb47' AND ((start_time < '2025-09-03 18:20:00' AND end_time > '2025-09-03 00:00:00') OR (start_time < '2025-09-03 18:20:00' AND end_time IS NULL))
=== RUN   TestGetGamePlayStats/存在しないゲームIDで取得

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:150
[0m[33m[0.343ms] [34;1m[rows:0][0m SELECT * FROM `game_play_logs` WHERE game_id = '7c6d68b8-5517-4dfd-adb5-82841e77bee5' AND game_version_id = 'e131f4a6-6580-42a1-81ed-64c43924d8c4' AND ((start_time < '2025-09-04 00:00:00' AND end_time > '2025-09-03 00:00:00') OR (start_time < '2025-09-04 00:00:00' AND end_time IS NULL))

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:931
[0m[33m[0.474ms] [34;1m[rows:7][0m DELETE FROM `game_play_logs`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:932
[0m[33m[0.494ms] [34;1m[rows:2][0m DELETE FROM `v2_game_versions`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:933
[0m[33m[0.457ms] [34;1m[rows:1][0m DELETE FROM `v2_game_videos`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:934
[0m[33m[0.457ms] [34;1m[rows:1][0m DELETE FROM `v2_game_images`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:935
[0m[33m[0.466ms] [34;1m[rows:1][0m DELETE FROM `games`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:936
[0m[33m[0.477ms] [34;1m[rows:1][0m DELETE FROM `editions`
--- PASS: TestGetGamePlayStats (0.02s)
    --- PASS: TestGetGamePlayStats/普通の取得 (0.00s)
    --- PASS: TestGetGamePlayStats/gameVersion1のプレイ中のログを含めて取得 (0.00s)
    --- PASS: TestGetGamePlayStats/時間を跨ぐようなログの取得 (0.00s)
    --- PASS: TestGetGamePlayStats/endtimeがNULLでスタートが指定時間より前のログの取得 (0.00s)
    --- PASS: TestGetGamePlayStats/00分を跨ぐログの取得 (0.00s)
    --- PASS: TestGetGamePlayStats/バージョンID無しで取得_(全バージョン集計) (0.00s)
    --- PASS: TestGetGamePlayStats/存在しないゲームIDで取得 (0.00s)
=== RUN   TestGetEditionPlayStats
=== PAUSE TestGetEditionPlayStats
=== RUN   TestSaveGameV2
=== PAUSE TestSaveGameV2
=== RUN   TestUpdateGameV2

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:177
[0m[33m[0.195ms] [34;1m[rows:3][0m SELECT * FROM `game_visibility_types`
=== RUN   TestUpdateGameV2/特に問題ないのでエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:305
[0m[33m[0.723ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('a5f03d8c-587e-4872-ab90-1fe60ab99710','test1','test1',1,'2025-10-31 23:00:24.338') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:370
[0m[33m[0.297ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE name = 'limited' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:88
[0m[33m[0.675ms] [34;1m[rows:1][0m UPDATE `games` SET `name`='test2',`description`='test2',`visibility_type_id`=2 WHERE id = 'a5f03d8c-587e-4872-ab90-1fe60ab99710' AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:330
[0m[33m[0.212ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`deleted_at` IS NULL ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:294
[0m[33m[0.480ms] [34;1m[rows:1][0m DELETE FROM `games`
=== RUN   TestUpdateGameV2/別のゲームが存在してもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:305
[0m[33m[1.148ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('a5f03d8c-587e-4872-ab90-1fe60ab99710','test1','test1',1,'2025-10-31 23:00:24.338'),('ffb0bb8a-9017-4098-9c94-ed89a3cd4599','test2','test2',1,'2025-10-31 22:00:24.338') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:370
[0m[33m[0.288ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE name = 'limited' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:88
[0m[33m[0.684ms] [34;1m[rows:1][0m UPDATE `games` SET `name`='test3',`description`='test3',`visibility_type_id`=2 WHERE id = 'a5f03d8c-587e-4872-ab90-1fe60ab99710' AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:330
[0m[33m[0.218ms] [34;1m[rows:2][0m SELECT * FROM `games` WHERE `games`.`deleted_at` IS NULL ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:294
[0m[33m[0.469ms] [34;1m[rows:2][0m DELETE FROM `games`
=== RUN   TestUpdateGameV2/ゲームが存在しないのでErrNoRecordUpdated

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:370
[0m[33m[0.309ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE name = 'limited' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:88
[0m[33m[0.519ms] [34;1m[rows:0][0m UPDATE `games` SET `name`='test2',`description`='test2',`visibility_type_id`=2 WHERE id = 'a5f03d8c-587e-4872-ab90-1fe60ab99710' AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:294
[0m[33m[0.354ms] [34;1m[rows:0][0m DELETE FROM `games`
--- PASS: TestUpdateGameV2 (0.01s)
    --- PASS: TestUpdateGameV2/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestUpdateGameV2/別のゲームが存在してもエラーなし (0.00s)
    --- PASS: TestUpdateGameV2/ゲームが存在しないのでErrNoRecordUpdated (0.00s)
=== RUN   TestRemoveGameV2

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:376
[0m[33m[0.282ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestRemoveGameV2/特に問題ないのでエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:478
[0m[33m[0.659ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('b1277b53-8ed5-4c80-81d3-4df446ddc622','test1','test1',1,'2025-10-31 23:00:24.345') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:109
[0m[33m[0.583ms] [34;1m[rows:1][0m UPDATE `games` SET `deleted_at`='2025-10-31 23:00:24.347' WHERE id = 'b1277b53-8ed5-4c80-81d3-4df446ddc622' AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:504
[0m[33m[0.225ms] [34;1m[rows:1][0m SELECT * FROM `games` ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:467
[0m[33m[0.503ms] [34;1m[rows:1][0m DELETE FROM `games`
=== RUN   TestRemoveGameV2/別のゲームが存在してもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:478
[0m[33m[0.724ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('b1277b53-8ed5-4c80-81d3-4df446ddc622','test1','test1',1,'2025-10-31 23:00:24.345'),('1ba40776-8564-41a1-a1f5-7dcc07c2b4ea','test2','test2',1,'2025-10-31 22:00:24.345') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:109
[0m[33m[0.644ms] [34;1m[rows:1][0m UPDATE `games` SET `deleted_at`='2025-10-31 23:00:24.349' WHERE id = 'b1277b53-8ed5-4c80-81d3-4df446ddc622' AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:504
[0m[33m[0.204ms] [34;1m[rows:2][0m SELECT * FROM `games` ORDER BY created_at desc

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:467
[0m[33m[0.465ms] [34;1m[rows:2][0m DELETE FROM `games`
=== RUN   TestRemoveGameV2/ゲームが存在しないのでErrNoRecordDeleted

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:109
[0m[33m[0.503ms] [34;1m[rows:0][0m UPDATE `games` SET `deleted_at`='2025-10-31 23:00:24.35' WHERE id = 'b1277b53-8ed5-4c80-81d3-4df446ddc622' AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:467
[0m[33m[0.356ms] [34;1m[rows:0][0m DELETE FROM `games`
--- PASS: TestRemoveGameV2 (0.01s)
    --- PASS: TestRemoveGameV2/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestRemoveGameV2/別のゲームが存在してもエラーなし (0.00s)
    --- PASS: TestRemoveGameV2/ゲームが存在しないのでErrNoRecordDeleted (0.00s)
=== RUN   TestGetGameV2
=== PAUSE TestGetGameV2
=== RUN   TestGetGamesV2

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:762
[0m[33m[0.184ms] [34;1m[rows:3][0m SELECT * FROM `game_visibility_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:785
[0m[33m[0.185ms] [34;1m[rows:2][0m SELECT * FROM `game_management_role_types`
=== RUN   TestGetGamesV2/条件に合うゲームが無くてもエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.668ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','test','test',1,'2025-10-31 21:00:24.351') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.596ms] [34;1m[rows:0][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at` FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id JOIN (SELECT game_id FROM `game_genre_relations` WHERE genre_id IN ('a75044b0-e6e0-496f-8948-a360c5282541') GROUP BY `game_id` HAVING COUNT(DISTINCT genre_id) = 1) AS sub ON sub.game_id = games.id WHERE game_visibility_types.name IN ('public','limited','private') AND `games`.`deleted_at` IS NULL ORDER BY games.created_at DESC LIMIT 3

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:296
[0m[33m[0.449ms] [34;1m[rows:1][0m SELECT count(*) FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id JOIN (SELECT game_id FROM `game_genre_relations` WHERE genre_id IN ('a75044b0-e6e0-496f-8948-a360c5282541') GROUP BY `game_id` HAVING COUNT(DISTINCT genre_id) = 1) AS sub ON sub.game_id = games.id WHERE game_visibility_types.name IN ('public','limited','private') AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1259
[0m[33m[0.159ms] [34;1m[rows:1][0m SELECT `id` FROM `games` WHERE `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.267ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` = '899040f1-5028-4e03-aec4-4eb696a5c425'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.357ms] [34;1m[rows:0][0m DELETE FROM `game_management_roles` WHERE `game_management_roles`.`game_id` = '899040f1-5028-4e03-aec4-4eb696a5c425'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[1.405ms] [34;1m[rows:1][0m DELETE FROM `games` WHERE `games`.`id` = '899040f1-5028-4e03-aec4-4eb696a5c425'
=== RUN   TestGetGamesV2/visibilityの値がおかしいのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1259
[0m[33m[0.157ms] [34;1m[rows:0][0m SELECT `id` FROM `games` WHERE `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.134ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` IN (NULL)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.591ms] [34;1m[rows:0][0m DELETE FROM `games`
=== RUN   TestGetGamesV2/sortの値がおかしいのでエラーs

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1259
[0m[33m[0.168ms] [34;1m[rows:0][0m SELECT `id` FROM `games` WHERE `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.133ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` IN (NULL)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.619ms] [34;1m[rows:0][0m DELETE FROM `games`
=== RUN   TestGetGamesV2/limitedとoffsetがあってもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.336ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('a75044b0-e6e0-496f-8948-a360c5282541','ジャンル1','2025-10-31 22:00:24.351'),('74aa1c48-7229-45b6-9b8a-46080ad19ae4','ジャンル2','2025-10-31 23:00:24.351') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.288ms] [34;1m[rows:2][0m INSERT INTO `game_genre_relations` (`game_id`,`genre_id`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','a75044b0-e6e0-496f-8948-a360c5282541'),('a32c38bd-2d34-497c-bc71-06d1633fbf1e','74aa1c48-7229-45b6-9b8a-46080ad19ae4') ON DUPLICATE KEY UPDATE `game_id`=`game_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[1.467ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','test','test',1,'2025-10-31 21:00:24.351'),('a32c38bd-2d34-497c-bc71-06d1633fbf1e','テスト2','test',2,'2025-10-31 22:00:24.351') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.281ms] [34;1m[rows:1][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` = '899040f1-5028-4e03-aec4-4eb696a5c425'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.294ms] [34;1m[rows:1][0m SELECT * FROM `game_genres` WHERE `game_genres`.`id` = 'a75044b0-e6e0-496f-8948-a360c5282541'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.299ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`id` = 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[1.482ms] [34;1m[rows:1][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at` FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id WHERE game_visibility_types.name IN ('public','limited','private') AND `games`.`deleted_at` IS NULL ORDER BY games.created_at DESC LIMIT 1 OFFSET 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:296
[0m[33m[0.325ms] [34;1m[rows:1][0m SELECT count(*) FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id WHERE game_visibility_types.name IN ('public','limited','private') AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1259
[0m[33m[0.157ms] [34;1m[rows:2][0m SELECT `id` FROM `games` WHERE `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.267ms] [34;1m[rows:2][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.280ms] [34;1m[rows:0][0m DELETE FROM `game_management_roles` WHERE `game_management_roles`.`game_id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[1.336ms] [34;1m[rows:2][0m DELETE FROM `games` WHERE `games`.`id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')
=== RUN   TestGetGamesV2/順番が最新バージョン順でもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.348ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('a75044b0-e6e0-496f-8948-a360c5282541','ジャンル1','2025-10-31 22:00:24.351'),('74aa1c48-7229-45b6-9b8a-46080ad19ae4','ジャンル2','2025-10-31 23:00:24.351') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.284ms] [34;1m[rows:2][0m INSERT INTO `game_genre_relations` (`game_id`,`genre_id`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','a75044b0-e6e0-496f-8948-a360c5282541'),('a32c38bd-2d34-497c-bc71-06d1633fbf1e','74aa1c48-7229-45b6-9b8a-46080ad19ae4') ON DUPLICATE KEY UPDATE `game_id`=`game_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[1.499ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`,`latest_version_updated_at`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','test','test',1,'2025-10-31 21:00:24.351','2025-10-31 23:00:24.351'),('a32c38bd-2d34-497c-bc71-06d1633fbf1e','テスト2','test',2,'2025-10-31 22:00:24.351','2025-10-31 22:00:24.351') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.293ms] [34;1m[rows:2][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.320ms] [34;1m[rows:2][0m SELECT * FROM `game_genres` WHERE `game_genres`.`id` IN ('a75044b0-e6e0-496f-8948-a360c5282541','74aa1c48-7229-45b6-9b8a-46080ad19ae4')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.284ms] [34;1m[rows:2][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`id` IN (1,2)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[1.495ms] [34;1m[rows:2][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at` FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id WHERE game_visibility_types.name IN ('public','limited','private') AND `games`.`deleted_at` IS NULL ORDER BY games.latest_version_updated_at DESC LIMIT 2

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:296
[0m[33m[0.320ms] [34;1m[rows:1][0m SELECT count(*) FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id WHERE game_visibility_types.name IN ('public','limited','private') AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1259
[0m[33m[0.171ms] [34;1m[rows:2][0m SELECT `id` FROM `games` WHERE `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.265ms] [34;1m[rows:2][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.274ms] [34;1m[rows:0][0m DELETE FROM `game_management_roles` WHERE `game_management_roles`.`game_id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[1.329ms] [34;1m[rows:2][0m DELETE FROM `games` WHERE `games`.`id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')
=== RUN   TestGetGamesV2/ゲームジャンルの指定が複数あってもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.317ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('a75044b0-e6e0-496f-8948-a360c5282541','ジャンル1','2025-10-31 22:00:24.351'),('74aa1c48-7229-45b6-9b8a-46080ad19ae4','ジャンル2','2025-10-31 23:00:24.351') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.294ms] [34;1m[rows:3][0m INSERT INTO `game_genre_relations` (`game_id`,`genre_id`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','a75044b0-e6e0-496f-8948-a360c5282541'),('899040f1-5028-4e03-aec4-4eb696a5c425','74aa1c48-7229-45b6-9b8a-46080ad19ae4'),('a32c38bd-2d34-497c-bc71-06d1633fbf1e','74aa1c48-7229-45b6-9b8a-46080ad19ae4') ON DUPLICATE KEY UPDATE `game_id`=`game_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[1.467ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','test','test',1,'2025-10-31 21:00:24.351'),('a32c38bd-2d34-497c-bc71-06d1633fbf1e','テスト2','test',2,'2025-10-31 22:00:24.351') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.302ms] [34;1m[rows:2][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` = '899040f1-5028-4e03-aec4-4eb696a5c425'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.311ms] [34;1m[rows:2][0m SELECT * FROM `game_genres` WHERE `game_genres`.`id` IN ('74aa1c48-7229-45b6-9b8a-46080ad19ae4','a75044b0-e6e0-496f-8948-a360c5282541')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.290ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`id` = 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[2.044ms] [34;1m[rows:1][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at` FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id JOIN (SELECT game_id FROM `game_genre_relations` WHERE genre_id IN ('a75044b0-e6e0-496f-8948-a360c5282541','74aa1c48-7229-45b6-9b8a-46080ad19ae4') GROUP BY `game_id` HAVING COUNT(DISTINCT genre_id) = 2) AS sub ON sub.game_id = games.id WHERE game_visibility_types.name IN ('public','limited','private') AND `games`.`deleted_at` IS NULL ORDER BY games.created_at DESC LIMIT 2

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:296
[0m[33m[0.481ms] [34;1m[rows:1][0m SELECT count(*) FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id JOIN (SELECT game_id FROM `game_genre_relations` WHERE genre_id IN ('a75044b0-e6e0-496f-8948-a360c5282541','74aa1c48-7229-45b6-9b8a-46080ad19ae4') GROUP BY `game_id` HAVING COUNT(DISTINCT genre_id) = 2) AS sub ON sub.game_id = games.id WHERE game_visibility_types.name IN ('public','limited','private') AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1259
[0m[33m[0.160ms] [34;1m[rows:2][0m SELECT `id` FROM `games` WHERE `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.234ms] [34;1m[rows:0][0m DELETE FROM `game_management_roles` WHERE `game_management_roles`.`game_id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.288ms] [34;1m[rows:3][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[1.788ms] [34;1m[rows:2][0m DELETE FROM `games` WHERE `games`.`id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')
=== RUN   TestGetGamesV2/limitが負なのでErrNegativeLimit

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1259
[0m[33m[0.164ms] [34;1m[rows:0][0m SELECT `id` FROM `games` WHERE `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.153ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` IN (NULL)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.632ms] [34;1m[rows:0][0m DELETE FROM `games`
=== RUN   TestGetGamesV2/limitが0なのにoffsetが正なのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1259
[0m[33m[0.145ms] [34;1m[rows:0][0m SELECT `id` FROM `games` WHERE `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.133ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` IN (NULL)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.578ms] [34;1m[rows:0][0m DELETE FROM `games`
=== RUN   TestGetGamesV2/limitが0(上限なし)でもエラー無し

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.684ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','test','test',1,'2025-10-31 21:00:24.351') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.267ms] [34;1m[rows:0][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` = '899040f1-5028-4e03-aec4-4eb696a5c425'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.275ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`id` = 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[1.032ms] [34;1m[rows:1][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at` FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id WHERE game_visibility_types.name IN ('public','limited','private') AND `games`.`deleted_at` IS NULL ORDER BY games.created_at DESC

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:296
[0m[33m[0.302ms] [34;1m[rows:1][0m SELECT count(*) FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id WHERE game_visibility_types.name IN ('public','limited','private') AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1259
[0m[33m[0.151ms] [34;1m[rows:1][0m SELECT `id` FROM `games` WHERE `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.246ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` = '899040f1-5028-4e03-aec4-4eb696a5c425'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.271ms] [34;1m[rows:0][0m DELETE FROM `game_management_roles` WHERE `game_management_roles`.`game_id` = '899040f1-5028-4e03-aec4-4eb696a5c425'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[1.284ms] [34;1m[rows:1][0m DELETE FROM `games` WHERE `games`.`id` = '899040f1-5028-4e03-aec4-4eb696a5c425'
=== RUN   TestGetGamesV2/特に問題ないのでエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.294ms] [34;1m[rows:1][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('a75044b0-e6e0-496f-8948-a360c5282541','ジャンル1','2025-10-31 22:00:24.351') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.270ms] [34;1m[rows:1][0m INSERT INTO `game_genre_relations` (`game_id`,`genre_id`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','a75044b0-e6e0-496f-8948-a360c5282541') ON DUPLICATE KEY UPDATE `game_id`=`game_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[1.334ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','test','test',1,'2025-10-31 21:00:24.351') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.273ms] [34;1m[rows:1][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` = '899040f1-5028-4e03-aec4-4eb696a5c425'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.294ms] [34;1m[rows:1][0m SELECT * FROM `game_genres` WHERE `game_genres`.`id` = 'a75044b0-e6e0-496f-8948-a360c5282541'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.272ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`id` = 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[1.385ms] [34;1m[rows:1][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at` FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id WHERE game_visibility_types.name IN ('public','limited','private') AND `games`.`deleted_at` IS NULL ORDER BY games.created_at DESC LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:296
[0m[33m[0.323ms] [34;1m[rows:1][0m SELECT count(*) FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id WHERE game_visibility_types.name IN ('public','limited','private') AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1259
[0m[33m[0.155ms] [34;1m[rows:1][0m SELECT `id` FROM `games` WHERE `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.244ms] [34;1m[rows:0][0m DELETE FROM `game_management_roles` WHERE `game_management_roles`.`game_id` = '899040f1-5028-4e03-aec4-4eb696a5c425'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.262ms] [34;1m[rows:1][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` = '899040f1-5028-4e03-aec4-4eb696a5c425'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[1.279ms] [34;1m[rows:1][0m DELETE FROM `games` WHERE `games`.`id` = '899040f1-5028-4e03-aec4-4eb696a5c425'
=== RUN   TestGetGamesV2/visibilityの制限があっても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.330ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('a75044b0-e6e0-496f-8948-a360c5282541','ジャンル1','2025-10-31 22:00:24.351'),('74aa1c48-7229-45b6-9b8a-46080ad19ae4','ジャンル2','2025-10-31 23:00:24.351') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.295ms] [34;1m[rows:4][0m INSERT INTO `game_genre_relations` (`game_id`,`genre_id`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','a75044b0-e6e0-496f-8948-a360c5282541'),('a32c38bd-2d34-497c-bc71-06d1633fbf1e','74aa1c48-7229-45b6-9b8a-46080ad19ae4'),('95521850-e789-431d-a028-7c0cb330552c','74aa1c48-7229-45b6-9b8a-46080ad19ae4'),('95521850-e789-431d-a028-7c0cb330552c','a75044b0-e6e0-496f-8948-a360c5282541') ON DUPLICATE KEY UPDATE `game_id`=`game_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[1.516ms] [34;1m[rows:3][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`,`latest_version_updated_at`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','test','test',1,'2025-10-31 21:00:24.351',DEFAULT),('a32c38bd-2d34-497c-bc71-06d1633fbf1e','テスト2','test',2,'2025-10-31 22:00:24.351',DEFAULT),('95521850-e789-431d-a028-7c0cb330552c','3テスト','test',3,'2025-10-31 22:00:24.351','2025-10-31 22:00:24.351') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.321ms] [34;1m[rows:2][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` IN ('a32c38bd-2d34-497c-bc71-06d1633fbf1e','899040f1-5028-4e03-aec4-4eb696a5c425')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.306ms] [34;1m[rows:2][0m SELECT * FROM `game_genres` WHERE `game_genres`.`id` IN ('a75044b0-e6e0-496f-8948-a360c5282541','74aa1c48-7229-45b6-9b8a-46080ad19ae4')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.301ms] [34;1m[rows:2][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`id` IN (2,1)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[1.839ms] [34;1m[rows:2][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at` FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id WHERE game_visibility_types.name IN ('public','limited') AND `games`.`deleted_at` IS NULL ORDER BY games.created_at DESC LIMIT 3

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:296
[0m[33m[0.333ms] [34;1m[rows:1][0m SELECT count(*) FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id WHERE game_visibility_types.name IN ('public','limited') AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1259
[0m[33m[0.164ms] [34;1m[rows:3][0m SELECT `id` FROM `games` WHERE `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.277ms] [34;1m[rows:4][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','95521850-e789-431d-a028-7c0cb330552c','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.294ms] [34;1m[rows:0][0m DELETE FROM `game_management_roles` WHERE `game_management_roles`.`game_id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','95521850-e789-431d-a028-7c0cb330552c','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[1.372ms] [34;1m[rows:3][0m DELETE FROM `games` WHERE `games`.`id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','95521850-e789-431d-a028-7c0cb330552c','a32c38bd-2d34-497c-bc71-06d1633fbf1e')
=== RUN   TestGetGamesV2/ユーザーの指定があってもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.308ms] [34;1m[rows:2][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','c76be074-8f6e-4264-a183-6dfd34b23a9f',2),('a32c38bd-2d34-497c-bc71-06d1633fbf1e','d2c618de-064f-4f9f-8ea3-3760fe0f09ec',1) ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.334ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('a75044b0-e6e0-496f-8948-a360c5282541','ジャンル1','2025-10-31 22:00:24.351'),('74aa1c48-7229-45b6-9b8a-46080ad19ae4','ジャンル2','2025-10-31 23:00:24.351') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.292ms] [34;1m[rows:2][0m INSERT INTO `game_genre_relations` (`game_id`,`genre_id`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','a75044b0-e6e0-496f-8948-a360c5282541'),('a32c38bd-2d34-497c-bc71-06d1633fbf1e','74aa1c48-7229-45b6-9b8a-46080ad19ae4') ON DUPLICATE KEY UPDATE `game_id`=`game_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[1.846ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','test','test',1,'2025-10-31 21:00:24.351'),('a32c38bd-2d34-497c-bc71-06d1633fbf1e','テスト2','test',2,'2025-10-31 22:00:24.351') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.284ms] [34;1m[rows:1][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` = '899040f1-5028-4e03-aec4-4eb696a5c425'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.276ms] [34;1m[rows:1][0m SELECT * FROM `game_genres` WHERE `game_genres`.`id` = 'a75044b0-e6e0-496f-8948-a360c5282541'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.285ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`id` = 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[1.403ms] [34;1m[rows:1][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at` FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id JOIN game_management_roles ON game_management_roles.game_id = games.id WHERE game_visibility_types.name IN ('public','limited','private') AND game_management_roles.user_id = 'c76be074-8f6e-4264-a183-6dfd34b23a9f' AND `games`.`deleted_at` IS NULL ORDER BY games.created_at DESC LIMIT 2

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:296
[0m[33m[0.327ms] [34;1m[rows:1][0m SELECT count(*) FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id JOIN game_management_roles ON game_management_roles.game_id = games.id WHERE game_visibility_types.name IN ('public','limited','private') AND game_management_roles.user_id = 'c76be074-8f6e-4264-a183-6dfd34b23a9f' AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1259
[0m[33m[0.168ms] [34;1m[rows:2][0m SELECT `id` FROM `games` WHERE `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.293ms] [34;1m[rows:2][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.262ms] [34;1m[rows:2][0m DELETE FROM `game_management_roles` WHERE `game_management_roles`.`game_id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[1.351ms] [34;1m[rows:2][0m DELETE FROM `games` WHERE `games`.`id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')
=== RUN   TestGetGamesV2/複数ゲームがあってもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.354ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('a75044b0-e6e0-496f-8948-a360c5282541','ジャンル1','2025-10-31 22:00:24.351'),('74aa1c48-7229-45b6-9b8a-46080ad19ae4','ジャンル2','2025-10-31 23:00:24.351') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.281ms] [34;1m[rows:2][0m INSERT INTO `game_genre_relations` (`game_id`,`genre_id`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','a75044b0-e6e0-496f-8948-a360c5282541'),('a32c38bd-2d34-497c-bc71-06d1633fbf1e','74aa1c48-7229-45b6-9b8a-46080ad19ae4') ON DUPLICATE KEY UPDATE `game_id`=`game_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[1.944ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','test','test',1,'2025-10-31 21:00:24.351'),('a32c38bd-2d34-497c-bc71-06d1633fbf1e','テスト2','test',2,'2025-10-31 22:00:24.351') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.299ms] [34;1m[rows:2][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` IN ('a32c38bd-2d34-497c-bc71-06d1633fbf1e','899040f1-5028-4e03-aec4-4eb696a5c425')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.278ms] [34;1m[rows:2][0m SELECT * FROM `game_genres` WHERE `game_genres`.`id` IN ('a75044b0-e6e0-496f-8948-a360c5282541','74aa1c48-7229-45b6-9b8a-46080ad19ae4')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.350ms] [34;1m[rows:2][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`id` IN (2,1)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[1.500ms] [34;1m[rows:2][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at` FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id WHERE game_visibility_types.name IN ('public','limited','private') AND `games`.`deleted_at` IS NULL ORDER BY games.created_at DESC LIMIT 2

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:296
[0m[33m[0.317ms] [34;1m[rows:1][0m SELECT count(*) FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id WHERE game_visibility_types.name IN ('public','limited','private') AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1259
[0m[33m[0.151ms] [34;1m[rows:2][0m SELECT `id` FROM `games` WHERE `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.240ms] [34;1m[rows:2][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.240ms] [34;1m[rows:0][0m DELETE FROM `game_management_roles` WHERE `game_management_roles`.`game_id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[1.347ms] [34;1m[rows:2][0m DELETE FROM `games` WHERE `games`.`id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')
=== RUN   TestGetGamesV2/ゲームジャンルの指定があってもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.329ms] [34;1m[rows:2][0m INSERT INTO `game_genres` (`id`,`name`,`created_at`) VALUES ('a75044b0-e6e0-496f-8948-a360c5282541','ジャンル1','2025-10-31 22:00:24.351'),('74aa1c48-7229-45b6-9b8a-46080ad19ae4','ジャンル2','2025-10-31 23:00:24.351') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.264ms] [34;1m[rows:2][0m INSERT INTO `game_genre_relations` (`game_id`,`genre_id`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','a75044b0-e6e0-496f-8948-a360c5282541'),('a32c38bd-2d34-497c-bc71-06d1633fbf1e','74aa1c48-7229-45b6-9b8a-46080ad19ae4') ON DUPLICATE KEY UPDATE `game_id`=`game_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[1.414ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','test','test',1,'2025-10-31 21:00:24.351'),('a32c38bd-2d34-497c-bc71-06d1633fbf1e','テスト2','test',2,'2025-10-31 22:00:24.351') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.286ms] [34;1m[rows:1][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` = '899040f1-5028-4e03-aec4-4eb696a5c425'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.292ms] [34;1m[rows:1][0m SELECT * FROM `game_genres` WHERE `game_genres`.`id` = 'a75044b0-e6e0-496f-8948-a360c5282541'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.379ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`id` = 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[1.614ms] [34;1m[rows:1][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at` FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id JOIN (SELECT game_id FROM `game_genre_relations` WHERE genre_id IN ('a75044b0-e6e0-496f-8948-a360c5282541') GROUP BY `game_id` HAVING COUNT(DISTINCT genre_id) = 1) AS sub ON sub.game_id = games.id WHERE game_visibility_types.name IN ('public','limited','private') AND `games`.`deleted_at` IS NULL ORDER BY games.created_at DESC LIMIT 2

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:296
[0m[33m[0.644ms] [34;1m[rows:1][0m SELECT count(*) FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id JOIN (SELECT game_id FROM `game_genre_relations` WHERE genre_id IN ('a75044b0-e6e0-496f-8948-a360c5282541') GROUP BY `game_id` HAVING COUNT(DISTINCT genre_id) = 1) AS sub ON sub.game_id = games.id WHERE game_visibility_types.name IN ('public','limited','private') AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1259
[0m[33m[0.164ms] [34;1m[rows:2][0m SELECT `id` FROM `games` WHERE `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.240ms] [34;1m[rows:2][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.253ms] [34;1m[rows:0][0m DELETE FROM `game_management_roles` WHERE `game_management_roles`.`game_id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[1.243ms] [34;1m[rows:2][0m DELETE FROM `games` WHERE `games`.`id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','a32c38bd-2d34-497c-bc71-06d1633fbf1e')
=== RUN   TestGetGamesV2/ゲーム名の指定があってもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1279
[0m[33m[0.727ms] [34;1m[rows:3][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('899040f1-5028-4e03-aec4-4eb696a5c425','test','test',1,'2025-10-31 21:00:24.351'),('a32c38bd-2d34-497c-bc71-06d1633fbf1e','テスト2','test',2,'2025-10-31 22:00:24.351'),('95521850-e789-431d-a028-7c0cb330552c','3テスト','test',3,'2025-10-31 23:00:24.351') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.255ms] [34;1m[rows:0][0m SELECT * FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` IN ('95521850-e789-431d-a028-7c0cb330552c','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[0.297ms] [34;1m[rows:2][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`id` IN (3,2)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:261
[0m[33m[1.186ms] [34;1m[rows:2][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at` FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id WHERE game_visibility_types.name IN ('public','limited','private') AND games.name LIKE '%テスト%' AND `games`.`deleted_at` IS NULL ORDER BY games.created_at DESC LIMIT 3

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:296
[0m[33m[0.329ms] [34;1m[rows:1][0m SELECT count(*) FROM `games` JOIN game_visibility_types ON game_visibility_types.id = games.visibility_type_id WHERE game_visibility_types.name IN ('public','limited','private') AND games.name LIKE '%テスト%' AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1259
[0m[33m[0.175ms] [34;1m[rows:3][0m SELECT `id` FROM `games` WHERE `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.253ms] [34;1m[rows:0][0m DELETE FROM `game_genre_relations` WHERE `game_genre_relations`.`game_id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','95521850-e789-431d-a028-7c0cb330552c','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[0.271ms] [34;1m[rows:0][0m DELETE FROM `game_management_roles` WHERE `game_management_roles`.`game_id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','95521850-e789-431d-a028-7c0cb330552c','a32c38bd-2d34-497c-bc71-06d1633fbf1e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1272
[0m[33m[1.268ms] [34;1m[rows:3][0m DELETE FROM `games` WHERE `games`.`id` IN ('899040f1-5028-4e03-aec4-4eb696a5c425','95521850-e789-431d-a028-7c0cb330552c','a32c38bd-2d34-497c-bc71-06d1633fbf1e')
--- PASS: TestGetGamesV2 (0.06s)
    --- PASS: TestGetGamesV2/条件に合うゲームが無くてもエラー無し (0.00s)
    --- PASS: TestGetGamesV2/visibilityの値がおかしいのでエラー (0.00s)
    --- PASS: TestGetGamesV2/sortの値がおかしいのでエラーs (0.00s)
    --- PASS: TestGetGamesV2/limitedとoffsetがあってもエラーなし (0.01s)
    --- PASS: TestGetGamesV2/順番が最新バージョン順でもエラーなし (0.01s)
    --- PASS: TestGetGamesV2/ゲームジャンルの指定が複数あってもエラーなし (0.01s)
    --- PASS: TestGetGamesV2/limitが負なのでErrNegativeLimit (0.00s)
    --- PASS: TestGetGamesV2/limitが0なのにoffsetが正なのでエラー (0.00s)
    --- PASS: TestGetGamesV2/limitが0(上限なし)でもエラー無し (0.00s)
    --- PASS: TestGetGamesV2/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGamesV2/visibilityの制限があっても問題なし (0.01s)
    --- PASS: TestGetGamesV2/ユーザーの指定があってもエラーなし (0.01s)
    --- PASS: TestGetGamesV2/複数ゲームがあってもエラーなし (0.01s)
    --- PASS: TestGetGamesV2/ゲームジャンルの指定があってもエラーなし (0.01s)
    --- PASS: TestGetGamesV2/ゲーム名の指定があってもエラーなし (0.00s)
=== RUN   TestGetGamesByIDsV2
=== PAUSE TestGetGamesByIDsV2
=== RUN   Test_getVisibility
=== RUN   Test_getVisibility/public

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:370
[0m[33m[0.261ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE name = 'public' LIMIT 1
=== RUN   Test_getVisibility/limited

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:370
[0m[33m[0.268ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE name = 'limited' LIMIT 1
=== RUN   Test_getVisibility/private

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:370
[0m[33m[0.260ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE name = 'private' LIMIT 1
=== RUN   Test_getVisibility/invalid
--- PASS: Test_getVisibility (0.00s)
    --- PASS: Test_getVisibility/public (0.00s)
    --- PASS: Test_getVisibility/limited (0.00s)
    --- PASS: Test_getVisibility/private (0.00s)
    --- PASS: Test_getVisibility/invalid (0.00s)
=== RUN   TestCreateGameVersionV2
=== PAUSE TestCreateGameVersionV2
=== RUN   TestGetGameVersionsV2
=== PAUSE TestGetGameVersionsV2
=== RUN   TestGetLatestGameVersionV2
=== PAUSE TestGetLatestGameVersionV2
=== RUN   TestGetGameVersionsByIDsV2
=== PAUSE TestGetGameVersionsByIDsV2
=== RUN   TestSaveGameVideoV2
=== PAUSE TestSaveGameVideoV2
=== RUN   TestGetGameVideo
=== PAUSE TestGetGameVideo
=== RUN   TestGetGameVideos
=== PAUSE TestGetGameVideos
=== CONT  TestSaveEdition
=== CONT  TestSaveGameImageV2
=== CONT  TestGetGameFile
=== CONT  TestCreateLauncherUsers
=== RUN   TestSaveEdition/特に問題ないのでエラーなし
=== CONT  TestGetGameVideo
=== CONT  TestGetGameFilesV2
=== CONT  TestSaveGameFileV2
=== CONT  TestGetGamesByIDsV2

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:649
[0m[33m[0.334ms] [34;1m[rows:3][0m SELECT * FROM `game_file_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:663
[0m[33m[0.656ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestGetGameFile/特に問題ないので問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:59
[0m[33m[2.929ms] [34;1m[rows:3][0m SELECT * FROM `game_image_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:909
[0m[33m[2.954ms] [34;1m[rows:3][0m SELECT * FROM `game_file_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:301
[0m[33m[3.021ms] [34;1m[rows:3][0m SELECT * FROM `game_video_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1370
[0m[33m[3.055ms] [34;1m[rows:2][0m SELECT * FROM `game_management_role_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:374
[0m[33m[3.608ms] [34;1m[rows:3][0m SELECT * FROM `game_file_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:839
[0m[33m[1.255ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('396a393c-71dd-4a01-aaee-c82d86b787fc','1025700d-18c9-4d59-8897-fade6d00a332',1,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 23:00:24.412') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:73
[0m[33m[0.894ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestSaveGameImageV2/特に問題ないので問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:315
[0m[33m[1.040ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestGetGameVideo/特に問題ないので問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:923
[0m[33m[1.084ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestGetGameFilesV2/特に問題ないので問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:388
[0m[33m[0.793ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestSaveGameFileV2/特に問題ないので問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:839
[0m[33m[3.455ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('1025700d-18c9-4d59-8897-fade6d00a332','test','test',1,'2025-10-31 23:00:24.412') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:55
[0m[33m[5.248ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`questionnaire_url`,`created_at`) VALUES ('88a7ad8f-a133-4748-b83d-a9e59a412388','test1','https://example.com','2025-10-31 23:00:24.411') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:139
[0m[33m[0.626ms] [34;1m[rows:1][0m SELECT * FROM `editions` WHERE id = '88a7ad8f-a133-4748-b83d-a9e59a412388' AND `editions`.`deleted_at` IS NULL
=== RUN   TestSaveEdition/別のバージョンが存在してもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:87
[0m[33m[1.453ms] [34;1m[rows:1][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE v2_game_files.id = '396a393c-71dd-4a01-aaee-c82d86b787fc' LIMIT 1
=== RUN   TestGetGameFile/windowsでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1384
[0m[33m[3.303ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestGetGamesByIDsV2/特に問題ないのでエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_user_test.go:61
[0m[33m[6.601ms] [34;1m[rows:1][0m INSERT INTO `launcher_versions` (`id`,`name`,`created_at`) VALUES ('e2dd6735-5d90-4c6e-aeed-2cc756ad7165','TestCreateLauncherUsers','2025-10-31 23:00:24.411') RETURNING `questionnaire_url`,`created_at`,`deleted_at`
=== RUN   TestCreateLauncherUsers/入出力問題ないのでエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:1101
[0m[33m[0.717ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('71601e8b-b321-4d92-b4d2-41c7146b2628','d0fb105f-0278-4144-98b3-73fc69ed384a',1,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 23:00:24.415') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:209
[0m[33m[3.619ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('06222315-4b45-48ac-abef-30de442df6a5','test','test',1,'2025-10-31 23:00:24.415') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:468
[0m[33m[0.948ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('be405bef-a831-4f71-97a4-ca441286d3df','e045bfa9-edb3-44a5-b99f-7b46027f4a1e',1,'2025-10-31 23:00:24.415') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_user.go:47 [35;1mError 1054 (42S22): Unknown column 'edition_id' in 'field list'
[0m[33m[1.282ms] [34;1m[rows:0][0m INSERT INTO `launcher_users` (`id`,`edition_id`,`product_key`,`created_at`) VALUES ('28f316b0-b875-44d5-9a57-5b270296d6ed','e2dd6735-5d90-4c6e-aeed-2cc756ad7165','bKVEH-CB7I5-965ds-tMKFS-ibjSN','2025-10-31 23:00:24.417') RETURNING `created_at`,`deleted_at`
    launcher_user_test.go:143: 
        	Error Trace:	/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_user_test.go:143
        	Error:      	Received unexpected error:
        	            	failed to create launcher users: Error 1054 (42S22): Unknown column 'edition_id' in 'field list'
        	Test:       	TestCreateLauncherUsers/入出力問題ないのでエラーなし
=== RUN   TestCreateLauncherUsers/ユーザーが空でもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:554
[0m[33m[3.444ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('c3820042-8f69-40cb-8db2-18dfff6e5213','test','test',1,'2025-10-31 23:00:24.416') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`
=== RUN   TestCreateLauncherUsers/ユーザーが複数人でもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:48
[0m[33m[0.821ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'jpeg' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:1101
[0m[33m[4.487ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('d0fb105f-0278-4144-98b3-73fc69ed384a','test','test',1,'2025-10-31 23:00:24.415') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1520
[0m[33m[2.344ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('bbaf22df-aa79-4d60-862c-f64f386e4ba2','test1','test1',1,'2025-10-31 23:00:24.411') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:468
[0m[33m[4.650ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('e045bfa9-edb3-44a5-b99f-7b46027f4a1e','test','test',1,'2025-10-31 23:00:24.415') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:50
[0m[33m[0.945ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'jar' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:839
[0m[33m[1.306ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('c2f5ecca-9227-4ca4-9375-0e5de8048b9e','06767811-e9bd-4f44-bdd2-bc9a0f2e748b',2,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 23:00:24.412') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_user.go:47 [35;1mError 1054 (42S22): Unknown column 'edition_id' in 'field list'
[0m[33m[1.389ms] [34;1m[rows:0][0m INSERT INTO `launcher_users` (`id`,`edition_id`,`product_key`,`created_at`) VALUES ('32c81873-267e-4bf0-a485-f1fceb8d6cb1','e2dd6735-5d90-4c6e-aeed-2cc756ad7165','RMMb8-R7BxN-rqvZg-GKCR6-yBh57','2025-10-31 23:00:24.419'),('8b3eb539-c976-47d4-98fb-ea84f110d7eb','e2dd6735-5d90-4c6e-aeed-2cc756ad7165','0n0LM-m6E6u-gXgJS-hVqs5-W74RZ','2025-10-31 23:00:24.419') RETURNING `created_at`,`deleted_at`
    launcher_user_test.go:143: 
        	Error Trace:	/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_user_test.go:143
        	Error:      	Received unexpected error:
        	            	failed to create launcher users: Error 1054 (42S22): Unknown column 'edition_id' in 'field list'
        	Test:       	TestCreateLauncherUsers/ユーザーが複数人でもエラーなし
=== RUN   TestCreateLauncherUsers/プロダクトキーが同一なのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:114
[0m[33m[3.795ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`questionnaire_url`,`created_at`) VALUES ('9d18d556-3921-4d34-a460-20f61b365184','test3','https://example.com','2025-10-31 23:00:24.411') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:97
[0m[33m[1.084ms] [34;1m[rows:1][0m SELECT `v2_game_videos`.`id`,`v2_game_videos`.`game_id`,`v2_game_videos`.`video_type_id`,`v2_game_videos`.`created_at`,`GameVideoType`.`id` AS `GameVideoType__id`,`GameVideoType`.`name` AS `GameVideoType__name`,`GameVideoType`.`active` AS `GameVideoType__active` FROM `v2_game_videos` LEFT JOIN `game_video_types` `GameVideoType` ON `v2_game_videos`.`video_type_id` = `GameVideoType`.`id` WHERE v2_game_videos.id = 'be405bef-a831-4f71-97a4-ca441286d3df' LIMIT 1
=== RUN   TestGetGameVideo/mkv問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:839
[0m[33m[3.958ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('06767811-e9bd-4f44-bdd2-bc9a0f2e748b','test','test',1,'2025-10-31 23:00:24.412') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:140
[0m[33m[1.529ms] [34;1m[rows:1][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE game_id = 'd0fb105f-0278-4144-98b3-73fc69ed384a' ORDER BY created_at DESC
=== RUN   TestGetGameFilesV2/windowsでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:55
[0m[33m[2.732ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('6eacd4c0-2f35-4ea9-beab-0a15131756a3','06222315-4b45-48ac-abef-30de442df6a5',1,'2025-10-31 23:00:24.415') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:325
[0m[33m[0.936ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`id` = 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:325
[0m[33m[2.404ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE id IN ('bbaf22df-aa79-4d60-862c-f64f386e4ba2') AND `games`.`deleted_at` IS NULL
=== RUN   TestGetGamesByIDsV2/gameIDが複数でもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:87
[0m[33m[1.112ms] [34;1m[rows:1][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE v2_game_files.id = 'c2f5ecca-9227-4ca4-9375-0e5de8048b9e' LIMIT 1
=== RUN   TestGetGameFile/macでも問題なし

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_user.go:47 [35;1mError 1054 (42S22): Unknown column 'edition_id' in 'field list'
[0m[33m[2.169ms] [34;1m[rows:0][0m INSERT INTO `launcher_users` (`id`,`edition_id`,`product_key`,`created_at`) VALUES ('c0940de6-c65c-49e2-95b3-5e0911221b9e','e2dd6735-5d90-4c6e-aeed-2cc756ad7165','beBOg-t3HvJ-uCzp3-Bp2bA-nuH9N','2025-10-31 23:00:24.421'),('73fb81d9-d620-4807-9b84-3ca933a11055','e2dd6735-5d90-4c6e-aeed-2cc756ad7165','beBOg-t3HvJ-uCzp3-Bp2bA-nuH9N','2025-10-31 23:00:24.421') RETURNING `created_at`,`deleted_at`
=== RUN   TestCreateLauncherUsers/ランチャーバージョンが存在しないのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:237
[0m[33m[1.067ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_images` WHERE game_id = '06222315-4b45-48ac-abef-30de442df6a5'
=== RUN   TestSaveGameImageV2/pngでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:468
[0m[33m[1.167ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('379044fc-bf6a-41da-b1b6-dda4bb217d14','ae3cf3f5-9f92-4dc7-b1cb-58153acaf659',2,'2025-10-31 23:00:24.415') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_user.go:47 [35;1mError 1054 (42S22): Unknown column 'edition_id' in 'field list'
[0m[33m[1.820ms] [34;1m[rows:0][0m INSERT INTO `launcher_users` (`id`,`edition_id`,`product_key`,`created_at`) VALUES ('14a2c777-435a-4ab5-8bfb-a3e21f1001d0','6d402043-ff84-4f1d-9406-f5bd0f1e2fcd','LbJhM-B6HiI-TViLH-okatF-S6H43','2025-10-31 23:00:24.423') RETURNING `created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:57
[0m[33m[5.015ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('a789e234-094f-4aba-99a0-c97d529504b4','c3820042-8f69-40cb-8db2-18dfff6e5213',1,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 23:00:24.415') RETURNING `created_at`
--- FAIL: TestCreateLauncherUsers (0.01s)
    --- FAIL: TestCreateLauncherUsers/入出力問題ないのでエラーなし (0.00s)
    --- PASS: TestCreateLauncherUsers/ユーザーが空でもエラーなし (0.00s)
    --- FAIL: TestCreateLauncherUsers/ユーザーが複数人でもエラーなし (0.00s)
    --- PASS: TestCreateLauncherUsers/プロダクトキーが同一なのでエラー (0.00s)
    --- PASS: TestCreateLauncherUsers/ランチャーバージョンが存在しないのでエラー (0.00s)
=== CONT  TestGetGameVideos

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:536
[0m[33m[0.564ms] [34;1m[rows:3][0m SELECT * FROM `game_video_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:839
[0m[33m[1.599ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('8eaef3b4-1d00-45f9-9e3b-4999a1cb8f90','611efcdb-91fe-4f19-851f-0ab57142d430',3,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 23:00:24.412') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:468
[0m[33m[4.747ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('ae3cf3f5-9f92-4dc7-b1cb-58153acaf659','test','test',1,'2025-10-31 23:00:24.415') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:55
[0m[33m[4.893ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`questionnaire_url`,`created_at`) VALUES ('c3dce4b6-4946-49ca-8ad4-40f257a6b413','test2','https://example.com','2025-10-31 23:00:24.411') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:582
[0m[33m[0.951ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_files` WHERE game_id = 'c3820042-8f69-40cb-8db2-18dfff6e5213'
=== RUN   TestSaveGameFileV2/windowsでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1520
[0m[33m[4.174ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('2389c535-e0a2-4874-a019-eddadbf264da','test2','test2',1,'2025-10-31 23:00:24.411'),('55afff87-a7e5-4315-b9af-bc6441ede05d','test3','test3',1,'2025-10-31 22:00:24.411') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:97
[0m[33m[1.047ms] [34;1m[rows:1][0m SELECT `v2_game_videos`.`id`,`v2_game_videos`.`game_id`,`v2_game_videos`.`video_type_id`,`v2_game_videos`.`created_at`,`GameVideoType`.`id` AS `GameVideoType__id`,`GameVideoType`.`name` AS `GameVideoType__name`,`GameVideoType`.`active` AS `GameVideoType__active` FROM `v2_game_videos` LEFT JOIN `game_video_types` `GameVideoType` ON `v2_game_videos`.`video_type_id` = `GameVideoType`.`id` WHERE v2_game_videos.id = '379044fc-bf6a-41da-b1b6-dda4bb217d14' LIMIT 1
=== RUN   TestGetGameVideo/m4v問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:839
[0m[33m[4.548ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('611efcdb-91fe-4f19-851f-0ab57142d430','test','test',1,'2025-10-31 23:00:24.412') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:209
[0m[33m[3.773ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('8620b351-149b-4477-a963-1b7548dd6bce','test','test',1,'2025-10-31 23:00:24.423') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:550
[0m[33m[1.351ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:139
[0m[33m[1.168ms] [34;1m[rows:1][0m SELECT * FROM `editions` WHERE id = 'c3dce4b6-4946-49ca-8ad4-40f257a6b413' AND `editions`.`deleted_at` IS NULL
=== RUN   TestGetGameVideos/特に問題ないので問題なし
=== RUN   TestSaveEdition/アンケートが無くてもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:1101
[0m[33m[1.563ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('6a0255fc-c75f-4feb-ad01-ccab66efa9b8','b87b5a80-13fe-4111-985b-247652b424a7',2,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 23:00:24.415') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:87
[0m[33m[1.421ms] [34;1m[rows:1][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE v2_game_files.id = '8eaef3b4-1d00-45f9-9e3b-4999a1cb8f90' LIMIT 1
=== RUN   TestGetGameFile/lockTypeがRecordでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:48
[0m[33m[1.490ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'png' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:554
[0m[33m[2.740ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('8b08643a-5f94-4a5b-87e9-ff828f47a772','test','test',1,'2025-10-31 23:00:24.426') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:325
[0m[33m[1.279ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`id` = 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:325
[0m[33m[2.662ms] [34;1m[rows:2][0m SELECT * FROM `games` WHERE id IN ('2389c535-e0a2-4874-a019-eddadbf264da','55afff87-a7e5-4315-b9af-bc6441ede05d') AND `games`.`deleted_at` IS NULL
=== RUN   TestGetGamesByIDsV2/違うgameIDのゲームは取らない

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:1101
[0m[33m[8.246ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('b87b5a80-13fe-4111-985b-247652b424a7','test','test',1,'2025-10-31 23:00:24.415') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:50
[0m[33m[0.964ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'windows' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:468
[0m[33m[1.107ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('47c85591-1b1c-4dc5-ba76-941e3ded1af6','da39655f-420a-4519-ad9a-f0179e17f607',3,'2025-10-31 23:00:24.415') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:140
[0m[33m[1.358ms] [34;1m[rows:1][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE game_id = 'b87b5a80-13fe-4111-985b-247652b424a7' ORDER BY created_at DESC
=== RUN   TestGetGameFilesV2/macでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:55
[0m[33m[2.603ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('e83c24c5-3778-494b-8121-6ef0351108ea','8620b351-149b-4477-a963-1b7548dd6bce',2,'2025-10-31 23:00:24.415') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:839
[0m[33m[0.992ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('db0bf0fb-cbf6-4354-a380-258b10398125','4659fbaa-e7e8-4845-9311-cd88c1b44d28',1,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 23:00:24.412') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:468
[0m[33m[4.844ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('da39655f-420a-4519-ad9a-f0179e17f607','test','test',1,'2025-10-31 23:00:24.415') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:57
[0m[33m[2.229ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('826d7511-1e81-47b4-b344-79003a19c973','8b08643a-5f94-4a5b-87e9-ff828f47a772',2,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 23:00:24.415') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1520
[0m[33m[2.889ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('7a61e3f8-40d4-4975-90c0-8bc2fe6bfae4','test4','test4',1,'2025-10-31 23:00:24.411'),('ccc2c3ee-f8e8-4d41-8484-90de72cc9469','test5','test5',1,'2025-10-31 23:00:24.411') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:703
[0m[33m[1.157ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('50252a79-c04c-429d-bb78-34df5d8edc6a','2848d343-a447-4c64-af26-e02f2997e066',1,'2025-10-31 23:00:24.427') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:237
[0m[33m[1.008ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_images` WHERE game_id = '8620b351-149b-4477-a963-1b7548dd6bce'
=== RUN   TestSaveGameImageV2/gifでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:97
[0m[33m[1.430ms] [34;1m[rows:1][0m SELECT `v2_game_videos`.`id`,`v2_game_videos`.`game_id`,`v2_game_videos`.`video_type_id`,`v2_game_videos`.`created_at`,`GameVideoType`.`id` AS `GameVideoType__id`,`GameVideoType`.`name` AS `GameVideoType__name`,`GameVideoType`.`active` AS `GameVideoType__active` FROM `v2_game_videos` LEFT JOIN `game_video_types` `GameVideoType` ON `v2_game_videos`.`video_type_id` = `GameVideoType`.`id` WHERE v2_game_videos.id = '47c85591-1b1c-4dc5-ba76-941e3ded1af6' LIMIT 1
=== RUN   TestGetGameVideo/lockTypeがRecordでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:703
[0m[33m[6.422ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('2848d343-a447-4c64-af26-e02f2997e066','test','test',1,'2025-10-31 23:00:24.427') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:839
[0m[33m[5.263ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('4659fbaa-e7e8-4845-9311-cd88c1b44d28','test','test',1,'2025-10-31 23:00:24.412') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:1101
[0m[33m[1.412ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('81994c3e-2ff6-4a53-82f0-24d33ac5652a','8071d4a7-f814-4de3-afbf-23df466c6fff',3,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 23:00:24.415') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:55
[0m[33m[6.731ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`created_at`) VALUES ('142e4943-6c21-46bb-869a-5a9c26e8353d','test4','2025-10-31 23:00:24.411') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:582
[0m[33m[1.857ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_files` WHERE game_id = '8b08643a-5f94-4a5b-87e9-ff828f47a772'
=== RUN   TestSaveGameFileV2/macでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:136
[0m[33m[1.170ms] [34;1m[rows:1][0m SELECT `v2_game_videos`.`id`,`v2_game_videos`.`game_id`,`v2_game_videos`.`video_type_id`,`v2_game_videos`.`created_at`,`GameVideoType`.`id` AS `GameVideoType__id`,`GameVideoType`.`name` AS `GameVideoType__name`,`GameVideoType`.`active` AS `GameVideoType__active` FROM `v2_game_videos` LEFT JOIN `game_video_types` `GameVideoType` ON `v2_game_videos`.`video_type_id` = `GameVideoType`.`id` WHERE game_id = '2848d343-a447-4c64-af26-e02f2997e066' ORDER BY created_at DESC
=== RUN   TestGetGameVideos/lockTypeがRecordでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:1101
[0m[33m[3.961ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('8071d4a7-f814-4de3-afbf-23df466c6fff','test','test',1,'2025-10-31 23:00:24.415') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:139
[0m[33m[1.168ms] [34;1m[rows:1][0m SELECT * FROM `editions` WHERE id = '142e4943-6c21-46bb-869a-5a9c26e8353d' AND `editions`.`deleted_at` IS NULL
=== RUN   TestSaveEdition/同じバージョンIDが存在するのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:87
[0m[33m[1.554ms] [34;1m[rows:1][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE v2_game_files.id = 'db0bf0fb-cbf6-4354-a380-258b10398125' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:325
[0m[33m[1.410ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`id` = 1
=== RUN   TestGetGameFile/複数の画像があっても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:325
[0m[33m[3.292ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE id IN ('7a61e3f8-40d4-4975-90c0-8bc2fe6bfae4') AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:209
[0m[33m[2.985ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('041b3f80-48d0-4504-a643-807fadcd7465','test','test',1,'2025-10-31 23:00:24.433') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`
=== RUN   TestGetGamesByIDsV2/削除されたゲームは取らない

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:140
[0m[33m[1.031ms] [34;1m[rows:1][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE game_id = '8071d4a7-f814-4de3-afbf-23df466c6fff' ORDER BY created_at DESC
=== RUN   TestGetGameFilesV2/lockTypeがRecordでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:48
[0m[33m[0.927ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'gif' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:468
[0m[33m[1.391ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('8352c520-d4ca-4f97-9501-12b234e2d4e8','3d3430b1-0be6-46e2-8aa2-475673bab55b',1,'2025-10-31 23:00:24.415') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:703
[0m[33m[0.888ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('ee530b28-bb7d-4722-a56e-159640b75225','fb14ac73-85c3-496b-8d56-46b90d599413',1,'2025-10-31 23:00:24.427') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:839
[0m[33m[0.830ms] [34;1m[rows:2][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('a5c4add5-3683-4e0b-88fe-f3b2896a551e','3a5850eb-8705-4926-a1ee-e02dd95cd055',1,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 23:00:24.412'),('1b571ced-14bb-4171-b2cf-e899d907e946','3a5850eb-8705-4926-a1ee-e02dd95cd055',2,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 23:00:24.412') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:1101
[0m[33m[0.806ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('3d205141-d3ed-48a1-8212-1fc5137fc245','dffb2a14-644b-4e7f-8c97-3601ff3f60ec',1,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 23:00:24.415') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition_test.go:114
[0m[33m[3.648ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`questionnaire_url`,`created_at`) VALUES ('447cd48d-9cab-4789-a229-089ccfe82bcd','test6','https://example.com','2025-10-31 23:00:24.411') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:468
[0m[33m[5.786ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('3d3430b1-0be6-46e2-8aa2-475673bab55b','test','test',1,'2025-10-31 23:00:24.415') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:839
[0m[33m[3.699ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('3a5850eb-8705-4926-a1ee-e02dd95cd055','test','test',1,'2025-10-31 23:00:24.412') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:55
[0m[33m[2.542ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('d1e5f7b3-a7ac-4f25-aaac-3deb6dee3b4e','041b3f80-48d0-4504-a643-807fadcd7465',3,'2025-10-31 23:00:24.415') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:703
[0m[33m[4.315ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('fb14ac73-85c3-496b-8d56-46b90d599413','test','test',1,'2025-10-31 23:00:24.427') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:1101
[0m[33m[3.106ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('dffb2a14-644b-4e7f-8c97-3601ff3f60ec','test','test',1,'2025-10-31 23:00:24.415') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:554
[0m[33m[5.160ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('05b872e7-9366-417a-b798-ae34a99894ae','test','test',1,'2025-10-31 23:00:24.434') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1520
[0m[33m[3.636ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`,`deleted_at`) VALUES ('9207e664-d1b3-4159-813c-5c5d9eeb6e2a','test6','test6',1,'2025-10-31 22:00:24.411','2025-10-31 23:00:24.411') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:237
[0m[33m[0.811ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_images` WHERE game_id = '041b3f80-48d0-4504-a643-807fadcd7465'
=== RUN   TestSaveGameImageV2/想定外の画像の種類なのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:97
[0m[33m[1.186ms] [34;1m[rows:1][0m SELECT `v2_game_videos`.`id`,`v2_game_videos`.`game_id`,`v2_game_videos`.`video_type_id`,`v2_game_videos`.`created_at`,`GameVideoType`.`id` AS `GameVideoType__id`,`GameVideoType`.`name` AS `GameVideoType__name`,`GameVideoType`.`active` AS `GameVideoType__active` FROM `v2_game_videos` LEFT JOIN `game_video_types` `GameVideoType` ON `v2_game_videos`.`video_type_id` = `GameVideoType`.`id` WHERE v2_game_videos.id = '8352c520-d4ca-4f97-9501-12b234e2d4e8' LIMIT 1 FOR UPDATE
=== RUN   TestGetGameVideo/複数の動画があっても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:87
[0m[33m[1.251ms] [34;1m[rows:1][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE v2_game_files.id = 'a5c4add5-3683-4e0b-88fe-f3b2896a551e' LIMIT 1
=== RUN   TestGetGameFile/ファイルが存在しないのでRecordNotFound

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:136
[0m[33m[1.435ms] [34;1m[rows:1][0m SELECT `v2_game_videos`.`id`,`v2_game_videos`.`game_id`,`v2_game_videos`.`video_type_id`,`v2_game_videos`.`created_at`,`GameVideoType`.`id` AS `GameVideoType__id`,`GameVideoType`.`name` AS `GameVideoType__name`,`GameVideoType`.`active` AS `GameVideoType__active` FROM `v2_game_videos` LEFT JOIN `game_video_types` `GameVideoType` ON `v2_game_videos`.`video_type_id` = `GameVideoType`.`id` WHERE game_id = 'fb14ac73-85c3-496b-8d56-46b90d599413' ORDER BY created_at DESC FOR UPDATE
=== RUN   TestGetGameVideos/複数の動画があっても問題なし

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/edition.go:55 [35;1mError 1062 (23000): Duplicate entry '447cd48d-9cab-4789-a229-089ccfe82bcd' for key 'PRIMARY'
[0m[33m[2.377ms] [34;1m[rows:0][0m INSERT INTO `editions` (`id`,`name`,`questionnaire_url`,`created_at`) VALUES ('447cd48d-9cab-4789-a229-089ccfe82bcd','test5','https://example.com','2025-10-31 23:00:24.411') RETURNING `questionnaire_url`,`created_at`,`deleted_at`
=== CONT  TestGetGameVersionsByIDsV2
--- PASS: TestSaveEdition (0.03s)
    --- PASS: TestSaveEdition/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestSaveEdition/別のバージョンが存在してもエラーなし (0.00s)
    --- PASS: TestSaveEdition/アンケートが無くてもエラーなし (0.00s)
    --- PASS: TestSaveEdition/同じバージョンIDが存在するのでエラー (0.00s)

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:87 [35;1mrecord not found
[0m[33m[0.992ms] [34;1m[rows:0][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE v2_game_files.id = 'dd5b9898-6d4b-4fc4-a1cc-62c1e0adb066' LIMIT 1
--- PASS: TestGetGameFile (0.03s)
    --- PASS: TestGetGameFile/特に問題ないので問題なし (0.01s)
    --- PASS: TestGetGameFile/windowsでも問題なし (0.01s)
    --- PASS: TestGetGameFile/macでも問題なし (0.01s)
    --- PASS: TestGetGameFile/lockTypeがRecordでも問題なし (0.01s)
    --- PASS: TestGetGameFile/複数の画像があっても問題なし (0.01s)
    --- PASS: TestGetGameFile/ファイルが存在しないのでRecordNotFound (0.00s)
=== CONT  TestSaveGameVideoV2

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2874
[0m[33m[0.790ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'jpeg' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:58
[0m[33m[0.711ms] [34;1m[rows:3][0m SELECT * FROM `game_video_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:50
[0m[33m[3.901ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'mac' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:140
[0m[33m[4.144ms] [34;1m[rows:1][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE game_id = 'dffb2a14-644b-4e7f-8c97-3601ff3f60ec' ORDER BY created_at DESC FOR UPDATE
=== RUN   TestGetGameFilesV2/複数のファイルがあっても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:72
[0m[33m[1.124ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestSaveGameVideoV2/特に問題ないので問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2884
[0m[33m[1.346ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mp4' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:209
[0m[33m[3.674ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('087b73ed-bda1-4d69-ae0c-7f143977c26a','test','test',1,'2025-10-31 23:00:24.44') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:325
[0m[33m[4.545ms] [34;1m[rows:0][0m SELECT * FROM `games` WHERE id IN ('9207e664-d1b3-4159-813c-5c5d9eeb6e2a') AND `games`.`deleted_at` IS NULL
=== RUN   TestGetGamesByIDsV2/ゲームが存在しなくても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:468
[0m[33m[1.837ms] [34;1m[rows:2][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('21a9724e-17fe-4681-bac8-8b24916e0e62','7b8a0924-dc6a-43e2-af70-ba13a6ed9309',1,'2025-10-31 23:00:24.415'),('d0b6aba2-7e23-49c3-b9c4-d97303c8eba6','7b8a0924-dc6a-43e2-af70-ba13a6ed9309',1,'2025-10-31 13:00:24.415') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:703
[0m[33m[1.473ms] [34;1m[rows:2][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('8763d630-681b-4f15-a082-96ea331058ac','edb56be2-fc0e-48f6-8385-c6c17bdea8df',1,'2025-10-31 23:00:24.427'),('258b4d34-b828-4fa0-a0ca-67a6093cce55','edb56be2-fc0e-48f6-8385-c6c17bdea8df',1,'2025-10-31 13:00:24.427') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2894
[0m[33m[1.154ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'jar' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:468
[0m[33m[4.886ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('7b8a0924-dc6a-43e2-af70-ba13a6ed9309','test','test',1,'2025-10-31 23:00:24.415') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:237
[0m[33m[1.608ms] [34;1m[rows:0][0m SELECT * FROM `v2_game_images` WHERE game_id = '087b73ed-bda1-4d69-ae0c-7f143977c26a'
=== RUN   TestSaveGameImageV2/既に画像が存在しても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2874
[0m[33m[1.068ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'jpeg' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:703
[0m[33m[4.929ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('edb56be2-fc0e-48f6-8385-c6c17bdea8df','test','test',1,'2025-10-31 23:00:24.427') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:57
[0m[33m[3.013ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('a8dfd990-80d3-4b4a-a289-620feb0f8e51','05b872e7-9366-417a-b798-ae34a99894ae',3,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 23:00:24.415') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:1101
[0m[33m[1.101ms] [34;1m[rows:2][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('d1a80216-822b-47e2-8134-78faf9226db3','4a65e42e-0e24-4bee-a741-1e7f2f98e726',1,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 23:00:24.415'),('a8619f37-6429-4de4-a8ab-16255132a6d0','4a65e42e-0e24-4bee-a741-1e7f2f98e726',2,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 22:00:24.415') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:97
[0m[33m[1.018ms] [34;1m[rows:1][0m SELECT `v2_game_videos`.`id`,`v2_game_videos`.`game_id`,`v2_game_videos`.`video_type_id`,`v2_game_videos`.`created_at`,`GameVideoType`.`id` AS `GameVideoType__id`,`GameVideoType`.`name` AS `GameVideoType__name`,`GameVideoType`.`active` AS `GameVideoType__active` FROM `v2_game_videos` LEFT JOIN `game_video_types` `GameVideoType` ON `v2_game_videos`.`video_type_id` = `GameVideoType`.`id` WHERE v2_game_videos.id = '21a9724e-17fe-4681-bac8-8b24916e0e62' LIMIT 1
=== RUN   TestGetGameVideo/動画が存在しないのでRecordNotFound

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:582
[0m[33m[0.873ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_files` WHERE game_id = '05b872e7-9366-417a-b798-ae34a99894ae'
=== RUN   TestSaveGameFileV2/想定外の画像の種類なのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:208
[0m[33m[3.792ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('fb1c219c-c0fb-4846-82e1-058769ab555a','test','test',1,'2025-10-31 23:00:24.444') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2884
[0m[33m[1.383ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mp4' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:325
[0m[33m[3.641ms] [34;1m[rows:0][0m SELECT * FROM `games` WHERE id IN ('20b48410-5f25-4959-b77a-b6ad7f4aa6cf') AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:136
[0m[33m[1.465ms] [34;1m[rows:2][0m SELECT `v2_game_videos`.`id`,`v2_game_videos`.`game_id`,`v2_game_videos`.`video_type_id`,`v2_game_videos`.`created_at`,`GameVideoType`.`id` AS `GameVideoType__id`,`GameVideoType`.`name` AS `GameVideoType__name`,`GameVideoType`.`active` AS `GameVideoType__active` FROM `v2_game_videos` LEFT JOIN `game_video_types` `GameVideoType` ON `v2_game_videos`.`video_type_id` = `GameVideoType`.`id` WHERE game_id = 'edb56be2-fc0e-48f6-8385-c6c17bdea8df' ORDER BY created_at DESC
=== RUN   TestGetGamesByIDsV2/lockTypeがrecordでも問題なし
=== RUN   TestGetGameVideos/いろんなタイプの動画があっても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:1101
[0m[33m[5.052ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('4a65e42e-0e24-4bee-a741-1e7f2f98e726','test','test',1,'2025-10-31 23:00:24.415') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:209
[0m[33m[1.863ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('438577e6-00f7-41f6-805c-a694e38294e8','160fd88a-aca9-4ea6-8fdb-606f22339cbd',2,'2025-10-31 13:00:24.415') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:97 [35;1mrecord not found
[0m[33m[1.965ms] [34;1m[rows:0][0m SELECT `v2_game_videos`.`id`,`v2_game_videos`.`game_id`,`v2_game_videos`.`video_type_id`,`v2_game_videos`.`created_at`,`GameVideoType`.`id` AS `GameVideoType__id`,`GameVideoType`.`name` AS `GameVideoType__name`,`GameVideoType`.`active` AS `GameVideoType__active` FROM `v2_game_videos` LEFT JOIN `game_video_types` `GameVideoType` ON `v2_game_videos`.`video_type_id` = `GameVideoType`.`id` WHERE v2_game_videos.id = '901a58fe-dde7-429a-97ad-1be1a41952b8' LIMIT 1
--- PASS: TestGetGameVideo (0.04s)
    --- PASS: TestGetGameVideo/特に問題ないので問題なし (0.01s)
    --- PASS: TestGetGameVideo/mkv問題なし (0.01s)
    --- PASS: TestGetGameVideo/m4v問題なし (0.01s)
    --- PASS: TestGetGameVideo/lockTypeがRecordでも問題なし (0.01s)
    --- PASS: TestGetGameVideo/複数の動画があっても問題なし (0.01s)
    --- PASS: TestGetGameVideo/動画が存在しないのでRecordNotFound (0.00s)
=== CONT  TestGetGameVersionsV2

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:62
[0m[33m[2.238ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mp4' AND active = true LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2894
[0m[33m[2.150ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'jar' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:209
[0m[33m[5.198ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('160fd88a-aca9-4ea6-8fdb-606f22339cbd','test','test',1,'2025-10-31 23:00:24.446') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2874
[0m[33m[1.086ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'jpeg' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1034
[0m[33m[1.784ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'jpeg' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:140
[0m[33m[2.395ms] [34;1m[rows:2][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE game_id = '4a65e42e-0e24-4bee-a741-1e7f2f98e726' ORDER BY created_at DESC

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:554
[0m[33m[4.016ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('3b34fc48-af80-4e3b-a168-679aa8674562','test','test',1,'2025-10-31 23:00:24.448') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`
=== RUN   TestGetGameFilesV2/ファイルが存在しなくても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2884
[0m[33m[1.184ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mp4' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:48
[0m[33m[1.325ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'jpeg' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1520
[0m[33m[4.372ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('fb0d06cb-9c3e-47c3-8b32-0a510bf161b4','test8','test8',1,'2025-10-31 23:00:24.411') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1044
[0m[33m[1.204ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mp4' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:140
[0m[33m[1.098ms] [34;1m[rows:0][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE game_id = '5a222899-9f11-48b6-a27b-c457a9fc72b8' ORDER BY created_at DESC

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:582
[0m[33m[1.184ms] [34;1m[rows:0][0m SELECT * FROM `v2_game_files` WHERE game_id = '3b34fc48-af80-4e3b-a168-679aa8674562'
--- PASS: TestGetGameFilesV2 (0.04s)
    --- PASS: TestGetGameFilesV2/特に問題ないので問題なし (0.01s)
    --- PASS: TestGetGameFilesV2/windowsでも問題なし (0.01s)
    --- PASS: TestGetGameFilesV2/macでも問題なし (0.01s)
    --- PASS: TestGetGameFilesV2/lockTypeがRecordでも問題なし (0.01s)
    --- PASS: TestGetGameFilesV2/複数のファイルがあっても問題なし (0.01s)
    --- PASS: TestGetGameFilesV2/ファイルが存在しなくても問題なし (0.00s)
=== CONT  TestGetLatestGameVersionV2
=== RUN   TestSaveGameFileV2/既にファイルが存在しても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2894
[0m[33m[1.518ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'jar' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1834
[0m[33m[1.162ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'jpeg' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:325
[0m[33m[0.996ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`id` = 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:325
[0m[33m[2.669ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE id IN ('fb0d06cb-9c3e-47c3-8b32-0a510bf161b4') AND `games`.`deleted_at` IS NULL FOR UPDATE
=== RUN   TestGetGamesByIDsV2/lockTypeが無効

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:69
[0m[33m[5.246ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('bc88da1f-d7fc-4cac-8e2c-ee25ca4b36c5','fb1c219c-c0fb-4846-82e1-058769ab555a',1,'2025-10-31 23:00:24.444') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1844
[0m[33m[1.192ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mp4' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2874
[0m[33m[1.329ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'jpeg' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:703
[0m[33m[1.473ms] [34;1m[rows:3][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('72e820ca-4807-45e7-92ef-f6e7f67a4f2b','9e79340f-b9dc-4f9c-9f18-203871349bff',1,'2025-10-31 23:00:24.427'),('f70755e4-e64f-4288-a922-9b7604ab9b46','9e79340f-b9dc-4f9c-9f18-203871349bff',2,'2025-10-31 13:00:24.427'),('ea3324b8-6ae8-4ac4-bbb9-ea47b2b96a15','9e79340f-b9dc-4f9c-9f18-203871349bff',3,'2025-10-31 03:00:24.427') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:55
[0m[33m[3.746ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('c4032b91-dad0-43d8-9e19-7e13994923f4','160fd88a-aca9-4ea6-8fdb-606f22339cbd',1,'2025-10-31 23:00:24.415') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1054
[0m[33m[3.637ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'jar' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:554
[0m[33m[1.485ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('4841f671-6c86-476f-a578-df72dfb75f69','ad850618-82b0-4def-a56f-98d268c6e778',1,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 23:00:24.415') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:236
[0m[33m[1.445ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_videos` WHERE game_id = 'fb1c219c-c0fb-4846-82e1-058769ab555a'
=== RUN   TestSaveGameVideoV2/m4vでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:703
[0m[33m[8.762ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('9e79340f-b9dc-4f9c-9f18-203871349bff','test','test',1,'2025-10-31 23:00:24.427') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:237
[0m[33m[1.142ms] [34;1m[rows:2][0m SELECT * FROM `v2_game_images` WHERE game_id = '160fd88a-aca9-4ea6-8fdb-606f22339cbd'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1063
[0m[33m[1.024ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestSaveGameImageV2/エラーの場合変更なし
=== RUN   TestGetGameVersionsV2/特に問題ないのでエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:554
[0m[33m[4.992ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('ad850618-82b0-4def-a56f-98d268c6e778','test','test',1,'2025-10-31 23:00:24.453') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:136
[0m[33m[1.293ms] [34;1m[rows:3][0m SELECT `v2_game_videos`.`id`,`v2_game_videos`.`game_id`,`v2_game_videos`.`video_type_id`,`v2_game_videos`.`created_at`,`GameVideoType`.`id` AS `GameVideoType__id`,`GameVideoType`.`name` AS `GameVideoType__name`,`GameVideoType`.`active` AS `GameVideoType__active` FROM `v2_game_videos` LEFT JOIN `game_video_types` `GameVideoType` ON `v2_game_videos`.`video_type_id` = `GameVideoType`.`id` WHERE game_id = '9e79340f-b9dc-4f9c-9f18-203871349bff' ORDER BY created_at DESC
=== RUN   TestGetGameVideos/動画が存在しなくても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1854
[0m[33m[3.110ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'jar' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:1520
[0m[33m[3.325ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('9cfdd5fd-024b-472e-9d24-114306d4e0da','test9','test9',1,'2025-10-31 23:00:24.411') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`
--- PASS: TestGetGamesByIDsV2 (0.05s)
    --- PASS: TestGetGamesByIDsV2/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGamesByIDsV2/gameIDが複数でもエラーなし (0.01s)
    --- PASS: TestGetGamesByIDsV2/違うgameIDのゲームは取らない (0.01s)
    --- PASS: TestGetGamesByIDsV2/削除されたゲームは取らない (0.01s)
    --- PASS: TestGetGamesByIDsV2/ゲームが存在しなくても問題なし (0.00s)
    --- PASS: TestGetGamesByIDsV2/lockTypeがrecordでも問題なし (0.01s)
    --- PASS: TestGetGamesByIDsV2/lockTypeが無効 (0.00s)
=== CONT  TestGetGameImage

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2884
[0m[33m[3.357ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mp4' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:302
[0m[33m[0.424ms] [34;1m[rows:3][0m SELECT * FROM `game_image_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:50
[0m[33m[1.237ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'mac' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1863
[0m[33m[0.837ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestGetLatestGameVersionV2/特に問題ないのでエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:136
[0m[33m[1.223ms] [34;1m[rows:0][0m SELECT `v2_game_videos`.`id`,`v2_game_videos`.`game_id`,`v2_game_videos`.`video_type_id`,`v2_game_videos`.`created_at`,`GameVideoType`.`id` AS `GameVideoType__id`,`GameVideoType`.`name` AS `GameVideoType__name`,`GameVideoType`.`active` AS `GameVideoType__active` FROM `v2_game_videos` LEFT JOIN `game_video_types` `GameVideoType` ON `v2_game_videos`.`video_type_id` = `GameVideoType`.`id` WHERE game_id = '7a0a9896-9821-42ce-98e1-f03ad45a47b6' ORDER BY created_at DESC
--- PASS: TestGetGameVideos (0.03s)
    --- PASS: TestGetGameVideos/特に問題ないので問題なし (0.01s)
    --- PASS: TestGetGameVideos/lockTypeがRecordでも問題なし (0.01s)
    --- PASS: TestGetGameVideos/複数の動画があっても問題なし (0.01s)
    --- PASS: TestGetGameVideos/いろんなタイプの動画があっても問題なし (0.01s)
    --- PASS: TestGetGameVideos/動画が存在しなくても問題なし (0.00s)
=== CONT  TestGetEditionPlayStats

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:208
[0m[33m[2.953ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('8c2f7f94-2a18-426f-82f7-8a72ee0682ef','test','test',1,'2025-10-31 23:00:24.457') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2894
[0m[33m[1.099ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'jar' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:209
[0m[33m[1.327ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('a11a3418-7e59-4669-8df8-c66fe9816f5f','91af99d4-e6dd-41fa-8670-91d01b92a17b',2,'2025-10-31 13:00:24.415') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:316
[0m[33m[0.995ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[0.982ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('3ce63785-f2ef-4a78-86e1-abcae6ea9f6b','3deb6bcb-cb6e-441c-990c-90a40d1b4a3e',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`
=== RUN   TestGetGameImage/特に問題ないので問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:62
[0m[33m[1.124ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'm4v' AND active = true LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:209
[0m[33m[3.633ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('91af99d4-e6dd-41fa-8670-91d01b92a17b','test','test',1,'2025-10-31 23:00:24.458') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2874
[0m[33m[1.274ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'jpeg' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[1.314ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('a42c632c-9fa2-481c-aa54-87503ce79981','3deb6bcb-cb6e-441c-990c-90a40d1b4a3e',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:57
[0m[33m[3.398ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('71e071c0-eb23-4fd8-8872-49ada4e9af39','ad850618-82b0-4def-a56f-98d268c6e778',3,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 23:00:24.415') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2884
[0m[33m[1.424ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mp4' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:237
[0m[33m[1.712ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_images` WHERE game_id = '91af99d4-e6dd-41fa-8670-91d01b92a17b'
--- PASS: TestSaveGameImageV2 (0.05s)
    --- PASS: TestSaveGameImageV2/特に問題ないので問題なし (0.01s)
    --- PASS: TestSaveGameImageV2/pngでも問題なし (0.01s)
    --- PASS: TestSaveGameImageV2/gifでも問題なし (0.01s)
    --- PASS: TestSaveGameImageV2/想定外の画像の種類なのでエラー (0.01s)
    --- PASS: TestSaveGameImageV2/既に画像が存在しても問題なし (0.01s)
    --- PASS: TestSaveGameImageV2/エラーの場合変更なし (0.01s)
=== CONT  TestGetGameV2

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[1.800ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('b8cbfa30-418a-4a88-b7fd-04c2deae064e','edcae72b-18a1-4bb8-860f-5253c611dcb0',1,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:469
[0m[33m[1.252ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('39f62417-2f03-4e6f-8f6a-bae2b5c70f08','a49e5360-df01-432b-b6b5-d0bacee4af9b',1,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[4.353ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('b2071cfe-c316-4db9-b2e9-249c79a0e2a8','3deb6bcb-cb6e-441c-990c-90a40d1b4a3e','3ce63785-f2ef-4a78-86e1-abcae6ea9f6b','a42c632c-9fa2-481c-aa54-87503ce79981','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:582
[0m[33m[1.231ms] [34;1m[rows:2][0m SELECT * FROM `v2_game_files` WHERE game_id = 'ad850618-82b0-4def-a56f-98d268c6e778'
=== RUN   TestSaveGameFileV2/エラーの場合変更なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2894
[0m[33m[1.218ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'jar' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:557
[0m[33m[1.179ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestGetGameV2/特に問題ないのでエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[1.079ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('1b9989d4-1862-4c0f-a1f2-fec89d3a89d9','edcae72b-18a1-4bb8-860f-5253c611dcb0',1,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[7.405ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('3deb6bcb-cb6e-441c-990c-90a40d1b4a3e','test','test',1,'2025-10-31 23:00:24.458') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2874
[0m[33m[1.004ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'jpeg' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[4.026ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('713b733e-ad4d-4809-a612-5cf7039751c9','edcae72b-18a1-4bb8-860f-5253c611dcb0','b8cbfa30-418a-4a88-b7fd-04c2deae064e','1b9989d4-1862-4c0f-a1f2-fec89d3a89d9','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:69
[0m[33m[4.561ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('b1066840-d538-434b-93d9-17f8ead40388','8c2f7f94-2a18-426f-82f7-8a72ee0682ef',3,'2025-10-31 23:00:24.444') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:117
[0m[33m[0.894ms] [34;1m[rows:1][0m SELECT count(*) FROM `v2_game_versions` WHERE game_id = '3deb6bcb-cb6e-441c-990c-90a40d1b4a3e'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:469
[0m[33m[5.649ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('a49e5360-df01-432b-b6b5-d0bacee4af9b','test','test',1,'2025-10-31 23:00:24.46') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1274
[0m[33m[5.926ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`created_at`) VALUES ('aa2d222c-b7ad-48ff-b1aa-52803ef334b3','edition1 for GetEditionPlayStats','2025-10-31 23:00:24.46') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2884
[0m[33m[1.303ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mp4' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:236
[0m[33m[1.257ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_videos` WHERE game_id = '8c2f7f94-2a18-426f-82f7-8a72ee0682ef'
=== RUN   TestSaveGameVideoV2/mkvでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:554
[0m[33m[1.158ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('8e0e3760-5824-41d8-9788-428276b34ef5','950795b3-258e-4220-ae10-c6a09340ad33',3,'098f6bcd4621d373cade4e832627b4f6','path/to/file','2025-10-31 23:00:24.415') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:83
[0m[33m[1.248ms] [34;1m[rows:1][0m SELECT `v2_game_images`.`id`,`v2_game_images`.`game_id`,`v2_game_images`.`image_type_id`,`v2_game_images`.`created_at`,`GameImageType`.`id` AS `GameImageType__id`,`GameImageType`.`name` AS `GameImageType__name`,`GameImageType`.`active` AS `GameImageType__active` FROM `v2_game_images` LEFT JOIN `game_image_types` `GameImageType` ON `v2_game_images`.`image_type_id` = `GameImageType`.`id` WHERE v2_game_images.id = '39f62417-2f03-4e6f-8f6a-bae2b5c70f08' LIMIT 1
=== RUN   TestGetGameImage/pngでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2894
[0m[33m[1.205ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'jar' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[8.285ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('edcae72b-18a1-4bb8-860f-5253c611dcb0','test','test',1,'2025-10-31 23:00:24.46') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:661
[0m[33m[3.830ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('651981af-764a-40f5-94f1-22dbc425d8a5','test','test',1,'2025-10-31 23:00:24.463') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:554
[0m[33m[4.535ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('950795b3-258e-4220-ae10-c6a09340ad33','test','test',1,'2025-10-31 23:00:24.464') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2874
[0m[33m[0.787ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'jpeg' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1275
[0m[33m[3.054ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('677cfac9-0ce4-4e20-8ff5-428122934a8b','Test Game 1','Test Description',1,'2025-10-31 23:00:24.46') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:137
[0m[33m[1.125ms] [34;1m[rows:1][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at`,`GameVisibilityType`.`id` AS `GameVisibilityType__id`,`GameVisibilityType`.`name` AS `GameVisibilityType__name`,`GameVisibilityType`.`created_at` AS `GameVisibilityType__created_at` FROM `games` LEFT JOIN `game_visibility_types` `GameVisibilityType` ON `games`.`visibility_type_id` = `GameVisibilityType`.`id` WHERE games.id = '651981af-764a-40f5-94f1-22dbc425d8a5' AND `games`.`deleted_at` IS NULL LIMIT 1
=== RUN   TestGetGameV2/行ロックでもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:582
[0m[33m[0.915ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_files` WHERE game_id = '950795b3-258e-4220-ae10-c6a09340ad33'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[2.288ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = 'b2071cfe-c316-4db9-b2e9-249c79a0e2a8'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[3.889ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = '3deb6bcb-cb6e-441c-990c-90a40d1b4a3e' ORDER BY created_at DESC

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:196
[0m[33m[1.067ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '713b733e-ad4d-4809-a612-5cf7039751c9'
=== CONT  TestCreateGameVersionV2
--- PASS: TestSaveGameFileV2 (0.06s)
    --- PASS: TestSaveGameFileV2/特に問題ないので問題なし (0.01s)
    --- PASS: TestSaveGameFileV2/windowsでも問題なし (0.01s)
    --- PASS: TestSaveGameFileV2/macでも問題なし (0.01s)
    --- PASS: TestSaveGameFileV2/想定外の画像の種類なのでエラー (0.01s)
    --- PASS: TestSaveGameFileV2/既にファイルが存在しても問題なし (0.01s)
    --- PASS: TestSaveGameFileV2/エラーの場合変更なし (0.01s)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:196
[0m[33m[1.954ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = 'edcae72b-18a1-4bb8-860f-5253c611dcb0' ORDER BY created_at DESC,`v2_game_versions`.`id` LIMIT 1
=== RUN   TestGetGameVersionsV2/ゲームが存在しなくてもエラーなし
=== RUN   TestGetLatestGameVersionV2/ゲームが存在しないのでRecordNotFound

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:117
[0m[33m[0.872ms] [34;1m[rows:1][0m SELECT count(*) FROM `v2_game_versions` WHERE game_id = 'b380c65c-b6a6-44e9-8f9c-c1bc6c5f90bc'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:133
[0m[33m[0.936ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'jpeg' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:469
[0m[33m[1.410ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('7ca85aed-7a26-4c78-ac06-bfd6fa62f1bf','b94aaa7a-3292-4d21-b8fd-bc3ecb2dae06',2,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:208
[0m[33m[4.282ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('81a9bcd5-20ce-406c-be60-1675f20927a6','test','test',1,'2025-10-31 23:00:24.467') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[0.952ms] [34;1m[rows:0][0m SELECT * FROM `v2_game_versions` WHERE game_id = 'b380c65c-b6a6-44e9-8f9c-c1bc6c5f90bc' ORDER BY created_at DESC
=== RUN   TestGetGameVersionsV2/バージョンが複数あってもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:143
[0m[33m[0.968ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mp4' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1276
[0m[33m[2.799ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('99b61c5a-b313-4ab8-92c5-80fafed89a80','677cfac9-0ce4-4e20-8ff5-428122934a8b',1,'2025-10-31 23:00:24.46') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:661
[0m[33m[2.799ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('b2bcf324-a46f-4bb8-ad4d-1979d9bc4109','test','test',1,'2025-10-31 23:00:24.463') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2884
[0m[33m[3.696ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mp4' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:469
[0m[33m[4.954ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('b94aaa7a-3292-4d21-b8fd-bc3ecb2dae06','test','test',1,'2025-10-31 23:00:24.46') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:62
[0m[33m[1.151ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mkv' AND active = true LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:153
[0m[33m[0.901ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'jar' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2894
[0m[33m[0.867ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'jar' LIMIT 1

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:196 [35;1mrecord not found
[0m[33m[3.625ms] [34;1m[rows:0][0m SELECT * FROM `v2_game_versions` WHERE game_id = 'aef5d5c6-ec75-442b-b827-95750c54161f' ORDER BY created_at DESC,`v2_game_versions`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:162
[0m[33m[0.857ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestCreateGameVersionV2/特に問題ないのでエラーなし
=== RUN   TestGetLatestGameVersionV2/バージョンが複数あっても最新のものを取得

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2874
[0m[33m[0.814ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'jpeg' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:83
[0m[33m[2.421ms] [34;1m[rows:1][0m SELECT `v2_game_images`.`id`,`v2_game_images`.`game_id`,`v2_game_images`.`image_type_id`,`v2_game_images`.`created_at`,`GameImageType`.`id` AS `GameImageType__id`,`GameImageType`.`name` AS `GameImageType__name`,`GameImageType`.`active` AS `GameImageType__active` FROM `v2_game_images` LEFT JOIN `game_image_types` `GameImageType` ON `v2_game_images`.`image_type_id` = `GameImageType`.`id` WHERE v2_game_images.id = '7ca85aed-7a26-4c78-ac06-bfd6fa62f1bf' LIMIT 1
=== RUN   TestGetGameImage/gifでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2884
[0m[33m[1.351ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mp4' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:69
[0m[33m[2.920ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('226195c3-6bf1-45ea-adc1-8c0f1b5d8426','81a9bcd5-20ce-406c-be60-1675f20927a6',2,'2025-10-31 23:00:24.444') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[1.385ms] [34;1m[rows:2][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('67bca0da-e8e6-4dac-af15-3b826a93c350','5ab3d561-0eca-4ee2-82ed-75780606327e',1,'2025-10-31 23:00:24.458'),('855427ed-2f80-4e6d-aaf4-29fd2e651c27','5ab3d561-0eca-4ee2-82ed-75780606327e',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2894
[0m[33m[0.724ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'jar' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:236
[0m[33m[0.769ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_videos` WHERE game_id = '81a9bcd5-20ce-406c-be60-1675f20927a6'
=== RUN   TestSaveGameVideoV2/想定外の動画の種類なのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[0.912ms] [34;1m[rows:2][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('ec690feb-060d-48b2-ba5e-a529a667fc03','5ab3d561-0eca-4ee2-82ed-75780606327e',1,'2025-10-31 23:00:24.458'),('a342399f-2fa8-46d1-b039-334a8c393a90','5ab3d561-0eca-4ee2-82ed-75780606327e',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1277
[0m[33m[4.655ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('b61387c3-2187-4ebc-a1f5-d7a10154b0fc','677cfac9-0ce4-4e20-8ff5-428122934a8b',1,'2025-10-31 23:00:24.46') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2874
[0m[33m[0.762ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'jpeg' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[3.366ms] [34;1m[rows:2][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('c3c9a13d-37b6-4f40-b89a-b8886d00b833','5ab3d561-0eca-4ee2-82ed-75780606327e','67bca0da-e8e6-4dac-af15-3b826a93c350','ec690feb-060d-48b2-ba5e-a529a667fc03','v1.1.0','アップデート','https://example.com','2025-10-31 23:00:24.458'),('175a8e89-e5f0-48e9-942c-6db4b83baf62','5ab3d561-0eca-4ee2-82ed-75780606327e','855427ed-2f80-4e6d-aaf4-29fd2e651c27','a342399f-2fa8-46d1-b039-334a8c393a90','v1.0.0','リリース','https://example.com','2025-10-31 22:00:24.458') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2884
[0m[33m[0.756ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mp4' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:137
[0m[33m[5.639ms] [34;1m[rows:1][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at`,`GameVisibilityType`.`id` AS `GameVisibilityType__id`,`GameVisibilityType`.`name` AS `GameVisibilityType__name`,`GameVisibilityType`.`created_at` AS `GameVisibilityType__created_at` FROM `games` LEFT JOIN `game_visibility_types` `GameVisibilityType` ON `games`.`visibility_type_id` = `GameVisibilityType`.`id` WHERE games.id = 'b2bcf324-a46f-4bb8-ad4d-1979d9bc4109' AND `games`.`deleted_at` IS NULL LIMIT 1 FOR UPDATE
=== RUN   TestGetGameV2/ロックの種類が不正なのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2894
[0m[33m[0.814ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'jar' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[0.623ms] [34;1m[rows:2][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('30f85158-edeb-4214-acdb-26e12bd2d3c9','874a0c4e-42c4-4f17-b0c8-42c91cfa09fd',1,'2025-10-31 23:00:24.46'),('a707bddb-63e2-406a-9d0b-b4d9f8721592','874a0c4e-42c4-4f17-b0c8-42c91cfa09fd',1,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[7.269ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('5ab3d561-0eca-4ee2-82ed-75780606327e','test','test',1,'2025-10-31 23:00:24.458') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2874
[0m[33m[0.424ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'jpeg' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:469
[0m[33m[0.956ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('24464f27-2d84-418a-8cff-0dd76a5c42f1','6292a4ef-5635-43da-89ee-f9ab26742453',3,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:799
[0m[33m[5.785ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('9bf28418-6ed0-4d43-a78c-8ce8e22c6eb4','test','test',1,'2025-10-31 22:00:24.474') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1278
[0m[33m[2.917ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('00348152-30b2-4ac4-9c38-79a59146384f','677cfac9-0ce4-4e20-8ff5-428122934a8b','99b61c5a-b313-4ab8-92c5-80fafed89a80','b61387c3-2187-4ebc-a1f5-d7a10154b0fc','Version 1.0','First version','2025-10-31 23:00:24.46') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:208
[0m[33m[3.033ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('ab50099b-789c-4aa9-ae86-4d272d5c8936','test','test',1,'2025-10-31 23:00:24.477') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2884
[0m[33m[0.684ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mp4' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:469
[0m[33m[4.915ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('6292a4ef-5635-43da-89ee-f9ab26742453','test','test',1,'2025-10-31 23:00:24.46') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:661
[0m[33m[1.897ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('fb2b5da5-a996-4678-aecc-c430532470f2','test','test',1,'2025-10-31 23:00:24.463') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[0.904ms] [34;1m[rows:2][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('ca0d8402-5496-4040-848e-0181fdf64a33','874a0c4e-42c4-4f17-b0c8-42c91cfa09fd',1,'2025-10-31 23:00:24.46'),('b8c8de16-fe5d-4c1e-86b1-549e2c18ed12','874a0c4e-42c4-4f17-b0c8-42c91cfa09fd',1,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:117
[0m[33m[0.906ms] [34;1m[rows:1][0m SELECT count(*) FROM `v2_game_versions` WHERE game_id = '5ab3d561-0eca-4ee2-82ed-75780606327e'
=== RUN   TestGetGameV2/ゲームが存在しないのでErrRecordNotFound

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:236
[0m[33m[0.705ms] [34;1m[rows:0][0m SELECT * FROM `v2_game_videos` WHERE game_id = 'ab50099b-789c-4aa9-ae86-4d272d5c8936'
=== RUN   TestSaveGameVideoV2/既に動画が存在しても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2894
[0m[33m[1.061ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'jar' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:83
[0m[33m[0.965ms] [34;1m[rows:1][0m SELECT `v2_game_images`.`id`,`v2_game_images`.`game_id`,`v2_game_images`.`image_type_id`,`v2_game_images`.`created_at`,`GameImageType`.`id` AS `GameImageType__id`,`GameImageType`.`name` AS `GameImageType__name`,`GameImageType`.`active` AS `GameImageType__active` FROM `v2_game_images` LEFT JOIN `game_image_types` `GameImageType` ON `v2_game_images`.`image_type_id` = `GameImageType`.`id` WHERE v2_game_images.id = '24464f27-2d84-418a-8cff-0dd76a5c42f1' LIMIT 1
=== RUN   TestGetGameImage/lockTypeがRecordでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[2.748ms] [34;1m[rows:2][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('a76f4bd0-4887-404b-9444-3f264820b996','874a0c4e-42c4-4f17-b0c8-42c91cfa09fd','30f85158-edeb-4214-acdb-26e12bd2d3c9','ca0d8402-5496-4040-848e-0181fdf64a33','v1.1.0','アップデート','https://example.com','2025-10-31 23:00:24.46'),('5a039571-18d5-4d32-ab3e-7e843afacc25','874a0c4e-42c4-4f17-b0c8-42c91cfa09fd','a707bddb-63e2-406a-9d0b-b4d9f8721592','b8c8de16-fe5d-4c1e-86b1-549e2c18ed12','v1.0.0','リリース','https://example.com','2025-10-31 22:00:24.46') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2874
[0m[33m[1.047ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'jpeg' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[8.289ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('874a0c4e-42c4-4f17-b0c8-42c91cfa09fd','test','test',1,'2025-10-31 23:00:24.46') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1279
[0m[33m[2.995ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`end_time`,`created_at`,`updated_at`) VALUES ('72545884-67cf-47da-a888-e472c86a99b2','aa2d222c-b7ad-48ff-b1aa-52803ef334b3','677cfac9-0ce4-4e20-8ff5-428122934a8b','00348152-30b2-4ac4-9c38-79a59146384f','2025-10-01 13:10:00','2025-10-01 13:25:00','2025-10-31 23:00:24.46','2025-10-31 23:00:24.46') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:831
[0m[33m[3.129ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('824907d2-4a8d-4512-8318-6045cee0f035','9bf28418-6ed0-4d43-a78c-8ce8e22c6eb4',1,'2025-10-31 23:00:24.48') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2884
[0m[33m[0.940ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mp4' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:208
[0m[33m[0.913ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('d2d40874-2058-4210-be51-35098c120995','e972f166-2930-4cfc-ac6a-29fcf1333a2b',1,'2025-10-31 13:00:24.444') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[1.134ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` IN ('c3c9a13d-37b6-4f40-b89a-b8886d00b833','175a8e89-e5f0-48e9-942c-6db4b83baf62')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[3.019ms] [34;1m[rows:2][0m SELECT * FROM `v2_game_versions` WHERE game_id = '5ab3d561-0eca-4ee2-82ed-75780606327e' ORDER BY created_at DESC
=== RUN   TestGetGameVersionsV2/バージョンが存在しなくてもエラーなし

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:137 [35;1mrecord not found
[0m[33m[3.815ms] [34;1m[rows:0][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at`,`GameVisibilityType`.`id` AS `GameVisibilityType__id`,`GameVisibilityType`.`name` AS `GameVisibilityType__name`,`GameVisibilityType`.`created_at` AS `GameVisibilityType__created_at` FROM `games` LEFT JOIN `game_visibility_types` `GameVisibilityType` ON `games`.`visibility_type_id` = `GameVisibilityType`.`id` WHERE games.id = 'fdafdc50-1272-4a4b-92ae-5c0febbf974f' AND `games`.`deleted_at` IS NULL LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:196
[0m[33m[1.129ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = 'a76f4bd0-4887-404b-9444-3f264820b996'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:469
[0m[33m[1.508ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('8d594360-626c-4fb7-9ed1-95f231c24f57','aecaac98-82f7-4f69-852f-30fc24709da5',1,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`
=== RUN   TestGetGameV2/ゲームが削除済みなのでErrRecordNotFound

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:196
[0m[33m[1.958ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = '874a0c4e-42c4-4f17-b0c8-42c91cfa09fd' ORDER BY created_at DESC,`v2_game_versions`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:208
[0m[33m[3.709ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('e972f166-2930-4cfc-ac6a-29fcf1333a2b','test','test',1,'2025-10-31 23:00:24.481') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`
=== RUN   TestGetLatestGameVersionV2/バージョンが存在しないのでRecordNotFound

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2894
[0m[33m[1.558ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'jar' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:469
[0m[33m[3.944ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('aecaac98-82f7-4f69-852f-30fc24709da5','test','test',1,'2025-10-31 23:00:24.46') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:62
[0m[33m[0.810ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mp4' AND active = true LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2874
[0m[33m[0.894ms] [34;1m[rows:1][0m SELECT `id` FROM `game_image_types` WHERE name = 'jpeg' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:845
[0m[33m[2.888ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('609ed575-42a5-45bd-8ab1-a27998738d5e','9bf28418-6ed0-4d43-a78c-8ce8e22c6eb4',1,'2025-10-31 23:00:24.483') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1280
[0m[33m[2.975ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`end_time`,`created_at`,`updated_at`) VALUES ('0919aa15-fc7b-4625-9d10-01ecd7885662','aa2d222c-b7ad-48ff-b1aa-52803ef334b3','677cfac9-0ce4-4e20-8ff5-428122934a8b','00348152-30b2-4ac4-9c38-79a59146384f','2025-10-01 13:40:00','2025-10-01 14:00:00','2025-10-31 23:00:24.46','2025-10-31 23:00:24.46') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:83
[0m[33m[0.738ms] [34;1m[rows:1][0m SELECT `v2_game_images`.`id`,`v2_game_images`.`game_id`,`v2_game_images`.`image_type_id`,`v2_game_images`.`created_at`,`GameImageType`.`id` AS `GameImageType__id`,`GameImageType`.`name` AS `GameImageType__name`,`GameImageType`.`active` AS `GameImageType__active` FROM `v2_game_images` LEFT JOIN `game_image_types` `GameImageType` ON `v2_game_images`.`image_type_id` = `GameImageType`.`id` WHERE v2_game_images.id = '8d594360-626c-4fb7-9ed1-95f231c24f57' LIMIT 1 FOR UPDATE
=== RUN   TestGetGameImage/複数の画像があっても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[2.569ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('d0990db6-af7e-45ae-82b1-98e3cd771de0','test','test',1,'2025-10-31 23:00:24.458') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2884
[0m[33m[0.865ms] [34;1m[rows:1][0m SELECT `id` FROM `game_video_types` WHERE name = 'mp4' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[2.173ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('c368bba4-2578-4a6c-90ef-606af2fc9e4e','test','test',1,'2025-10-31 23:00:24.46') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:661
[0m[33m[2.384ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`,`deleted_at`) VALUES ('5a2f22d9-5aa9-40dd-a5cd-5f2ea67b930e','test','test',1,'2025-10-31 23:00:24.463','2025-10-31 23:00:24.463') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:117
[0m[33m[0.947ms] [34;1m[rows:1][0m SELECT count(*) FROM `v2_game_versions` WHERE game_id = 'd0990db6-af7e-45ae-82b1-98e3cd771de0'

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:196 [35;1mrecord not found
[0m[33m[0.823ms] [34;1m[rows:0][0m SELECT * FROM `v2_game_versions` WHERE game_id = 'c368bba4-2578-4a6c-90ef-606af2fc9e4e' ORDER BY created_at DESC,`v2_game_versions`.`id` LIMIT 1
=== RUN   TestGetLatestGameVersionV2/別のゲームのバージョンが混ざることはない

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2894
[0m[33m[1.057ms] [34;1m[rows:1][0m SELECT `id` FROM `game_file_types` WHERE name = 'jar' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:668
[0m[33m[1.469ms] [34;1m[rows:0][0m UPDATE `games` SET `deleted_at`='2025-10-31 23:00:24.488' WHERE `games`.`id` = '5a2f22d9-5aa9-40dd-a5cd-5f2ea67b930e' AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2366
[0m[33m[0.685ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[0.978ms] [34;1m[rows:0][0m SELECT * FROM `v2_game_versions` WHERE game_id = 'd0990db6-af7e-45ae-82b1-98e3cd771de0' ORDER BY created_at DESC
=== RUN   TestGetGameVersionsByIDsV2/問題ないのでエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:469
[0m[33m[0.780ms] [34;1m[rows:2][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('0322dba5-5c51-4bcd-9b1a-d63920381d7e','2ed04a36-2c20-442e-a5b2-812ec59e87ec',1,'2025-10-31 23:00:24.46'),('dd63fca5-e0da-40b4-ab8f-8b12f0cc3e03','2ed04a36-2c20-442e-a5b2-812ec59e87ec',2,'2025-10-31 13:00:24.46') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`
=== RUN   TestGetGameVersionsV2/別のゲームのバージョンが混ざることはない

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video.go:69
[0m[33m[3.461ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('1f0f9fc5-5712-451b-bf1a-7b6e392d6f04','e972f166-2930-4cfc-ac6a-29fcf1333a2b',1,'2025-10-31 23:00:24.444') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:51
[0m[33m[3.360ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('cb715cb6-07a8-40e1-8a91-f4fa51acb3d3','9bf28418-6ed0-4d43-a78c-8ce8e22c6eb4','824907d2-4a8d-4512-8318-6045cee0f035','609ed575-42a5-45bd-8ab1-a27998738d5e','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.474') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:137 [35;1mrecord not found
[0m[33m[1.072ms] [34;1m[rows:0][0m SELECT `games`.`id`,`games`.`name`,`games`.`description`,`games`.`visibility_type_id`,`games`.`created_at`,`games`.`deleted_at`,`games`.`latest_version_updated_at`,`GameVisibilityType`.`id` AS `GameVisibilityType__id`,`GameVisibilityType`.`name` AS `GameVisibilityType__name`,`GameVisibilityType`.`created_at` AS `GameVisibilityType__created_at` FROM `games` LEFT JOIN `game_visibility_types` `GameVisibilityType` ON `games`.`visibility_type_id` = `GameVisibilityType`.`id` WHERE games.id = '5a2f22d9-5aa9-40dd-a5cd-5f2ea67b930e' AND `games`.`deleted_at` IS NULL LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1281
[0m[33m[3.450ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`end_time`,`created_at`,`updated_at`) VALUES ('9d8a3568-9fcd-4b28-8aeb-3f60ccbe9dee','aa2d222c-b7ad-48ff-b1aa-52803ef334b3','677cfac9-0ce4-4e20-8ff5-428122934a8b','00348152-30b2-4ac4-9c38-79a59146384f','2025-10-01 14:15:00','2025-10-01 14:45:00','2025-10-31 23:00:24.46','2025-10-31 23:00:24.46') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`
--- PASS: TestGetGameV2 (0.03s)
    --- PASS: TestGetGameV2/特に問題ないのでエラーなし (0.01s)
    --- PASS: TestGetGameV2/行ロックでもエラーなし (0.01s)
    --- PASS: TestGetGameV2/ロックの種類が不正なのでエラー (0.00s)
    --- PASS: TestGetGameV2/ゲームが存在しないのでErrRecordNotFound (0.00s)
    --- PASS: TestGetGameV2/ゲームが削除済みなのでErrRecordNotFound (0.01s)
=== CONT  TestSaveGameV2

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:469
[0m[33m[3.571ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('2ed04a36-2c20-442e-a5b2-812ec59e87ec','test','test',1,'2025-10-31 23:00:24.46') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:236
[0m[33m[1.156ms] [34;1m[rows:2][0m SELECT * FROM `v2_game_videos` WHERE game_id = 'e972f166-2930-4cfc-ac6a-29fcf1333a2b'
=== RUN   TestSaveGameVideoV2/エラーの場合変更なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[1.278ms] [34;1m[rows:2][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('9859e209-dee7-400b-be52-a4a4326d7544','6c040a00-af96-4c1d-85ed-754b9a22f752',1,'2025-10-31 23:00:24.46'),('2b885f34-3a91-425d-b736-3fe71ac1eef8','704cd86f-c993-47a3-b760-122b7c17198b',1,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:50
[0m[33m[0.793ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestSaveGameV2/特に問題ないのでエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:83
[0m[33m[1.120ms] [34;1m[rows:1][0m SELECT `v2_game_images`.`id`,`v2_game_images`.`game_id`,`v2_game_images`.`image_type_id`,`v2_game_images`.`created_at`,`GameImageType`.`id` AS `GameImageType__id`,`GameImageType`.`name` AS `GameImageType__name`,`GameImageType`.`active` AS `GameImageType__active` FROM `v2_game_images` LEFT JOIN `game_image_types` `GameImageType` ON `v2_game_images`.`image_type_id` = `GameImageType`.`id` WHERE v2_game_images.id = '0322dba5-5c51-4bcd-9b1a-d63920381d7e' LIMIT 1
=== RUN   TestGetGameImage/画像が存在しないのでRecordNotFound

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:47
[0m[33m[1.083ms] [34;1m[rows:1][0m SELECT `id` FROM `game_visibility_types` WHERE name = 'limited' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[1.292ms] [34;1m[rows:2][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('03df985d-a59a-41ac-a77e-7f1afe9484d5','cef2a5be-ded8-4482-8b5a-7b76f77475ed',1,'2025-10-31 23:00:24.458'),('351fe92a-8dce-4a69-9cd4-8dc4cfba2ad0','fd936ea5-e11e-4684-a69a-7da0d6ce0e5b',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[1.120ms] [34;1m[rows:2][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('84aef169-b4a0-4421-911d-cd28c78d6e57','6c040a00-af96-4c1d-85ed-754b9a22f752',1,'2025-10-31 23:00:24.46'),('c0296dff-8407-4644-8a1b-9091af02258d','704cd86f-c993-47a3-b760-122b7c17198b',1,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[1.447ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('0d06b426-9913-44ba-8f18-fde3994af8cd','262a7fb2-2550-4279-93c6-2bf88f752bad',1,'2025-10-31 23:00:24.445') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1282
[0m[33m[2.874ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`end_time`,`created_at`,`updated_at`) VALUES ('499e8dd3-9192-42e5-bd02-43429e84c1b6','aa2d222c-b7ad-48ff-b1aa-52803ef334b3','677cfac9-0ce4-4e20-8ff5-428122934a8b','00348152-30b2-4ac4-9c38-79a59146384f','2025-10-01 15:20:00','2025-10-01 15:45:00','2025-10-31 23:00:24.46','2025-10-31 23:00:24.46') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[0.829ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('ba6380cc-6fd9-4e37-9680-fe634f5e8d42','262a7fb2-2550-4279-93c6-2bf88f752bad',1,'2025-10-31 23:00:24.445') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[3.595ms] [34;1m[rows:2][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('c8155564-9673-4f76-8ea1-ac39a677441c','6c040a00-af96-4c1d-85ed-754b9a22f752','9859e209-dee7-400b-be52-a4a4326d7544','84aef169-b4a0-4421-911d-cd28c78d6e57','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.46'),('557fe2b0-009f-42f5-8db8-ad10a55219c2','704cd86f-c993-47a3-b760-122b7c17198b','2b885f34-3a91-425d-b736-3fe71ac1eef8','c0296dff-8407-4644-8a1b-9091af02258d','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[1.014ms] [34;1m[rows:2][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('ad5222e6-0a41-4253-84d4-1fda5b805025','cef2a5be-ded8-4482-8b5a-7b76f77475ed',1,'2025-10-31 23:00:24.458'),('4c6654c7-a3d2-48ba-b86e-592435674e36','fd936ea5-e11e-4684-a69a-7da0d6ce0e5b',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:83 [35;1mrecord not found
[0m[33m[1.737ms] [34;1m[rows:0][0m SELECT `v2_game_images`.`id`,`v2_game_images`.`game_id`,`v2_game_images`.`image_type_id`,`v2_game_images`.`created_at`,`GameImageType`.`id` AS `GameImageType__id`,`GameImageType`.`name` AS `GameImageType__name`,`GameImageType`.`active` AS `GameImageType__active` FROM `v2_game_images` LEFT JOIN `game_image_types` `GameImageType` ON `v2_game_images`.`image_type_id` = `GameImageType`.`id` WHERE v2_game_images.id = '4dd72ce1-871e-485d-a932-34f815dbcee4' LIMIT 1
--- PASS: TestGetGameImage (0.03s)
    --- PASS: TestGetGameImage/特に問題ないので問題なし (0.01s)
    --- PASS: TestGetGameImage/pngでも問題なし (0.01s)
    --- PASS: TestGetGameImage/gifでも問題なし (0.01s)
    --- PASS: TestGetGameImage/lockTypeがRecordでも問題なし (0.00s)
    --- PASS: TestGetGameImage/複数の画像があっても問題なし (0.00s)
    --- PASS: TestGetGameImage/画像が存在しないのでRecordNotFound (0.00s)
=== CONT  TestDeleteLauncherUser

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:89
[0m[33m[2.484ms] [34;1m[rows:0][0m UPDATE `games` SET `latest_version_updated_at`='2025-10-31 23:00:24.474' WHERE `games`.`deleted_at` IS NULL AND `id` = '9bf28418-6ed0-4d43-a78c-8ce8e22c6eb4'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:208
[0m[33m[0.988ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('09c17110-a04c-491e-953e-d0ce246ebc62','98728378-e9aa-4457-b0d6-4ebf88cc3269',1,'2025-10-31 13:00:24.444') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[3.523ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('924d39cb-c566-40fa-999b-b8bbc76a30bb','262a7fb2-2550-4279-93c6-2bf88f752bad','0d06b426-9913-44ba-8f18-fde3994af8cd','ba6380cc-6fd9-4e37-9680-fe634f5e8d42','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.489') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[3.836ms] [34;1m[rows:2][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('bf9be52d-628d-42f8-ba02-67b5ea810386','cef2a5be-ded8-4482-8b5a-7b76f77475ed','03df985d-a59a-41ac-a77e-7f1afe9484d5','ad5222e6-0a41-4253-84d4-1fda5b805025','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.458'),('113b883a-fa0d-4c1e-9316-3f189da550fd','fd936ea5-e11e-4684-a69a-7da0d6ce0e5b','351fe92a-8dce-4a69-9cd4-8dc4cfba2ad0','4c6654c7-a3d2-48ba-b86e-592435674e36','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.387ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = 'cb715cb6-07a8-40e1-8a91-f4fa51acb3d3'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[1.288ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = '9bf28418-6ed0-4d43-a78c-8ce8e22c6eb4'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:932
[0m[33m[0.251ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`deleted_at` IS NULL
=== RUN   TestCreateGameVersionV2/既にバージョンが存在してもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[7.610ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('6c040a00-af96-4c1d-85ed-754b9a22f752','test','test',1,'2025-10-31 23:00:24.46'),('704cd86f-c993-47a3-b760-122b7c17198b','test','test',1,'2025-10-31 23:00:24.46') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:61
[0m[33m[4.033ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('b7380e11-11d5-4554-8628-180b97edc913','test','test',2,'2025-10-31 23:00:24.49') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1283
[0m[33m[3.233ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`created_at`,`updated_at`) VALUES ('f60b9629-95aa-422b-8d20-1a95f7636ade','aa2d222c-b7ad-48ff-b1aa-52803ef334b3','677cfac9-0ce4-4e20-8ff5-428122934a8b','00348152-30b2-4ac4-9c38-79a59146384f','2025-10-01 16:30:00','2025-10-31 23:00:24.46','2025-10-31 23:00:24.46') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:208
[0m[33m[5.543ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('98728378-e9aa-4457-b0d6-4ebf88cc3269','test','test',1,'2025-10-31 23:00:24.49') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`
=== RUN   TestGetEditionPlayStats/正常に取得できる

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[7.172ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('262a7fb2-2550-4279-93c6-2bf88f752bad','test','test',1,'2025-10-31 23:00:24.445') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_user_test.go:173
[0m[33m[2.791ms] [34;1m[rows:1][0m INSERT INTO `launcher_versions` (`id`,`name`,`created_at`) VALUES ('007a9750-111e-412b-9f79-ec51cc96dd1e','TestDeleteLauncherUser','2025-10-31 23:00:24.493') RETURNING `questionnaire_url`,`created_at`,`deleted_at`
=== RUN   TestDeleteLauncherUser/ユーザーが存在するのでエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[7.086ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('cef2a5be-ded8-4482-8b5a-7b76f77475ed','test','test',1,'2025-10-31 23:00:24.458'),('fd936ea5-e11e-4684-a69a-7da0d6ce0e5b','test','test',1,'2025-10-31 23:00:24.458') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:799
[0m[33m[1.065ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('43481641-b0c5-45fd-bec7-f60e5196bb32','test','test',1,'2025-10-31 22:00:24.495') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:138
[0m[33m[1.125ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE id = 'b7380e11-11d5-4554-8628-180b97edc913' AND `games`.`deleted_at` IS NULL ORDER BY `games`.`id` LIMIT 1
=== RUN   TestSaveGameV2/別のゲームが存在してもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_video_test.go:236
[0m[33m[1.305ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_videos` WHERE game_id = '98728378-e9aa-4457-b0d6-4ebf88cc3269'
=== CONT  TestGetGameFilesWithoutTypesV2
--- PASS: TestSaveGameVideoV2 (0.06s)
    --- PASS: TestSaveGameVideoV2/特に問題ないので問題なし (0.01s)
    --- PASS: TestSaveGameVideoV2/m4vでも問題なし (0.01s)
    --- PASS: TestSaveGameVideoV2/mkvでも問題なし (0.01s)
    --- PASS: TestSaveGameVideoV2/想定外の動画の種類なのでエラー (0.00s)
    --- PASS: TestSaveGameVideoV2/既に動画が存在しても問題なし (0.01s)
    --- PASS: TestSaveGameVideoV2/エラーの場合変更なし (0.01s)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:196
[0m[33m[1.016ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = 'c8155564-9673-4f76-8ea1-ac39a677441c'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:196
[0m[33m[2.084ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = '6c040a00-af96-4c1d-85ed-754b9a22f752' ORDER BY created_at DESC,`v2_game_versions`.`id` LIMIT 1
=== RUN   TestGetLatestGameVersionV2/ファイルが存在してもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:59
[0m[33m[0.543ms] [34;1m[rows:3][0m SELECT * FROM `game_file_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:822
[0m[33m[1.163ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('2ba584fb-2f72-4c14-9bf7-322623762c58','43481641-b0c5-45fd-bec7-f60e5196bb32',1,'2025-10-31 22:00:24.474') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:73
[0m[33m[0.652ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestGetGameFilesWithoutTypesV2/特に問題ないのでエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:822
[0m[33m[0.904ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('a3df6dd9-184f-447d-8ec1-a8a0dc567a9d','43481641-b0c5-45fd-bec7-f60e5196bb32',1,'2025-10-31 22:00:24.474') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:238
[0m[33m[3.072ms] [34;1m[rows:1][0m SELECT * FROM `editions` WHERE id = 'aa2d222c-b7ad-48ff-b1aa-52803ef334b3' AND `editions`.`deleted_at` IS NULL ORDER BY `editions`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:113
[0m[33m[2.218ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('80374214-25fd-493a-87ea-1259ad3ec42e','test','test',1,'2025-10-31 23:00:24.49') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_user_test.go:212 [35;1mError 1054 (42S22): Unknown column 'edition_id' in 'field list'
[0m[33m[3.539ms] [34;1m[rows:0][0m INSERT INTO `launcher_users` (`id`,`edition_id`,`product_key`) VALUES ('a844757d-a334-43bd-9d14-8c89fda6c2ba','007a9750-111e-412b-9f79-ec51cc96dd1e','w0F9M-NlszX-kJQr0-5gmPd-XCxYl') RETURNING `created_at`,`deleted_at`
=== NAME  TestDeleteLauncherUser/ユーザーが存在するのでエラーなし
    launcher_user_test.go:214: failed to create launcher user: Error 1054 (42S22): Unknown column 'edition_id' in 'field list'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:117
[0m[33m[4.507ms] [34;1m[rows:1][0m SELECT count(*) FROM `v2_game_versions` WHERE game_id = 'cef2a5be-ded8-4482-8b5a-7b76f77475ed'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[1.250ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('1532dacf-7cec-4a62-bd40-a15571b1cf12','d3531070-752d-4576-9cc8-ea835ab8f133',1,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:47
[0m[33m[1.311ms] [34;1m[rows:1][0m SELECT `id` FROM `game_visibility_types` WHERE name = 'limited' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:252
[0m[33m[1.604ms] [34;1m[rows:3][0m SELECT * FROM `game_play_logs` WHERE edition_id = 'aa2d222c-b7ad-48ff-b1aa-52803ef334b3' AND start_time < '2025-10-01 15:00:00' AND ((end_time > '2025-10-01 13:00:00' OR end_time IS NULL)) ORDER BY start_time

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:822
[0m[33m[4.591ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('ef8c888d-e9bd-406b-8166-36061a860205','43481641-b0c5-45fd-bec7-f60e5196bb32','2ba584fb-2f72-4c14-9bf7-322623762c58','a3df6dd9-184f-447d-8ec1-a8a0dc567a9d','v1.0.0','リリース','https://example.com','2025-10-31 22:00:24.474') RETURNING `url`,`created_at`
=== RUN   TestGetEditionPlayStats/プレイ中のログも含めて正常に取得できる

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[1.026ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '924d39cb-c566-40fa-999b-b8bbc76a30bb'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[5.224ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE id IN ('924d39cb-c566-40fa-999b-b8bbc76a30bb')
=== RUN   TestGetGameVersionsByIDsV2/lockありでもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[1.216ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('d0d7f527-a8c6-4469-bcfa-54d2a2055a69','d3531070-752d-4576-9cc8-ea835ab8f133',1,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:297
[0m[33m[1.127ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('6a4430d6-4627-4e55-869b-0e5689cb2ded','71c61cac-fd57-4393-b4b3-9822679a0787',1,'68617368','/path/to/game.jar','2025-10-31 23:00:24.497') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_user.go:61
[0m[33m[2.296ms] [34;1m[rows:0][0m UPDATE `launcher_users` SET `deleted_at`='2025-10-31 23:00:24.501' WHERE `launcher_users`.`id` = 'a844757d-a334-43bd-9d14-8c89fda6c2ba' AND `launcher_users`.`deleted_at` IS NULL
=== NAME  TestDeleteLauncherUser/ユーザーが存在するのでエラーなし
    launcher_user_test.go:227: 
        	Error Trace:	/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_user_test.go:227
        	Error:      	Received unexpected error:
        	            	no record deleted
        	Test:       	TestDeleteLauncherUser/ユーザーが存在するのでエラーなし
=== RUN   TestDeleteLauncherUser/ユーザーが存在しないのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:297
[0m[33m[4.099ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('71c61cac-fd57-4393-b4b3-9822679a0787','test','test',1,'2025-10-31 23:00:24.497') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[1.216ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = 'bf9be52d-628d-42f8-ba02-67b5ea810386'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[2.412ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = 'cef2a5be-ded8-4482-8b5a-7b76f77475ed' ORDER BY created_at DESC
=== RUN   TestGetGameVersionsV2/ファイルが存在してもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:61
[0m[33m[2.425ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('ff445ad5-679c-4e67-afe0-fc111772c615','test','test',2,'2025-10-31 23:00:24.49') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:831
[0m[33m[2.431ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('18eaa436-deeb-4f47-973a-03c173ab4de9','43481641-b0c5-45fd-bec7-f60e5196bb32',1,'2025-10-31 23:00:24.501') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_user.go:61
[0m[33m[1.517ms] [34;1m[rows:0][0m UPDATE `launcher_users` SET `deleted_at`='2025-10-31 23:00:24.503' WHERE `launcher_users`.`id` = '984d342c-3062-4795-bf3f-4c41853c73ec' AND `launcher_users`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:238
[0m[33m[2.757ms] [34;1m[rows:1][0m SELECT * FROM `editions` WHERE id = 'aa2d222c-b7ad-48ff-b1aa-52803ef334b3' AND `editions`.`deleted_at` IS NULL ORDER BY `editions`.`id` LIMIT 1
--- FAIL: TestDeleteLauncherUser (0.01s)
    --- FAIL: TestDeleteLauncherUser/ユーザーが存在するのでエラーなし (0.01s)
    --- PASS: TestDeleteLauncherUser/ユーザーが存在しないのでエラー (0.00s)
=== CONT  TestUpdateGamePlayLogEndTime

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[0.985ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('906ed9bb-92db-4a21-bb36-ffe386db49c0','4462f0f1-d01e-44be-91c5-413095c5bf0a',1,'2025-10-31 23:00:24.45') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[0.933ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('e68866eb-dcd1-416c-bcfb-60bfd0faa7c4','d3531070-752d-4576-9cc8-ea835ab8f133',1,'hash','/path/to/game.exe','2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:203
[0m[33m[1.052ms] [34;1m[rows:1][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE v2_game_files.id IN ('6a4430d6-4627-4e55-869b-0e5689cb2ded') ORDER BY created_at DESC
=== RUN   TestGetGameFilesWithoutTypesV2/windowsでもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:252
[0m[33m[0.983ms] [34;1m[rows:2][0m SELECT * FROM `game_play_logs` WHERE edition_id = 'aa2d222c-b7ad-48ff-b1aa-52803ef334b3' AND start_time < '2025-10-01 17:00:00' AND ((end_time > '2025-10-01 15:00:00' OR end_time IS NULL)) ORDER BY start_time
=== RUN   TestGetEditionPlayStats/endTimeがNULLで進行中のプレイログの取得

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[0.920ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('a38adac6-75af-4366-9bb5-309e209ab3c1','4462f0f1-d01e-44be-91c5-413095c5bf0a',1,'2025-10-31 23:00:24.45') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[0.944ms] [34;1m[rows:1][0m INSERT INTO `game_version_game_file_relations` (`game_version_id`,`game_file_id`) VALUES ('799e4147-a2e9-4246-b6de-e8b4db336b62','e68866eb-dcd1-416c-bcfb-60bfd0faa7c4') ON DUPLICATE KEY UPDATE `game_version_id`=`game_version_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[5.705ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('799e4147-a2e9-4246-b6de-e8b4db336b62','d3531070-752d-4576-9cc8-ea835ab8f133','1532dacf-7cec-4a62-bd40-a15571b1cf12','d0d7f527-a8c6-4469-bcfa-54d2a2055a69','v1.0.0','リリース','2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[1.312ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('ba60f441-f95b-4278-b30c-494447443f03','96fd8c8d-6e73-41a3-89ec-3f3db7609415',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[3.389ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('fe364194-e3f1-4d07-875e-f51264c123e9','4462f0f1-d01e-44be-91c5-413095c5bf0a','906ed9bb-92db-4a21-bb36-ffe386db49c0','a38adac6-75af-4366-9bb5-309e209ab3c1','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.489') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:238
[0m[33m[1.292ms] [34;1m[rows:1][0m SELECT * FROM `editions` WHERE id = 'aa2d222c-b7ad-48ff-b1aa-52803ef334b3' AND `editions`.`deleted_at` IS NULL ORDER BY `editions`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:138
[0m[33m[3.098ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE id = 'ff445ad5-679c-4e67-afe0-fc111772c615' AND `games`.`deleted_at` IS NULL ORDER BY `games`.`id` LIMIT 1
=== RUN   TestSaveGameV2/同じIDを持つゲームがあるのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:297
[0m[33m[0.629ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('19d5eee6-803c-45b9-8601-106c2b8a4dc4','af19cee3-ad69-4769-9b0a-bee505f141f2',2,'68617368','/path/to/game.exe','2025-10-31 23:00:24.497') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:252
[0m[33m[0.677ms] [34;1m[rows:1][0m SELECT * FROM `game_play_logs` WHERE edition_id = 'aa2d222c-b7ad-48ff-b1aa-52803ef334b3' AND start_time < '2025-10-01 17:15:00' AND ((end_time > '2025-10-01 16:15:00' OR end_time IS NULL)) ORDER BY start_time
=== RUN   TestGetEditionPlayStats/存在しないeditionIDで取得しようとするとErrRecordNotFound

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:845
[0m[33m[3.846ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('83cce264-e603-4f5d-9246-244215ed6a1a','43481641-b0c5-45fd-bec7-f60e5196bb32',1,'2025-10-31 23:00:24.503') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[1.000ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('c788167f-e9ad-424e-bbd4-d14259910cdb','96fd8c8d-6e73-41a3-89ec-3f3db7609415',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[9.565ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('d3531070-752d-4576-9cc8-ea835ab8f133','test','test',1,'2025-10-31 23:00:24.46') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:640
[0m[33m[3.655ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`created_at`) VALUES ('ef7b91c7-7f82-4c72-953b-9769635187e9','test edition','2025-10-31 23:00:24.504') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[6.179ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('4462f0f1-d01e-44be-91c5-413095c5bf0a','test','test',1,'2025-10-31 23:00:24.45') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:297
[0m[33m[3.879ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('af19cee3-ad69-4769-9b0a-bee505f141f2','test','test',1,'2025-10-31 23:00:24.497') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:238 [35;1mrecord not found
[0m[33m[0.930ms] [34;1m[rows:0][0m SELECT * FROM `editions` WHERE id = '3f1b0034-cae0-4564-a275-3f80bc620c45' AND `editions`.`deleted_at` IS NULL ORDER BY `editions`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_test.go:113
[0m[33m[2.108ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('2e81df16-0ee4-42b9-a238-fa657a1ebefe','test','test',1,'2025-10-31 23:00:24.49') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[0.738ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('e539cf6a-f9a6-4be5-b67b-665a8a6f918a','96fd8c8d-6e73-41a3-89ec-3f3db7609415',1,'hash','/path/to/game.exe','2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:203
[0m[33m[1.251ms] [34;1m[rows:1][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE v2_game_files.id IN ('19d5eee6-803c-45b9-8601-106c2b8a4dc4') ORDER BY created_at DESC
=== RUN   TestGetGameFilesWithoutTypesV2/macでもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:51
[0m[33m[2.233ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('b99df0c6-857f-4532-9c03-f2f72c109c53','43481641-b0c5-45fd-bec7-f60e5196bb32','18eaa436-deeb-4f47-973a-03c173ab4de9','83cce264-e603-4f5d-9246-244215ed6a1a','v1.1.0','アップデート','https://example.com','2025-10-31 23:00:24.474') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[0.774ms] [34;1m[rows:1][0m INSERT INTO `game_version_game_file_relations` (`game_version_id`,`game_file_id`) VALUES ('2c8b5f1a-9515-4a42-a7e3-5cb9b3f6d4f8','e539cf6a-f9a6-4be5-b67b-665a8a6f918a') ON DUPLICATE KEY UPDATE `game_version_id`=`game_version_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:47
[0m[33m[0.920ms] [34;1m[rows:1][0m SELECT `id` FROM `game_visibility_types` WHERE name = 'limited' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[1.066ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = 'fe364194-e3f1-4d07-875e-f51264c123e9'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[4.927ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('2c8b5f1a-9515-4a42-a7e3-5cb9b3f6d4f8','96fd8c8d-6e73-41a3-89ec-3f3db7609415','ba60f441-f95b-4278-b30c-494447443f03','c788167f-e9ad-424e-bbd4-d14259910cdb','v1.0.0','リリース','2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[2.018ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE id IN ('fe364194-e3f1-4d07-875e-f51264c123e9') FOR UPDATE

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:196
[0m[33m[0.936ms] [34;1m[rows:1][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '799e4147-a2e9-4246-b6de-e8b4db336b62'
=== RUN   TestGetGameVersionsByIDsV2/対象が複数でもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1287
[0m[33m[1.827ms] [34;1m[rows:1][0m DELETE FROM `game_play_logs` WHERE `game_play_logs`.`id` = '72545884-67cf-47da-a888-e472c86a99b2'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:196
[0m[33m[0.787ms] [34;1m[rows:1][0m SELECT `id` FROM `v2_game_files` WHERE `v2_game_files`.`id` = 'e68866eb-dcd1-416c-bcfb-60bfd0faa7c4'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:196
[0m[33m[3.190ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = 'd3531070-752d-4576-9cc8-ea835ab8f133' ORDER BY created_at DESC,`v2_game_versions`.`id` LIMIT 1
=== RUN   TestGetLatestGameVersionV2/ファイルが複数でもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[7.514ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('96fd8c8d-6e73-41a3-89ec-3f3db7609415','test','test',1,'2025-10-31 23:00:24.458') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:652
[0m[33m[3.239ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('801b8a87-cffb-4599-889a-ac4a1d259a30','testGame','test game description',1,'2025-10-31 23:00:24.507') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game.go:61 [35;1mError 1062 (23000): Duplicate entry '2e81df16-0ee4-42b9-a238-fa657a1ebefe' for key 'PRIMARY'
[0m[33m[1.597ms] [34;1m[rows:0][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('2e81df16-0ee4-42b9-a238-fa657a1ebefe','test','test',2,'2025-10-31 23:00:24.49') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`
=== CONT  TestCreateGamePlayLog
--- PASS: TestSaveGameV2 (0.02s)
    --- PASS: TestSaveGameV2/特に問題ないのでエラーなし (0.01s)
    --- PASS: TestSaveGameV2/別のゲームが存在してもエラーなし (0.01s)
    --- PASS: TestSaveGameV2/同じIDを持つゲームがあるのでエラー (0.00s)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1288
[0m[33m[2.241ms] [34;1m[rows:1][0m DELETE FROM `game_play_logs` WHERE `game_play_logs`.`id` = '0919aa15-fc7b-4625-9d10-01ecd7885662'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:81
[0m[33m[0.878ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[1.045ms] [34;1m[rows:2][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('1efd1450-82dd-4d78-9722-77356fa1e409','abe658b7-3072-4562-8073-1e5049bc1ee0',1,'2025-10-31 23:00:24.454'),('7b7f1cec-9025-41fd-9c37-6d20b3e8a8bc','2f6eb285-2df9-4fa8-acfe-b03df85b6793',1,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:117
[0m[33m[1.673ms] [34;1m[rows:1][0m SELECT count(*) FROM `v2_game_versions` WHERE game_id = '96fd8c8d-6e73-41a3-89ec-3f3db7609415'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:297
[0m[33m[1.630ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('fb055717-44ed-40f9-ab6f-4f910a24ddea','dd4e1189-78e3-4c1d-b1e3-ee0aefc893e5',3,'68617368','/path/to/game.app','2025-10-31 23:00:24.497') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:89
[0m[33m[2.243ms] [34;1m[rows:0][0m UPDATE `games` SET `latest_version_updated_at`='2025-10-31 23:00:24.474' WHERE `games`.`deleted_at` IS NULL AND `id` = '43481641-b0c5-45fd-bec7-f60e5196bb32'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:90
[0m[33m[0.887ms] [34;1m[rows:1][0m SELECT * FROM `game_image_types` WHERE `game_image_types`.`name` = 'jpeg'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[0.862ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('aa0ed7e1-334d-4514-a651-07d3e63fa9b8','dad14871-e55e-4e47-a393-84e9a42e6fee',1,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[0.973ms] [34;1m[rows:2][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('f130b3e6-4728-413a-9af5-4a6587e0d213','abe658b7-3072-4562-8073-1e5049bc1ee0',1,'2025-10-31 23:00:24.454'),('38d30c65-ad8b-4517-b847-28f30b07f103','2f6eb285-2df9-4fa8-acfe-b03df85b6793',1,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:99
[0m[33m[0.780ms] [34;1m[rows:1][0m SELECT * FROM `game_video_types` WHERE `game_video_types`.`name` = 'mp4'
=== RUN   TestCreateGamePlayLog/正常にゲームプレイログが作成される
=== PAUSE TestCreateGamePlayLog/正常にゲームプレイログが作成される
=== RUN   TestCreateGamePlayLog/playLogIDが重複している場合、ErrDuplicatedUniqueKeyが返される
=== PAUSE TestCreateGamePlayLog/playLogIDが重複している場合、ErrDuplicatedUniqueKeyが返される
=== RUN   TestCreateGamePlayLog/既存のログが存在していても新しいログを正常に作成できる
=== PAUSE TestCreateGamePlayLog/既存のログが存在していても新しいログを正常に作成できる
=== CONT  TestGetGameManagersByGameID

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[0.746ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('f349819a-2530-441d-8c78-e32afdb6ef3b','dad14871-e55e-4e47-a393-84e9a42e6fee',1,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:297
[0m[33m[5.163ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('dd4e1189-78e3-4c1d-b1e3-ee0aefc893e5','test','test',1,'2025-10-31 23:00:24.497') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:764
[0m[33m[0.352ms] [34;1m[rows:2][0m SELECT * FROM `game_management_role_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[1.094ms] [34;1m[rows:1][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '2c8b5f1a-9515-4a42-a7e3-5cb9b3f6d4f8'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.970ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` IN ('ef8c888d-e9bd-406b-8166-36061a860205','b99df0c6-857f-4532-9c03-f2f72c109c53')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1289
[0m[33m[2.561ms] [34;1m[rows:1][0m DELETE FROM `game_play_logs` WHERE `game_play_logs`.`id` = '9d8a3568-9fcd-4b28-8aeb-3f60ccbe9dee'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[2.025ms] [34;1m[rows:2][0m SELECT * FROM `v2_game_versions` WHERE game_id = '43481641-b0c5-45fd-bec7-f60e5196bb32'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[3.619ms] [34;1m[rows:2][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('d9c98f48-8ee2-42b1-8cbb-ac5f3f0ea874','abe658b7-3072-4562-8073-1e5049bc1ee0','1efd1450-82dd-4d78-9722-77356fa1e409','f130b3e6-4728-413a-9af5-4a6587e0d213','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.489'),('30db85c7-f4aa-4edd-8a5a-43433cf821ec','2f6eb285-2df9-4fa8-acfe-b03df85b6793','7b7f1cec-9025-41fd-9c37-6d20b3e8a8bc','38d30c65-ad8b-4517-b847-28f30b07f103','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.489') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:663
[0m[33m[4.522ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('e27bc3ec-adbf-4f73-8671-0059bc24f30e','801b8a87-cffb-4599-889a-ac4a1d259a30',1,'2025-10-31 23:00:24.511') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:203
[0m[33m[1.135ms] [34;1m[rows:1][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE v2_game_files.id IN ('fb055717-44ed-40f9-ab6f-4f910a24ddea') ORDER BY created_at DESC
=== RUN   TestGetGameFilesWithoutTypesV2/fileIDが空でもエラーなし
=== RUN   TestGetGameFilesWithoutTypesV2/ファイルが複数でもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[0.781ms] [34;1m[rows:1][0m SELECT `id` FROM `v2_game_files` WHERE `v2_game_files`.`id` = 'e539cf6a-f9a6-4be5-b67b-665a8a6f918a'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:932
[0m[33m[0.766ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[3.269ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = '96fd8c8d-6e73-41a3-89ec-3f3db7609415' ORDER BY created_at DESC
=== RUN   TestCreateGameVersionV2/既にIDが同じバージョンが存在するのでエラー
=== RUN   TestGetGameVersionsV2/ファイルが複数でもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:778
[0m[33m[1.190ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestGetGameManagersByGameID/特に問題ないので問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[6.466ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('abe658b7-3072-4562-8073-1e5049bc1ee0','test','test',1,'2025-10-31 23:00:24.454'),('2f6eb285-2df9-4fa8-acfe-b03df85b6793','test','test',1,'2025-10-31 23:00:24.46') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[0.977ms] [34;1m[rows:2][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('53cad253-60d1-4ecd-ad41-4e998784e046','dad14871-e55e-4e47-a393-84e9a42e6fee',1,'hash','/path/to/game.exe','2025-10-31 23:00:24.46'),('d10b4216-c998-41d2-ba7c-62753be00ec1','dad14871-e55e-4e47-a393-84e9a42e6fee',1,'hash','/path/to/game.exe','2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:674
[0m[33m[2.164ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('0579a3ca-971b-462a-aea1-20aa98631cee','801b8a87-cffb-4599-889a-ac4a1d259a30',1,'2025-10-31 23:00:24.515') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[0.826ms] [34;1m[rows:2][0m INSERT INTO `game_version_game_file_relations` (`game_version_id`,`game_file_id`) VALUES ('0c8393c6-5d39-4e4a-a9b0-39eac2a1e82b','53cad253-60d1-4ecd-ad41-4e998784e046'),('0c8393c6-5d39-4e4a-a9b0-39eac2a1e82b','d10b4216-c998-41d2-ba7c-62753be00ec1') ON DUPLICATE KEY UPDATE `game_version_id`=`game_version_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[5.276ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('0c8393c6-5d39-4e4a-a9b0-39eac2a1e82b','dad14871-e55e-4e47-a393-84e9a42e6fee','aa0ed7e1-334d-4514-a651-07d3e63fa9b8','f349819a-2530-441d-8c78-e32afdb6ef3b','v1.0.0','リリース','2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[0.804ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('535cbf09-8c71-480f-b13f-6d40c7361676','6bc7b29f-9b71-426e-b2cd-ff287ffe43fe',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:799
[0m[33m[2.248ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('56f1a7a5-08e0-4b30-8b0e-e6d716460ad0','test','test',1,'2025-10-31 22:00:24.516') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:297
[0m[33m[1.045ms] [34;1m[rows:2][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('34328b92-92ef-4c36-8400-ccc5c5776b79','c4a91635-569f-4a15-ae56-a08d97d0c1bc',1,'68617368','/path/to/game.jar','2025-10-31 23:00:24.497'),('b66a5047-0de5-4f7c-b0e3-1fb4f6f09e1e','c4a91635-569f-4a15-ae56-a08d97d0c1bc',2,'68617368','/path/to/game.exe','2025-10-31 22:00:24.497') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[7.859ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('dad14871-e55e-4e47-a393-84e9a42e6fee','test','test',1,'2025-10-31 23:00:24.46') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:934
[0m[33m[0.775ms] [34;1m[rows:1][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('b2315b86-7d58-46f5-8842-dceff6424e2e','98762d71-0f7e-465e-82d2-312244198235',1) ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:297
[0m[33m[3.388ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('c4a91635-569f-4a15-ae56-a08d97d0c1bc','test','test',1,'2025-10-31 23:00:24.497') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[0.933ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('e1740fc5-cfcb-45c3-a057-2f2aac499ab2','6bc7b29f-9b71-426e-b2cd-ff287ffe43fe',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:822
[0m[33m[1.025ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('3efe64ec-9063-4326-9c86-5c98d147823e','56f1a7a5-08e0-4b30-8b0e-e6d716460ad0',1,'2025-10-31 22:00:24.474') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[0.767ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` IN ('30db85c7-f4aa-4edd-8a5a-43433cf821ec','d9c98f48-8ee2-42b1-8cbb-ac5f3f0ea874')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[3.762ms] [34;1m[rows:2][0m SELECT * FROM `v2_game_versions` WHERE id IN ('d9c98f48-8ee2-42b1-8cbb-ac5f3f0ea874','30db85c7-f4aa-4edd-8a5a-43433cf821ec')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:196
[0m[33m[0.867ms] [34;1m[rows:2][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '0c8393c6-5d39-4e4a-a9b0-39eac2a1e82b'
=== RUN   TestGetGameVersionsByIDsV2/ファイルがあってもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:203
[0m[33m[1.430ms] [34;1m[rows:2][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE v2_game_files.id IN ('34328b92-92ef-4c36-8400-ccc5c5776b79','b66a5047-0de5-4f7c-b0e3-1fb4f6f09e1e') ORDER BY created_at DESC

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:689
[0m[33m[3.452ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('d3918d7e-ce0a-481e-ae72-be2ff49700d0','801b8a87-cffb-4599-889a-ac4a1d259a30','e27bc3ec-adbf-4f73-8671-0059bc24f30e','0579a3ca-971b-462a-aea1-20aa98631cee','testGameVersion','test game version','2025-10-31 23:00:24.518') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:934
[0m[33m[4.943ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('b2315b86-7d58-46f5-8842-dceff6424e2e','test','test',1,'2025-10-31 23:00:24.516') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:822
[0m[33m[1.372ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('eb5f5753-459e-46f4-b19f-8a8b2a330f27','56f1a7a5-08e0-4b30-8b0e-e6d716460ad0',1,'2025-10-31 22:00:24.474') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1290
[0m[33m[6.089ms] [34;1m[rows:1][0m DELETE FROM `game_play_logs` WHERE `game_play_logs`.`id` = '499e8dd3-9192-42e5-bd02-43429e84c1b6'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[1.152ms] [34;1m[rows:2][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('c94963e0-aa33-4097-9316-8ee6214b1601','6bc7b29f-9b71-426e-b2cd-ff287ffe43fe',1,'hash','/path/to/game.exe','2025-10-31 23:00:24.458'),('76a325ed-0129-4f67-b55a-1fb1487ca7b3','6bc7b29f-9b71-426e-b2cd-ff287ffe43fe',1,'hash','/path/to/game.exe','2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`
=== RUN   TestGetGameFilesWithoutTypesV2/対応するファイルが存在しない場合もエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:196
[0m[33m[1.281ms] [34;1m[rows:2][0m SELECT `id` FROM `v2_game_files` WHERE `v2_game_files`.`id` IN ('53cad253-60d1-4ecd-ad41-4e998784e046','d10b4216-c998-41d2-ba7c-62753be00ec1')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:196
[0m[33m[3.136ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = 'dad14871-e55e-4e47-a393-84e9a42e6fee' ORDER BY created_at DESC,`v2_game_versions`.`id` LIMIT 1
=== RUN   TestGetLatestGameVersionV2/lockありでもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:158
[0m[33m[1.163ms] [34;1m[rows:1][0m SELECT `game_management_roles`.`game_id`,`game_management_roles`.`user_id`,`game_management_roles`.`role_type_id`,`RoleTypeTable`.`id` AS `RoleTypeTable__id`,`RoleTypeTable`.`name` AS `RoleTypeTable__name`,`RoleTypeTable`.`active` AS `RoleTypeTable__active` FROM `game_management_roles` LEFT JOIN `game_management_role_types` `RoleTypeTable` ON `game_management_roles`.`role_type_id` = `RoleTypeTable`.`id` WHERE game_id = 'b2315b86-7d58-46f5-8842-dceff6424e2e'
=== RUN   TestGetGameManagersByGameID/roleがcollaboratorでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[1.211ms] [34;1m[rows:2][0m INSERT INTO `game_version_game_file_relations` (`game_version_id`,`game_file_id`) VALUES ('2848f1d2-66e7-4360-bc20-dfff0725ef36','c94963e0-aa33-4097-9316-8ee6214b1601'),('2848f1d2-66e7-4360-bc20-dfff0725ef36','76a325ed-0129-4f67-b55a-1fb1487ca7b3') ON DUPLICATE KEY UPDATE `game_version_id`=`game_version_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[5.225ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('2848f1d2-66e7-4360-bc20-dfff0725ef36','6bc7b29f-9b71-426e-b2cd-ff287ffe43fe','535cbf09-8c71-480f-b13f-6d40c7361676','e1740fc5-cfcb-45c3-a057-2f2aac499ab2','v1.0.0','リリース','2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:822
[0m[33m[4.855ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('571de12c-fecb-4993-9407-7f5af59af20f','56f1a7a5-08e0-4b30-8b0e-e6d716460ad0','3efe64ec-9063-4326-9c86-5c98d147823e','eb5f5753-459e-46f4-b19f-8a8b2a330f27','v1.0.0','リリース','https://example.com','2025-10-31 22:00:24.474') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[1.026ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('d94b54b6-1375-4bae-90c0-25dd2118bc4b','2e7fa99d-856d-4e2a-bbfb-38472d86e865',1,'2025-10-31 23:00:24.464') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:701
[0m[33m[2.508ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`) VALUES ('d874f403-e9f9-41f4-8ab5-c7f04ddabe12','ef7b91c7-7f82-4c72-953b-9769635187e9','801b8a87-cffb-4599-889a-ac4a1d259a30','d3918d7e-ce0a-481e-ae72-be2ff49700d0') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`
=== RUN   TestUpdateGamePlayLogEndTime/正しく更新できる

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[7.834ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('6bc7b29f-9b71-426e-b2cd-ff287ffe43fe','test','test',1,'2025-10-31 23:00:24.458') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[0.937ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('68086b89-86dd-4656-bfea-e733d717f9b0','7c4cc714-eb5c-4722-a8fe-689afbd370f7',1,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:203
[0m[33m[2.721ms] [34;1m[rows:0][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE v2_game_files.id IN ('de217076-5c1f-4136-ae83-f711406a5731') ORDER BY created_at DESC
=== RUN   TestGetGameFilesWithoutTypesV2/行ロックを取ってもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[0.939ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('fd676d21-8fac-4fcd-a8ae-ed2e22d974a4','2e7fa99d-856d-4e2a-bbfb-38472d86e865',1,'2025-10-31 23:00:24.464') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:738
[0m[33m[0.880ms] [34;1m[rows:1][0m SELECT * FROM `game_play_logs` WHERE id = 'd874f403-e9f9-41f4-8ab5-c7f04ddabe12' ORDER BY `game_play_logs`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:934
[0m[33m[0.839ms] [34;1m[rows:1][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('484b0528-c138-4d1e-95da-4856749c0b28','5535acd1-56b8-4bfd-a009-48650573abb2',2) ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[0.923ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('3136bf07-e42e-4a5f-981e-6559cdad6486','7c4cc714-eb5c-4722-a8fe-689afbd370f7',1,'2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:831
[0m[33m[2.024ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('eb6ddab0-bc57-4bd0-a27e-36093e467ea6','56f1a7a5-08e0-4b30-8b0e-e6d716460ad0',1,'2025-10-31 23:00:24.523') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:117
[0m[33m[1.534ms] [34;1m[rows:1][0m SELECT count(*) FROM `v2_game_versions` WHERE game_id = '6bc7b29f-9b71-426e-b2cd-ff287ffe43fe'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1291
[0m[33m[4.318ms] [34;1m[rows:1][0m DELETE FROM `game_play_logs` WHERE `game_play_logs`.`id` = 'f60b9629-95aa-422b-8d20-1a95f7636ade'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[0.901ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('1ee0df8c-82e7-4b9a-862b-09781f3f4c9e','2e7fa99d-856d-4e2a-bbfb-38472d86e865',1,'hash','/path/to/game.exe','2025-10-31 23:00:24.464') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[3.271ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('f2d7b468-55cf-4d03-bca7-d56d7a8c8746','7c4cc714-eb5c-4722-a8fe-689afbd370f7','68086b89-86dd-4656-bfea-e733d717f9b0','3136bf07-e42e-4a5f-981e-6559cdad6486','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.46') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:934
[0m[33m[3.945ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('484b0528-c138-4d1e-95da-4856749c0b28','test','test',1,'2025-10-31 23:00:24.516') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:297
[0m[33m[1.184ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('bcdfa9cb-9de5-489c-9897-f793b506fcd8','d8fd99c8-753a-482f-a7ed-a417b0ac7c9d',1,'68617368','/path/to/game.jar','2025-10-31 23:00:24.497') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[1.176ms] [34;1m[rows:1][0m INSERT INTO `game_version_game_file_relations` (`game_version_id`,`game_file_id`) VALUES ('9ffcc401-e58b-405d-83c1-e7eb0b015b0d','1ee0df8c-82e7-4b9a-862b-09781f3f4c9e') ON DUPLICATE KEY UPDATE `game_version_id`=`game_version_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[5.245ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('9ffcc401-e58b-405d-83c1-e7eb0b015b0d','2e7fa99d-856d-4e2a-bbfb-38472d86e865','d94b54b6-1375-4bae-90c0-25dd2118bc4b','fd676d21-8fac-4fcd-a8ae-ed2e22d974a4','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.489') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[0.575ms] [34;1m[rows:2][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '2848f1d2-66e7-4360-bc20-dfff0725ef36'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:158
[0m[33m[1.187ms] [34;1m[rows:1][0m SELECT `game_management_roles`.`game_id`,`game_management_roles`.`user_id`,`game_management_roles`.`role_type_id`,`RoleTypeTable`.`id` AS `RoleTypeTable__id`,`RoleTypeTable`.`name` AS `RoleTypeTable__name`,`RoleTypeTable`.`active` AS `RoleTypeTable__active` FROM `game_management_roles` LEFT JOIN `game_management_role_types` `RoleTypeTable` ON `game_management_roles`.`role_type_id` = `RoleTypeTable`.`id` WHERE game_id = '484b0528-c138-4d1e-95da-4856749c0b28'
=== RUN   TestGetGameManagersByGameID/roleが存在しなくても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:845
[0m[33m[3.364ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('c24dd662-2d9c-46f5-8340-5619d4d7d912','56f1a7a5-08e0-4b30-8b0e-e6d716460ad0',1,'2025-10-31 23:00:24.525') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:110
[0m[33m[3.948ms] [34;1m[rows:1][0m UPDATE `game_play_logs` SET `end_time`='2025-10-31 23:00:24.524',`updated_at`='2025-10-31 23:00:24.525' WHERE id = 'd874f403-e9f9-41f4-8ab5-c7f04ddabe12'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file_test.go:297
[0m[33m[4.364ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('d8fd99c8-753a-482f-a7ed-a417b0ac7c9d','test','test',1,'2025-10-31 23:00:24.497') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1292
[0m[33m[3.025ms] [34;1m[rows:1][0m DELETE FROM `v2_game_versions` WHERE `v2_game_versions`.`id` = '00348152-30b2-4ac4-9c38-79a59146384f'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[8.302ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('2e7fa99d-856d-4e2a-bbfb-38472d86e865','test','test',1,'2025-10-31 23:00:24.464') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2272
[0m[33m[6.854ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('7c4cc714-eb5c-4722-a8fe-689afbd370f7','test','test',1,'2025-10-31 23:00:24.46') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[1.496ms] [34;1m[rows:2][0m SELECT `id` FROM `v2_game_files` WHERE `v2_game_files`.`id` IN ('76a325ed-0129-4f67-b55a-1fb1487ca7b3','c94963e0-aa33-4097-9316-8ee6214b1601')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[3.950ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = '6bc7b29f-9b71-426e-b2cd-ff287ffe43fe' ORDER BY created_at DESC
=== RUN   TestGetGameVersionsV2/limitが存在してもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[1.003ms] [34;1m[rows:1][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '9ffcc401-e58b-405d-83c1-e7eb0b015b0d'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:934
[0m[33m[2.959ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('476fe555-5771-4643-acea-b949bdff1c1e','test','test',1,'2025-10-31 23:00:24.516') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:51 [35;1mError 1062 (23000): Duplicate entry '571de12c-fecb-4993-9407-7f5af59af20f' for key 'PRIMARY'
[0m[33m[2.793ms] [34;1m[rows:0][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('571de12c-fecb-4993-9407-7f5af59af20f','56f1a7a5-08e0-4b30-8b0e-e6d716460ad0','eb6ddab0-bc57-4bd0-a27e-36093e467ea6','c24dd662-2d9c-46f5-8340-5619d4d7d912','v1.1.0','アップデート','https://example.com','2025-10-31 23:00:24.474') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1293
[0m[33m[2.963ms] [34;1m[rows:1][0m DELETE FROM `v2_game_videos` WHERE `v2_game_videos`.`id` = 'b61387c3-2187-4ebc-a1f5-d7a10154b0fc'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[0.921ms] [34;1m[rows:1][0m SELECT `id` FROM `v2_game_files` WHERE `v2_game_files`.`id` = '1ee0df8c-82e7-4b9a-862b-09781f3f4c9e'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[3.229ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE id IN ('9ffcc401-e58b-405d-83c1-e7eb0b015b0d') FOR UPDATE
=== RUN   TestGetGameVersionsByIDsV2/ファイルが複数でもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:158
[0m[33m[1.188ms] [34;1m[rows:0][0m SELECT `game_management_roles`.`game_id`,`game_management_roles`.`user_id`,`game_management_roles`.`role_type_id`,`RoleTypeTable`.`id` AS `RoleTypeTable__id`,`RoleTypeTable`.`name` AS `RoleTypeTable__name`,`RoleTypeTable`.`active` AS `RoleTypeTable__active` FROM `game_management_roles` LEFT JOIN `game_management_role_types` `RoleTypeTable` ON `game_management_roles`.`role_type_id` = `RoleTypeTable`.`id` WHERE game_id = '476fe555-5771-4643-acea-b949bdff1c1e'
=== RUN   TestGetGameManagersByGameID/gameが存在しなくても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_file.go:203
[0m[33m[3.636ms] [34;1m[rows:1][0m SELECT `v2_game_files`.`id`,`v2_game_files`.`game_id`,`v2_game_files`.`file_type_id`,`v2_game_files`.`hash`,`v2_game_files`.`entry_point`,`v2_game_files`.`created_at`,`GameFileType`.`id` AS `GameFileType__id`,`GameFileType`.`name` AS `GameFileType__name`,`GameFileType`.`active` AS `GameFileType__active` FROM `v2_game_files` LEFT JOIN `game_file_types` `GameFileType` ON `v2_game_files`.`file_type_id` = `GameFileType`.`id` WHERE v2_game_files.id IN ('bcdfa9cb-9de5-489c-9897-f793b506fcd8') ORDER BY created_at DESC FOR UPDATE
--- PASS: TestGetGameFilesWithoutTypesV2 (0.04s)
    --- PASS: TestGetGameFilesWithoutTypesV2/特に問題ないのでエラーなし (0.01s)
    --- PASS: TestGetGameFilesWithoutTypesV2/windowsでもエラーなし (0.01s)
    --- PASS: TestGetGameFilesWithoutTypesV2/macでもエラーなし (0.01s)
    --- PASS: TestGetGameFilesWithoutTypesV2/fileIDが空でもエラーなし (0.00s)
    --- PASS: TestGetGameFilesWithoutTypesV2/ファイルが複数でもエラーなし (0.01s)
    --- PASS: TestGetGameFilesWithoutTypesV2/対応するファイルが存在しない場合もエラーなし (0.00s)
    --- PASS: TestGetGameFilesWithoutTypesV2/行ロックを取ってもエラーなし (0.01s)
=== CONT  TestCreateLauncherSession

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[1.178ms] [34;1m[rows:2][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('f276f2f6-bda1-4937-adc3-5c845006be1a','444fd74f-1582-46ae-9fa9-0c30d3b2ac29',1,'2025-10-31 23:00:24.458'),('dfce9873-dfc6-400f-a911-316224a8222e','444fd74f-1582-46ae-9fa9-0c30d3b2ac29',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:755
[0m[33m[4.270ms] [34;1m[rows:1][0m SELECT * FROM `game_play_logs` WHERE id = 'd874f403-e9f9-41f4-8ab5-c7f04ddabe12' ORDER BY `game_play_logs`.`id` LIMIT 1
=== RUN   TestUpdateGamePlayLogEndTime/存在しないIDの場合、ErrNoRecordUpdatedが返される

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:158
[0m[33m[1.257ms] [34;1m[rows:0][0m SELECT `game_management_roles`.`game_id`,`game_management_roles`.`user_id`,`game_management_roles`.`role_type_id`,`RoleTypeTable`.`id` AS `RoleTypeTable__id`,`RoleTypeTable`.`name` AS `RoleTypeTable__name`,`RoleTypeTable`.`active` AS `RoleTypeTable__active` FROM `game_management_roles` LEFT JOIN `game_management_role_types` `RoleTypeTable` ON `game_management_roles`.`role_type_id` = `RoleTypeTable`.`id` WHERE game_id = 'df4801b7-e28a-4300-921c-3ffbe5208042'
=== RUN   TestGetGameManagersByGameID/roleが複数でも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[1.148ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '571de12c-fecb-4993-9407-7f5af59af20f'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[2.529ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = '56f1a7a5-08e0-4b30-8b0e-e6d716460ad0'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1294
[0m[33m[2.498ms] [34;1m[rows:1][0m DELETE FROM `v2_game_images` WHERE `v2_game_images`.`id` = '99b61c5a-b313-4ab8-92c5-80fafed89a80'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:196
[0m[33m[1.234ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = 'f2d7b468-55cf-4d03-bca7-d56d7a8c8746'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:196
[0m[33m[5.443ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = '7c4cc714-eb5c-4722-a8fe-689afbd370f7' ORDER BY created_at DESC,`v2_game_versions`.`id` LIMIT 1
=== CONT  TestGetLauncherUserByProductKey
--- PASS: TestGetLatestGameVersionV2 (0.08s)
    --- PASS: TestGetLatestGameVersionV2/特に問題ないのでエラーなし (0.01s)
    --- PASS: TestGetLatestGameVersionV2/ゲームが存在しないのでRecordNotFound (0.00s)
    --- PASS: TestGetLatestGameVersionV2/バージョンが複数あっても最新のものを取得 (0.01s)
    --- PASS: TestGetLatestGameVersionV2/バージョンが存在しないのでRecordNotFound (0.00s)
    --- PASS: TestGetLatestGameVersionV2/別のゲームのバージョンが混ざることはない (0.01s)
    --- PASS: TestGetLatestGameVersionV2/ファイルが存在してもエラーなし (0.01s)
    --- PASS: TestGetLatestGameVersionV2/ファイルが複数でもエラーなし (0.01s)
    --- PASS: TestGetLatestGameVersionV2/lockありでもエラーなし (0.01s)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[1.860ms] [34;1m[rows:2][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('afa0366b-3437-43fa-9d4f-4b6ae6411b5a','444fd74f-1582-46ae-9fa9-0c30d3b2ac29',1,'2025-10-31 23:00:24.458'),('be8d5128-6562-4135-a23f-86ce61005ec3','444fd74f-1582-46ae-9fa9-0c30d3b2ac29',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_session_test.go:58 [35;1mError 1054 (42S22): Unknown column 'edition_id' in 'field list'
[0m[33m[0.752ms] [34;1m[rows:0][0m INSERT INTO `launcher_users` (`id`,`edition_id`,`product_key`,`created_at`) VALUES ('a4069452-65d0-4b93-b5c6-926c60993507','32257350-9c50-45c8-b819-fbd4b79ce0f5','NKlSQ-Mrkxl-yyri2-s4lzU-46kmZ','2025-10-31 23:00:24.533') ON DUPLICATE KEY UPDATE `edition_id`=VALUES(`edition_id`) RETURNING `created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:932
[0m[33m[1.055ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`deleted_at` IS NULL
=== RUN   TestCreateGameVersionV2/同名のバージョンが存在するのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[1.112ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('96b9d6e0-2c79-4cc5-9ec6-f94eb0d65ac5','00be898b-88e8-466b-b7c7-aa11e47d7e41',1,'2025-10-31 23:00:24.468') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_session_test.go:58 [35;1mError 1054 (42S22): Unknown column 'edition_id' in 'field list'
[0m[33m[3.182ms] [34;1m[rows:1][0m INSERT INTO `launcher_versions` (`id`,`name`,`created_at`) VALUES ('32257350-9c50-45c8-b819-fbd4b79ce0f5','TestCreateLauncherSession','2025-10-31 23:00:24.533') RETURNING `questionnaire_url`,`created_at`,`deleted_at`
=== NAME  TestCreateLauncherSession
    launcher_session_test.go:60: failed to create launcher version: Error 1054 (42S22): Unknown column 'edition_id' in 'field list'
=== RUN   TestCreateLauncherSession/入出力問題ないのでエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:110
[0m[33m[3.118ms] [34;1m[rows:0][0m UPDATE `game_play_logs` SET `end_time`='2025-10-31 23:00:24.524',`updated_at`='2025-10-31 23:00:24.534' WHERE id = '4f38c237-5d48-40ef-bb90-4292b1b5efdd'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[4.440ms] [34;1m[rows:2][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('d0c0981e-7eff-4437-990f-133f4ee8c91a','444fd74f-1582-46ae-9fa9-0c30d3b2ac29','f276f2f6-bda1-4937-adc3-5c845006be1a','afa0366b-3437-43fa-9d4f-4b6ae6411b5a','v1.1.0','アップデート','https://example.com','2025-10-31 23:00:24.458'),('23a2f4e9-a3cf-4d87-81f7-1fc165fa58df','444fd74f-1582-46ae-9fa9-0c30d3b2ac29','dfce9873-dfc6-400f-a911-316224a8222e','be8d5128-6562-4135-a23f-86ce61005ec3','v1.0.0','リリース','https://example.com','2025-10-31 22:00:24.458') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_user_test.go:274 [35;1mError 1054 (42S22): Unknown column 'edition_id' in 'field list'
[0m[33m[0.721ms] [34;1m[rows:0][0m INSERT INTO `launcher_users` (`id`,`edition_id`,`product_key`,`created_at`) VALUES ('779cb5aa-35a5-4107-8a86-1dac955185cc','aee8a781-0b97-4612-857d-085b005702d0','0pIMx-hj7e2-FtMYD-Z2588-6zMx5','2025-10-31 23:00:24.534') ON DUPLICATE KEY UPDATE `edition_id`=VALUES(`edition_id`) RETURNING `created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[7.959ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('444fd74f-1582-46ae-9fa9-0c30d3b2ac29','test','test',1,'2025-10-31 23:00:24.458') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[1.945ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('40342c54-f2cc-4c4c-8a0e-bbe85fbbce03','00be898b-88e8-466b-b7c7-aa11e47d7e41',1,'2025-10-31 23:00:24.468') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_user_test.go:274 [35;1mError 1054 (42S22): Unknown column 'edition_id' in 'field list'
[0m[33m[3.306ms] [34;1m[rows:1][0m INSERT INTO `launcher_versions` (`id`,`name`,`created_at`) VALUES ('aee8a781-0b97-4612-857d-085b005702d0','TestGetLauncherUserByProductKey','2025-10-31 23:00:24.534') RETURNING `questionnaire_url`,`created_at`,`deleted_at`
=== NAME  TestGetLauncherUserByProductKey
    launcher_user_test.go:276: failed to create launcher version: Error 1054 (42S22): Unknown column 'edition_id' in 'field list'
=== RUN   TestGetLauncherUserByProductKey/ユーザーが存在するのでエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:934
[0m[33m[1.860ms] [34;1m[rows:2][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('d33ac39f-f0a2-4937-9adf-5c246ff217ae','bd8bd9cc-2a12-4c1a-bed1-a1b0584f1ab4',1),('d33ac39f-f0a2-4937-9adf-5c246ff217ae','8089eb8a-29da-434a-8f25-177da05d4fb7',2) ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1295
[0m[33m[4.226ms] [34;1m[rows:1][0m DELETE FROM `games` WHERE `games`.`id` = '677cfac9-0ce4-4e20-8ff5-428122934a8b'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:117
[0m[33m[1.336ms] [34;1m[rows:1][0m SELECT count(*) FROM `v2_game_versions` WHERE game_id = '444fd74f-1582-46ae-9fa9-0c30d3b2ac29'

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_user.go:83 [35;1mrecord not found
[0m[33m[0.954ms] [34;1m[rows:0][0m SELECT * FROM `launcher_users` WHERE product_key = '0pIMx-hj7e2-FtMYD-Z2588-6zMx5' AND `launcher_users`.`deleted_at` IS NULL LIMIT 1
    launcher_user_test.go:312: 
        	Error Trace:	/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_user_test.go:312
        	Error:      	Received unexpected error:
        	            	record not found
        	Test:       	TestGetLauncherUserByProductKey/ユーザーが存在するのでエラーなし
=== RUN   TestGetLauncherUserByProductKey/ユーザーが存在しないのでエラー

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_session.go:38 [35;1mError 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`trap_collection`.`launcher_sessions`, CONSTRAINT `fk_launcher_users_launcher_sessions` FOREIGN KEY (`launcher_user_id`) REFERENCES `launcher_users` (`id`))
[0m[33m[2.924ms] [34;1m[rows:0][0m INSERT INTO `launcher_sessions` (`id`,`launcher_user_id`,`access_token`,`expires_at`,`created_at`) VALUES ('771f692d-6da1-4abd-8913-f50e66c0454a','a4069452-65d0-4b93-b5c6-926c60993507','iipv4DxrCurlnISDaMp2YRaJuTKFb8UOJqOF5icpFvgfdV3JXxqAKcGDmm0FGLd6','2025-11-01 00:00:24.536','2025-10-31 23:00:24.536') RETURNING `created_at`,`deleted_at`
=== NAME  TestCreateLauncherSession/入出力問題ないのでエラーなし
    launcher_session_test.go:114: 
        	Error Trace:	/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_session_test.go:114
        	Error:      	Received unexpected error:
        	            	failed to create launcher session: Error 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`trap_collection`.`launcher_sessions`, CONSTRAINT `fk_launcher_users_launcher_sessions` FOREIGN KEY (`launcher_user_id`) REFERENCES `launcher_users` (`id`))
        	Test:       	TestCreateLauncherSession/入出力問題ないのでエラーなし
=== RUN   TestCreateLauncherSession/同一のアクセストークンが存在するのでエラー

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_user.go:83 [35;1mrecord not found
[0m[33m[0.971ms] [34;1m[rows:0][0m SELECT * FROM `launcher_users` WHERE product_key = 'rBHXt-uXfnX-A7H00-mQmE9-kmUOa' AND `launcher_users`.`deleted_at` IS NULL LIMIT 1
--- FAIL: TestGetLauncherUserByProductKey (0.01s)
    --- FAIL: TestGetLauncherUserByProductKey/ユーザーが存在するのでエラーなし (0.00s)
    --- PASS: TestGetLauncherUserByProductKey/ユーザーが存在しないのでエラー (0.00s)
=== CONT  TestGetGameManagementRole

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:799
[0m[33m[5.081ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('75148346-b28a-4c71-add9-24c809be9dda','test','test',1,'2025-10-31 22:00:24.535') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[1.141ms] [34;1m[rows:2][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('607e893b-39f8-48d0-a83c-e560dee15a58','00be898b-88e8-466b-b7c7-aa11e47d7e41',1,'hash','/path/to/game.exe','2025-10-31 23:00:24.468'),('b1c2635c-cb91-435a-97b5-72dbf96e6ca1','00be898b-88e8-466b-b7c7-aa11e47d7e41',1,'hash','/path/to/game.exe','2025-10-31 23:01:24.468') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1023
[0m[33m[0.466ms] [34;1m[rows:2][0m SELECT * FROM `game_management_role_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:1296
[0m[33m[2.298ms] [34;1m[rows:1][0m DELETE FROM `editions` WHERE `editions`.`id` = 'aa2d222c-b7ad-48ff-b1aa-52803ef334b3'
--- PASS: TestGetEditionPlayStats (0.08s)
    --- PASS: TestGetEditionPlayStats/正常に取得できる (0.00s)
    --- PASS: TestGetEditionPlayStats/プレイ中のログも含めて正常に取得できる (0.00s)
    --- PASS: TestGetEditionPlayStats/endTimeがNULLで進行中のプレイログの取得 (0.00s)
    --- PASS: TestGetEditionPlayStats/存在しないeditionIDで取得しようとするとErrRecordNotFound (0.00s)
=== CONT  TestGetGameImages

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:934
[0m[33m[7.069ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('d33ac39f-f0a2-4937-9adf-5c246ff217ae','test','test',1,'2025-10-31 23:00:24.516') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:707
[0m[33m[4.591ms] [34;1m[rows:1][0m DELETE FROM `game_play_logs` WHERE id = 'd874f403-e9f9-41f4-8ab5-c7f04ddabe12'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[0.920ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = 'd0c0981e-7eff-4437-990f-133f4ee8c91a'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[2.279ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = '444fd74f-1582-46ae-9fa9-0c30d3b2ac29' ORDER BY created_at DESC LIMIT 1
=== RUN   TestGetGameVersionsV2/limit,offsetが存在してもエラーなし

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_session.go:38 [35;1mError 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`trap_collection`.`launcher_sessions`, CONSTRAINT `fk_launcher_users_launcher_sessions` FOREIGN KEY (`launcher_user_id`) REFERENCES `launcher_users` (`id`))
[0m[33m[2.146ms] [34;1m[rows:0][0m INSERT INTO `launcher_sessions` (`id`,`launcher_user_id`,`access_token`,`expires_at`,`created_at`) VALUES ('93787de2-6968-4b47-8111-f493b8b1be27','a4069452-65d0-4b93-b5c6-926c60993507','iipv4DxrCurlnISDaMp2YRaJuTKFb8UOJqOF5icpFvgfdV3JXxqAKcGDmm0FGLd6','2025-11-01 00:00:24.536','2025-10-31 23:00:24.539') RETURNING `created_at`,`deleted_at`
=== RUN   TestCreateLauncherSession/ユーザーIDが存在しないのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[1.042ms] [34;1m[rows:2][0m INSERT INTO `game_version_game_file_relations` (`game_version_id`,`game_file_id`) VALUES ('2ed5bf04-6bf3-4dd1-924c-79d7453c831a','607e893b-39f8-48d0-a83c-e560dee15a58'),('2ed5bf04-6bf3-4dd1-924c-79d7453c831a','b1c2635c-cb91-435a-97b5-72dbf96e6ca1') ON DUPLICATE KEY UPDATE `game_version_id`=`game_version_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:537
[0m[33m[0.755ms] [34;1m[rows:3][0m SELECT * FROM `game_image_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[7.261ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('2ed5bf04-6bf3-4dd1-924c-79d7453c831a','00be898b-88e8-466b-b7c7-aa11e47d7e41','96b9d6e0-2c79-4cc5-9ec6-f94eb0d65ac5','40342c54-f2cc-4c4c-8a0e-bbe85fbbce03','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.489') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1037
[0m[33m[1.057ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestGetGameManagementRole/特に問題ないので問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:158
[0m[33m[1.252ms] [34;1m[rows:2][0m SELECT `game_management_roles`.`game_id`,`game_management_roles`.`user_id`,`game_management_roles`.`role_type_id`,`RoleTypeTable`.`id` AS `RoleTypeTable__id`,`RoleTypeTable`.`name` AS `RoleTypeTable__name`,`RoleTypeTable`.`active` AS `RoleTypeTable__active` FROM `game_management_roles` LEFT JOIN `game_management_role_types` `RoleTypeTable` ON `game_management_roles`.`role_type_id` = `RoleTypeTable`.`id` WHERE game_id = 'd33ac39f-f0a2-4937-9adf-5c246ff217ae'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:822
[0m[33m[1.402ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('501c4ac0-6fe3-46f3-9ce7-c83558ae51cb','75148346-b28a-4c71-add9-24c809be9dda',1,'2025-10-31 22:00:24.474') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`
=== RUN   TestGetGameManagersByGameID/他のgameにroleがあっても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:551
[0m[33m[1.133ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestGetGameImages/特に問題ないので問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[10.856ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('00be898b-88e8-466b-b7c7-aa11e47d7e41','test','test',1,'2025-10-31 23:00:24.468') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/launcher_session.go:38 [35;1mError 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`trap_collection`.`launcher_sessions`, CONSTRAINT `fk_launcher_users_launcher_sessions` FOREIGN KEY (`launcher_user_id`) REFERENCES `launcher_users` (`id`))
[0m[33m[2.038ms] [34;1m[rows:0][0m INSERT INTO `launcher_sessions` (`id`,`launcher_user_id`,`access_token`,`expires_at`,`created_at`) VALUES ('0bf46406-167e-4a53-8e42-ceb362f618d6','d211e846-e82e-4d2f-a5a2-15fafe63579e','kHM8Mm7ziMUIAjkhD9P7YHsODu4oWSRh8eNTZFFn556cZXC8VwLSstydWdgtGQFS','2025-11-01 00:00:24.536','2025-10-31 23:00:24.542') RETURNING `created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:708
[0m[33m[2.704ms] [34;1m[rows:1][0m DELETE FROM `v2_game_versions` WHERE id = 'd3918d7e-ce0a-481e-ae72-be2ff49700d0'
--- FAIL: TestCreateLauncherSession (0.01s)
    --- FAIL: TestCreateLauncherSession/入出力問題ないのでエラーなし (0.00s)
    --- PASS: TestCreateLauncherSession/同一のアクセストークンが存在するのでエラー (0.00s)
    --- PASS: TestCreateLauncherSession/ユーザーIDが存在しないのでエラー (0.00s)
=== CONT  TestAddGameManagementRoles

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:822
[0m[33m[1.504ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('6a9b2f83-0486-4eb6-9be7-cd81c425a09c','75148346-b28a-4c71-add9-24c809be9dda',1,'2025-10-31 22:00:24.474') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[1.399ms] [34;1m[rows:2][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('257d101a-6525-4c65-ab35-e55b11d33914','a734d074-e0ea-4dac-8e8d-6f786dd3f1ed',1,'2025-10-31 23:00:24.458'),('5981b93d-2df3-4030-a7a2-b8e3da3fc16f','a734d074-e0ea-4dac-8e8d-6f786dd3f1ed',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1280
[0m[33m[0.753ms] [34;1m[rows:1][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('31798ad1-d5eb-4fc2-b5fc-382b8e7b72ae','92d6c044-3e74-4303-8e46-e377b024c5ef',1) ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:54
[0m[33m[0.823ms] [34;1m[rows:2][0m SELECT * FROM `game_management_role_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[1.046ms] [34;1m[rows:2][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '2ed5bf04-6bf3-4dd1-924c-79d7453c831a'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:703
[0m[33m[1.149ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('077d31a6-6036-4be1-9756-83a4eddacb62','7469aad3-30ab-41d9-9410-25c2969306b4',1,'2025-10-31 23:00:24.543') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:934
[0m[33m[1.055ms] [34;1m[rows:2][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('80b1c764-caf8-4362-858a-a320f7ee23d5','5d1e3efe-c4fe-4349-8b9f-a23403a2e8a0',1),('5c9ef8d9-a2d8-4b63-97b1-46e01241605a','6e68adc1-683c-4062-93c7-0ef051343545',1) ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[1.214ms] [34;1m[rows:2][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('2f9452a4-300c-47d3-8eb8-a73988c6b45a','a734d074-e0ea-4dac-8e8d-6f786dd3f1ed',1,'2025-10-31 23:00:24.458'),('cdd2fb5a-9a11-4a07-8e1b-ae87f4dbe01d','a734d074-e0ea-4dac-8e8d-6f786dd3f1ed',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:68
[0m[33m[1.077ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestAddGameManagementRoles/特に問題ないので問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1280
[0m[33m[4.251ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('31798ad1-d5eb-4fc2-b5fc-382b8e7b72ae','test','test',1,'2025-10-31 23:00:24.542') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[1.269ms] [34;1m[rows:2][0m SELECT `id` FROM `v2_game_files` WHERE `v2_game_files`.`id` IN ('607e893b-39f8-48d0-a83c-e560dee15a58','b1c2635c-cb91-435a-97b5-72dbf96e6ca1')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[3.809ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE id IN ('2ed5bf04-6bf3-4dd1-924c-79d7453c831a') FOR UPDATE
=== RUN   TestGetGameVersionsByIDsV2/URLがなくてもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:200
[0m[33m[0.828ms] [34;1m[rows:1][0m SELECT RoleTypeTable.Name,`RoleTypeTable`.`id` AS `RoleTypeTable__id`,`RoleTypeTable`.`name` AS `RoleTypeTable__name`,`RoleTypeTable`.`active` AS `RoleTypeTable__active` FROM `game_management_roles` LEFT JOIN `game_management_role_types` `RoleTypeTable` ON `game_management_roles`.`role_type_id` = `RoleTypeTable`.`id` WHERE game_id = '31798ad1-d5eb-4fc2-b5fc-382b8e7b72ae' AND user_id = '92d6c044-3e74-4303-8e46-e377b024c5ef' LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[4.155ms] [34;1m[rows:2][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('335508d7-add8-4e89-93d7-956f44b19878','a734d074-e0ea-4dac-8e8d-6f786dd3f1ed','257d101a-6525-4c65-ab35-e55b11d33914','2f9452a4-300c-47d3-8eb8-a73988c6b45a','v1.1.0','アップデート','https://example.com','2025-10-31 23:00:24.458'),('bb048510-b602-419a-be81-91c21a92a4de','a734d074-e0ea-4dac-8e8d-6f786dd3f1ed','5981b93d-2df3-4030-a7a2-b8e3da3fc16f','cdd2fb5a-9a11-4a07-8e1b-ae87f4dbe01d','v1.0.0','リリース','https://example.com','2025-10-31 22:00:24.458') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`
=== RUN   TestGetGameManagementRole/roleがcollatorでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:822
[0m[33m[6.877ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('65bc1b5e-c4f9-43f8-8f94-96abf6e5b561','75148346-b28a-4c71-add9-24c809be9dda','501c4ac0-6fe3-46f3-9ce7-c83558ae51cb','6a9b2f83-0486-4eb6-9be7-cd81c425a09c','v1.0.0','リリース','https://example.com','2025-10-31 22:00:24.474') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:703
[0m[33m[4.463ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('7469aad3-30ab-41d9-9410-25c2969306b4','test','test',1,'2025-10-31 23:00:24.543') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:709
[0m[33m[3.595ms] [34;1m[rows:1][0m DELETE FROM `v2_game_videos` WHERE id = '0579a3ca-971b-462a-aea1-20aa98631cee'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:934
[0m[33m[6.110ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('80b1c764-caf8-4362-858a-a320f7ee23d5','test','test',1,'2025-10-31 23:00:24.516'),('5c9ef8d9-a2d8-4b63-97b1-46e01241605a','test','test',1,'2025-10-31 23:00:24.516') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[7.353ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('a734d074-e0ea-4dac-8e8d-6f786dd3f1ed','test','test',1,'2025-10-31 23:00:24.458') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:146
[0m[33m[2.809ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('d141eb1a-60b0-4192-8616-c0e8b357cf2f','test','test',1,'2025-10-31 23:00:24.546') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:129
[0m[33m[1.634ms] [34;1m[rows:1][0m SELECT `v2_game_images`.`id`,`v2_game_images`.`game_id`,`v2_game_images`.`image_type_id`,`v2_game_images`.`created_at`,`GameImageType`.`id` AS `GameImageType__id`,`GameImageType`.`name` AS `GameImageType__name`,`GameImageType`.`active` AS `GameImageType__active` FROM `v2_game_images` LEFT JOIN `game_image_types` `GameImageType` ON `v2_game_images`.`image_type_id` = `GameImageType`.`id` WHERE game_id = '7469aad3-30ab-41d9-9410-25c2969306b4' ORDER BY created_at DESC
=== RUN   TestGetGameImages/pngでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:158
[0m[33m[1.106ms] [34;1m[rows:1][0m SELECT `game_management_roles`.`game_id`,`game_management_roles`.`user_id`,`game_management_roles`.`role_type_id`,`RoleTypeTable`.`id` AS `RoleTypeTable__id`,`RoleTypeTable`.`name` AS `RoleTypeTable__name`,`RoleTypeTable`.`active` AS `RoleTypeTable__active` FROM `game_management_roles` LEFT JOIN `game_management_role_types` `RoleTypeTable` ON `game_management_roles`.`role_type_id` = `RoleTypeTable`.`id` WHERE game_id = '80b1c764-caf8-4362-858a-a320f7ee23d5'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:54
[0m[33m[0.914ms] [34;1m[rows:1][0m SELECT `id` FROM `game_management_role_types` WHERE name = 'administrator' ORDER BY `game_management_role_types`.`id` LIMIT 1
--- PASS: TestGetGameManagersByGameID (0.04s)
    --- PASS: TestGetGameManagersByGameID/特に問題ないので問題なし (0.01s)
    --- PASS: TestGetGameManagersByGameID/roleがcollaboratorでも問題なし (0.01s)
    --- PASS: TestGetGameManagersByGameID/roleが存在しなくても問題なし (0.00s)
    --- PASS: TestGetGameManagersByGameID/gameが存在しなくても問題なし (0.00s)
    --- PASS: TestGetGameManagersByGameID/roleが複数でも問題なし (0.01s)
    --- PASS: TestGetGameManagersByGameID/他のgameにroleがあっても問題なし (0.01s)
=== CONT  TestUpdateGameManagementRole

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:117
[0m[33m[1.112ms] [34;1m[rows:1][0m SELECT count(*) FROM `v2_game_versions` WHERE game_id = 'a734d074-e0ea-4dac-8e8d-6f786dd3f1ed'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:831
[0m[33m[3.113ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('29f34dc5-eda3-440a-a642-c80161355ac6','75148346-b28a-4c71-add9-24c809be9dda',1,'2025-10-31 23:00:24.547') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:231
[0m[33m[0.534ms] [34;1m[rows:2][0m SELECT * FROM `game_management_role_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[1.190ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('6430d7b5-0b16-4414-bc21-8e562e0376d7','3d98d90b-3941-4c5c-b8d2-4a7197ec3de3',1,'2025-10-31 23:00:24.474') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:710
[0m[33m[3.175ms] [34;1m[rows:1][0m DELETE FROM `v2_game_images` WHERE id = 'e27bc3ec-adbf-4f73-8671-0059bc24f30e'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1280
[0m[33m[1.371ms] [34;1m[rows:1][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('f71ff4c9-9c3b-4295-a824-fb628ec96365','1d940a1d-da0d-4a99-a9fe-d5c74b7b45fb',2) ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:245
[0m[33m[1.014ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestUpdateGameManagementRole/特に問題ないので問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[1.169ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('203f43b1-0ba2-4077-9706-ef13f1a90da0','3d98d90b-3941-4c5c-b8d2-4a7197ec3de3',1,'2025-10-31 23:00:24.474') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:69
[0m[33m[2.100ms] [34;1m[rows:1][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('d141eb1a-60b0-4192-8616-c0e8b357cf2f','96e092bc-8825-49f6-b910-65aa2c7e0608',1)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:703
[0m[33m[1.082ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('8cd58576-6363-4a1c-a15f-7379f31c6e7f','e70db609-ce77-49cd-9720-a1fc8e7e5106',2,'2025-10-31 23:00:24.543') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1280
[0m[33m[5.302ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('f71ff4c9-9c3b-4295-a824-fb628ec96365','test','test',1,'2025-10-31 23:00:24.542') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[3.749ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('929aa55b-6e61-44b7-becb-40af6b8f5344','3d98d90b-3941-4c5c-b8d2-4a7197ec3de3','6430d7b5-0b16-4414-bc21-8e562e0376d7','203f43b1-0ba2-4077-9706-ef13f1a90da0','v1.0.0','リリース','2025-10-31 23:00:24.489') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[0.810ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = 'bb048510-b602-419a-be81-91c21a92a4de'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[3.085ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = 'a734d074-e0ea-4dac-8e8d-6f786dd3f1ed' ORDER BY created_at DESC LIMIT 1 OFFSET 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:845
[0m[33m[2.718ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('989aec5f-5044-4aa6-b376-4577c7870b73','75148346-b28a-4c71-add9-24c809be9dda',1,'2025-10-31 23:00:24.551') RETURNING `created_at`
=== RUN   TestGetGameVersionsV2/limitなし、offsetありなのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:176
[0m[33m[1.419ms] [34;1m[rows:1][0m SELECT * FROM `game_management_roles` WHERE game_id = 'd141eb1a-60b0-4192-8616-c0e8b357cf2f'
=== RUN   TestAddGameManagementRoles/roleがCollaboratorでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:200
[0m[33m[1.273ms] [34;1m[rows:1][0m SELECT RoleTypeTable.Name,`RoleTypeTable`.`id` AS `RoleTypeTable__id`,`RoleTypeTable`.`name` AS `RoleTypeTable__name`,`RoleTypeTable`.`active` AS `RoleTypeTable__active` FROM `game_management_roles` LEFT JOIN `game_management_role_types` `RoleTypeTable` ON `game_management_roles`.`role_type_id` = `RoleTypeTable`.`id` WHERE game_id = 'f71ff4c9-9c3b-4295-a824-fb628ec96365' AND user_id = '1d940a1d-da0d-4a99-a9fe-d5c74b7b45fb' LIMIT 1
=== RUN   TestGetGameManagementRole/roleが存在しないのでErrRecordNotFound

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:703
[0m[33m[4.827ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('e70db609-ce77-49cd-9720-a1fc8e7e5106','test','test',1,'2025-10-31 23:00:24.543') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:711
[0m[33m[3.595ms] [34;1m[rows:1][0m UPDATE `games` SET `deleted_at`='2025-10-31 23:00:24.552' WHERE id = '801b8a87-cffb-4599-889a-ac4a1d259a30' AND `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[7.572ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('3d98d90b-3941-4c5c-b8d2-4a7197ec3de3','test','test',1,'2025-10-31 23:00:24.474') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:471
[0m[33m[2.993ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('55ef1213-8572-40d9-b520-d68bd8eab189','test','test',1,'2025-10-31 23:00:24.552') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:129
[0m[33m[0.777ms] [34;1m[rows:1][0m SELECT `v2_game_images`.`id`,`v2_game_images`.`game_id`,`v2_game_images`.`image_type_id`,`v2_game_images`.`created_at`,`GameImageType`.`id` AS `GameImageType__id`,`GameImageType`.`name` AS `GameImageType__name`,`GameImageType`.`active` AS `GameImageType__active` FROM `v2_game_images` LEFT JOIN `game_image_types` `GameImageType` ON `v2_game_images`.`image_type_id` = `GameImageType`.`id` WHERE game_id = 'e70db609-ce77-49cd-9720-a1fc8e7e5106' ORDER BY created_at DESC
=== RUN   TestGetGameImages/gifでも問題なし

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:51 [35;1mError 1062 (23000): Duplicate entry '75148346-b28a-4c71-add9-24c809be9dda-v1.0.0' for key 'idx_game_id_name'
[0m[33m[1.752ms] [34;1m[rows:0][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('3b988d64-c0da-4f1a-bf13-f23fadb750ba','75148346-b28a-4c71-add9-24c809be9dda','29f34dc5-eda3-440a-a642-c80161355ac6','989aec5f-5044-4aa6-b376-4577c7870b73','v1.0.0','アップデート','https://example.com','2025-10-31 23:00:24.474') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[0.870ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '929aa55b-6e61-44b7-becb-40af6b8f5344'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[2.150ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE id IN ('929aa55b-6e61-44b7-becb-40af6b8f5344')
=== RUN   TestGetGameVersionsByIDsV2/同じゲームのバージョンがあっても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[1.054ms] [34;1m[rows:2][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('8678c711-7cab-4472-945b-48023a6844d1','42af368d-8fb8-4714-b2e0-a9fc0e918d61',1,'2025-10-31 23:00:24.458'),('c94031bb-cc6e-4479-8dca-e4454d09a63a','42af368d-8fb8-4714-b2e0-a9fc0e918d61',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.955ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '65bc1b5e-c4f9-43f8-8f94-96abf6e5b561'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[2.379ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = '75148346-b28a-4c71-add9-24c809be9dda'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:146
[0m[33m[3.977ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('301dec41-a42f-4156-8a01-106fba089567','test','test',1,'2025-10-31 23:00:24.554') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:703
[0m[33m[0.897ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('501a76d5-b1f9-401c-9b34-b6110fb1309b','5ec317e7-f4d5-49b9-b8ec-d3ba21feabe5',3,'2025-10-31 23:00:24.543') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1280
[0m[33m[4.063ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('6996d8a9-9013-42c9-88ae-83a49d315619','test','test',1,'2025-10-31 23:00:24.542') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:712
[0m[33m[3.480ms] [34;1m[rows:1][0m UPDATE `editions` SET `deleted_at`='2025-10-31 23:00:24.556' WHERE id = 'ef7b91c7-7f82-4c72-953b-9769635187e9' AND `editions`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[0.890ms] [34;1m[rows:2][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('dc9f1faf-c2cc-4e89-bcc9-3e258fdb20cf','42af368d-8fb8-4714-b2e0-a9fc0e918d61',1,'2025-10-31 23:00:24.458'),('b340433f-f8f2-4c52-974d-43af50ae6aa0','42af368d-8fb8-4714-b2e0-a9fc0e918d61',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`
--- PASS: TestUpdateGamePlayLogEndTime (0.05s)
    --- PASS: TestUpdateGamePlayLogEndTime/正しく更新できる (0.01s)
    --- PASS: TestUpdateGamePlayLogEndTime/存在しないIDの場合、ErrNoRecordUpdatedが返される (0.00s)
=== CONT  TestRemoveGameManagementRole

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:932
[0m[33m[0.932ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`deleted_at` IS NULL
=== RUN   TestCreateGameVersionV2/バージョン名が32文字でもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:478
[0m[33m[3.639ms] [34;1m[rows:1][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('55ef1213-8572-40d9-b520-d68bd8eab189','49247669-340d-4e7e-96ed-985a952e4db9',2)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:703
[0m[33m[4.075ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('5ec317e7-f4d5-49b9-b8ec-d3ba21feabe5','test','test',1,'2025-10-31 23:00:24.543') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:54
[0m[33m[1.477ms] [34;1m[rows:1][0m SELECT `id` FROM `game_management_role_types` WHERE name = 'collaborator' ORDER BY `game_management_role_types`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:552
[0m[33m[1.143ms] [34;1m[rows:2][0m SELECT * FROM `game_management_role_types`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:98
[0m[33m[1.074ms] [34;1m[rows:1][0m SELECT `id` FROM `game_management_role_types` WHERE name = 'administrator' ORDER BY `game_management_role_types`.`id` LIMIT 1

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:200 [35;1mrecord not found
[0m[33m[1.813ms] [34;1m[rows:0][0m SELECT RoleTypeTable.Name,`RoleTypeTable`.`id` AS `RoleTypeTable__id`,`RoleTypeTable`.`name` AS `RoleTypeTable__name`,`RoleTypeTable`.`active` AS `RoleTypeTable__active` FROM `game_management_roles` LEFT JOIN `game_management_role_types` `RoleTypeTable` ON `game_management_roles`.`role_type_id` = `RoleTypeTable`.`id` WHERE game_id = '6996d8a9-9013-42c9-88ae-83a49d315619' AND user_id = '90caa4cb-0391-429e-bad4-f277703853a4' LIMIT 1
=== RUN   TestGetGameManagementRole/gameIDが存在しないのでErrRecordNotFound

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[4.005ms] [34;1m[rows:2][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('1f1e6f79-eed2-4010-81ab-6302da1c8b13','42af368d-8fb8-4714-b2e0-a9fc0e918d61','8678c711-7cab-4472-945b-48023a6844d1','dc9f1faf-c2cc-4e89-bcc9-3e258fdb20cf','v1.1.0','アップデート','https://example.com','2025-10-31 23:00:24.458'),('c8a58f6f-c036-491a-ba93-860b840d8d3a','42af368d-8fb8-4714-b2e0-a9fc0e918d61','c94031bb-cc6e-4479-8dca-e4454d09a63a','b340433f-f8f2-4c52-974d-43af50ae6aa0','v1.0.0','リリース','https://example.com','2025-10-31 22:00:24.458') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:566
[0m[33m[1.166ms] [34;1m[rows:1][0m SELECT * FROM `game_visibility_types` WHERE `game_visibility_types`.`name` = 'public'
=== RUN   TestRemoveGameManagementRole/特に問題ないので問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:129
[0m[33m[1.558ms] [34;1m[rows:1][0m SELECT `v2_game_images`.`id`,`v2_game_images`.`game_id`,`v2_game_images`.`image_type_id`,`v2_game_images`.`created_at`,`GameImageType`.`id` AS `GameImageType__id`,`GameImageType`.`name` AS `GameImageType__name`,`GameImageType`.`active` AS `GameImageType__active` FROM `v2_game_images` LEFT JOIN `game_image_types` `GameImageType` ON `v2_game_images`.`image_type_id` = `GameImageType`.`id` WHERE game_id = '5ec317e7-f4d5-49b9-b8ec-d3ba21feabe5' ORDER BY created_at DESC

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[1.288ms] [34;1m[rows:2][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('7812af0f-4144-409c-84c9-f04dc3122627','d7bfd26f-cb44-46a3-8e77-04db24459df4',1,'2025-10-31 23:00:24.477'),('0996093f-7f12-4009-99be-d6fd4dfc5bcf','d7bfd26f-cb44-46a3-8e77-04db24459df4',1,'2025-10-31 23:00:24.479') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`
=== RUN   TestGetGameImages/lockTypeがRecordでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[7.701ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('42af368d-8fb8-4714-b2e0-a9fc0e918d61','test','test',1,'2025-10-31 23:00:24.458') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:200 [35;1mrecord not found
[0m[33m[1.348ms] [34;1m[rows:0][0m SELECT RoleTypeTable.Name,`RoleTypeTable`.`id` AS `RoleTypeTable__id`,`RoleTypeTable`.`name` AS `RoleTypeTable__name`,`RoleTypeTable`.`active` AS `RoleTypeTable__active` FROM `game_management_roles` LEFT JOIN `game_management_role_types` `RoleTypeTable` ON `game_management_roles`.`role_type_id` = `RoleTypeTable`.`id` WHERE game_id = '5822d04d-9c45-4128-b181-29bbc8d151f6' AND user_id = 'cb068f88-b196-4364-8869-2d0b01ebaa90' LIMIT 1
=== RUN   TestGetGameManagementRole/別のユーザーのroleがあっても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:799
[0m[33m[3.044ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('a9b5dbb8-291b-4469-b768-7c960060f913','test','test',1,'2025-10-31 22:00:24.559') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:69
[0m[33m[2.866ms] [34;1m[rows:1][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('301dec41-a42f-4156-8a01-106fba089567','fc8772fa-b462-4871-b0e4-1eadb911cdab',2)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[1.377ms] [34;1m[rows:2][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('4fbbf9d6-bd3a-4cff-8a13-3bf131c7b9d0','d7bfd26f-cb44-46a3-8e77-04db24459df4',1,'2025-10-31 23:00:24.477'),('63496ed9-b812-4006-8143-de78bd1950fd','d7bfd26f-cb44-46a3-8e77-04db24459df4',1,'2025-10-31 23:00:24.479') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:117
[0m[33m[1.492ms] [34;1m[rows:1][0m SELECT count(*) FROM `v2_game_versions` WHERE game_id = '42af368d-8fb8-4714-b2e0-a9fc0e918d61'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:114
[0m[33m[3.416ms] [34;1m[rows:1][0m UPDATE `game_management_roles` SET `role_type_id`=1 WHERE (game_id = '55ef1213-8572-40d9-b520-d68bd8eab189' AND user_id = '49247669-340d-4e7e-96ed-985a952e4db9') AND `game_id` = '55ef1213-8572-40d9-b520-d68bd8eab189' AND `user_id` = '49247669-340d-4e7e-96ed-985a952e4db9'

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138 [35;1mError 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '' at line 1
[0m[33m[0.561ms] [34;1m[rows:0][0m SELECT * FROM `v2_game_versions` WHERE game_id = '42af368d-8fb8-4714-b2e0-a9fc0e918d61' ORDER BY created_at DESC OFFSET 1
=== RUN   TestGetGameVersionsV2/lockありでもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:176
[0m[33m[1.271ms] [34;1m[rows:1][0m SELECT * FROM `game_management_roles` WHERE game_id = '301dec41-a42f-4156-8a01-106fba089567'
=== RUN   TestAddGameManagementRoles/roleがAdministratorでもCollaboratorでもないのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:703
[0m[33m[1.140ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('cfec11b5-80b5-47b6-b8e3-2ceed28fa0f9','435f86c0-ab9c-4877-b675-99ca917fa14e',1,'2025-10-31 23:00:24.543') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[4.250ms] [34;1m[rows:2][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('3e2cc411-a22b-412c-9f9c-8928383d300e','d7bfd26f-cb44-46a3-8e77-04db24459df4','7812af0f-4144-409c-84c9-f04dc3122627','4fbbf9d6-bd3a-4cff-8a13-3bf131c7b9d0','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.489'),('c90255c5-521d-4a87-b789-2809ea1c6b39','d7bfd26f-cb44-46a3-8e77-04db24459df4','0996093f-7f12-4009-99be-d6fd4dfc5bcf','63496ed9-b812-4006-8143-de78bd1950fd','v1.2.0','リリース','https://example.com','2025-10-31 23:00:24.489') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:682
[0m[33m[3.357ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('16c94a17-4caa-40f6-b336-5f84f63dcfe7','test','test',1,'2025-10-31 23:00:24.561') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:503
[0m[33m[0.923ms] [34;1m[rows:1][0m SELECT * FROM `game_management_roles` WHERE game_id = '55ef1213-8572-40d9-b520-d68bd8eab189' and user_id = '49247669-340d-4e7e-96ed-985a952e4db9' ORDER BY `game_management_roles`.`game_id` LIMIT 1
=== RUN   TestUpdateGameManagementRole/roleがCollaboratorでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1280
[0m[33m[0.999ms] [34;1m[rows:2][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('84dc2540-2d98-4721-8c8a-b32d1e0fba6f','e6762dbb-ef39-4dd4-9756-7f413161bf19',1),('84dc2540-2d98-4721-8c8a-b32d1e0fba6f','3dbd20db-99d3-46e8-867b-5c2f8cac5a22',2) ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[8.142ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('d7bfd26f-cb44-46a3-8e77-04db24459df4','test','test',1,'2025-10-31 23:00:24.477') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:831
[0m[33m[3.982ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('e645bd00-e139-4810-a732-ee2978273ff7','a9b5dbb8-291b-4469-b768-7c960060f913',1,'2025-10-31 23:00:24.562') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:703
[0m[33m[4.837ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('435f86c0-ab9c-4877-b675-99ca917fa14e','test','test',1,'2025-10-31 23:00:24.543') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1280
[0m[33m[4.153ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('84dc2540-2d98-4721-8c8a-b32d1e0fba6f','test','test',1,'2025-10-31 23:00:24.542') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[0.814ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('6d3caaee-3c93-4723-95f4-d1295cb37b4c','e8ba0a00-c230-4ca4-b67c-7d590c84c0bd',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:689
[0m[33m[2.210ms] [34;1m[rows:1][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('16c94a17-4caa-40f6-b336-5f84f63dcfe7','0b16559c-9c41-430b-9331-74b816c724d1',1)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[0.932ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('2e4a3612-e32f-4fc2-a50c-843b3de7c877','e8ba0a00-c230-4ca4-b67c-7d590c84c0bd',1,'2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[0.728ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` IN ('3e2cc411-a22b-412c-9f9c-8928383d300e','c90255c5-521d-4a87-b789-2809ea1c6b39')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[1.748ms] [34;1m[rows:2][0m SELECT * FROM `v2_game_versions` WHERE id IN ('3e2cc411-a22b-412c-9f9c-8928383d300e','c90255c5-521d-4a87-b789-2809ea1c6b39')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:471
[0m[33m[2.604ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('5d2a9056-b41b-4509-8c67-1d556f37a271','test','test',1,'2025-10-31 23:00:24.552') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`
=== RUN   TestGetGameVersionsByIDsV2/存在しないバージョンでもエラーにならない

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:146
[0m[33m[3.372ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('c326fa17-6983-4b7c-9288-abc15bbe272e','test','test',1,'2025-10-31 23:00:24.564') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`
=== RUN   TestAddGameManagementRoles/ユーザーが複数でも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[0.732ms] [34;1m[rows:0][0m SELECT * FROM `v2_game_versions` WHERE id IN ('7dd9844c-7418-47a2-83cc-10ec8c9d4d10')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[2.914ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('8d785ebd-7895-4be2-8176-2c0c355654ce','e8ba0a00-c230-4ca4-b67c-7d590c84c0bd','6d3caaee-3c93-4723-95f4-d1295cb37b4c','2e4a3612-e32f-4fc2-a50c-843b3de7c877','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.458') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`
=== RUN   TestGetGameVersionsByIDsV2/存在するバージョンと存在しないものが含まれていてもエラーにならない

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:135
[0m[33m[1.706ms] [34;1m[rows:1][0m DELETE FROM `game_management_roles` WHERE game_id = '16c94a17-4caa-40f6-b336-5f84f63dcfe7' AND user_id = '0b16559c-9c41-430b-9331-74b816c724d1'
=== RUN   TestRemoveGameManagementRole/削除対象以外のユーザーのroleが存在しても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:129
[0m[33m[2.705ms] [34;1m[rows:1][0m SELECT `v2_game_images`.`id`,`v2_game_images`.`game_id`,`v2_game_images`.`image_type_id`,`v2_game_images`.`created_at`,`GameImageType`.`id` AS `GameImageType__id`,`GameImageType`.`name` AS `GameImageType__name`,`GameImageType`.`active` AS `GameImageType__active` FROM `v2_game_images` LEFT JOIN `game_image_types` `GameImageType` ON `v2_game_images`.`image_type_id` = `GameImageType`.`id` WHERE game_id = '435f86c0-ab9c-4877-b675-99ca917fa14e' ORDER BY created_at DESC FOR UPDATE
=== RUN   TestGetGameImages/複数の画像があっても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:845
[0m[33m[2.890ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('67afddfc-e83a-46bf-8f71-ae9081459c7c','a9b5dbb8-291b-4469-b768-7c960060f913',1,'2025-10-31 23:00:24.566') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:200
[0m[33m[2.951ms] [34;1m[rows:1][0m SELECT RoleTypeTable.Name,`RoleTypeTable`.`id` AS `RoleTypeTable__id`,`RoleTypeTable`.`name` AS `RoleTypeTable__name`,`RoleTypeTable`.`active` AS `RoleTypeTable__active` FROM `game_management_roles` LEFT JOIN `game_management_role_types` `RoleTypeTable` ON `game_management_roles`.`role_type_id` = `RoleTypeTable`.`id` WHERE game_id = '84dc2540-2d98-4721-8c8a-b32d1e0fba6f' AND user_id = 'e6762dbb-ef39-4dd4-9756-7f413161bf19' LIMIT 1
=== RUN   TestGetGameManagementRole/別のユーザーのroleがあってもroleがなければErrRecordNotFound

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:478
[0m[33m[2.211ms] [34;1m[rows:1][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('5d2a9056-b41b-4509-8c67-1d556f37a271','d7d218ab-e43c-4a33-b675-293841cf6703',1)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:1710
[0m[33m[5.875ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('e8ba0a00-c230-4ca4-b67c-7d590c84c0bd','test','test',1,'2025-10-31 23:00:24.458') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:146
[0m[33m[2.847ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('95fdfaad-6c9c-4164-9ef3-4077ad8bd5fc','test','test',1,'2025-10-31 23:00:24.567') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:117
[0m[33m[1.013ms] [34;1m[rows:1][0m SELECT count(*) FROM `v2_game_versions` WHERE game_id = 'e8ba0a00-c230-4ca4-b67c-7d590c84c0bd'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:98
[0m[33m[1.181ms] [34;1m[rows:1][0m SELECT `id` FROM `game_management_role_types` WHERE name = 'collaborator' ORDER BY `game_management_role_types`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:682
[0m[33m[2.845ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('eaf46a4d-bb34-4a7d-8ad7-a1841d2e5306','test','test',1,'2025-10-31 23:00:24.561') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[1.457ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('83242b34-b92b-4cb0-8493-9197bb852910','5e3b4f81-16d9-4655-ab50-9ac53f242e82',1,'2025-10-31 23:00:24.485') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:54
[0m[33m[0.928ms] [34;1m[rows:1][0m SELECT `id` FROM `game_management_role_types` WHERE name = 'administrator' ORDER BY `game_management_role_types`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:51
[0m[33m[2.721ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('072d96d7-cd61-4e74-a957-d7ead5afbaec','a9b5dbb8-291b-4469-b768-7c960060f913','e645bd00-e139-4810-a732-ee2978273ff7','67afddfc-e83a-46bf-8f71-ae9081459c7c','v1.0.123456789012345678901234567','リリース','https://example.com','2025-10-31 23:00:24.474') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1280
[0m[33m[1.068ms] [34;1m[rows:1][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('cda556a3-589d-4b3a-b240-098a2405bc19','53cd203d-7ee5-48b1-9e19-0a5a931e7262',2) ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[0.657ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('22fa3b96-a32a-4b3e-a14b-0e18ab27b9dc','5e3b4f81-16d9-4655-ab50-9ac53f242e82',1,'2025-10-31 23:00:24.485') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:703
[0m[33m[1.184ms] [34;1m[rows:2][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('4b260955-27c7-43c1-9171-a5ce1fbdf399','f6f07bc8-202a-41fe-bdc5-8dc06c1ebb7b',1,'2025-10-31 23:00:24.543'),('6d1c1fe4-c0e2-4261-b171-55721d5b7477','f6f07bc8-202a-41fe-bdc5-8dc06c1ebb7b',2,'2025-10-31 13:00:24.543') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[0.789ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '8d785ebd-7895-4be2-8176-2c0c355654ce'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:138
[0m[33m[1.877ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = 'e8ba0a00-c230-4ca4-b67c-7d590c84c0bd' ORDER BY created_at DESC
--- PASS: TestGetGameVersionsV2 (0.12s)
    --- PASS: TestGetGameVersionsV2/特に問題ないのでエラーなし (0.01s)
    --- PASS: TestGetGameVersionsV2/ゲームが存在しなくてもエラーなし (0.00s)
    --- PASS: TestGetGameVersionsV2/バージョンが複数あってもエラーなし (0.01s)
    --- PASS: TestGetGameVersionsV2/バージョンが存在しなくてもエラーなし (0.00s)
    --- PASS: TestGetGameVersionsV2/別のゲームのバージョンが混ざることはない (0.01s)
    --- PASS: TestGetGameVersionsV2/ファイルが存在してもエラーなし (0.01s)
    --- PASS: TestGetGameVersionsV2/ファイルが複数でもエラーなし (0.01s)
    --- PASS: TestGetGameVersionsV2/limitが存在してもエラーなし (0.01s)
    --- PASS: TestGetGameVersionsV2/limit,offsetが存在してもエラーなし (0.01s)
    --- PASS: TestGetGameVersionsV2/limitなし、offsetありなのでエラー (0.01s)
    --- PASS: TestGetGameVersionsV2/lockありでもエラーなし (0.01s)
=== CONT  TestCreateGamePlayLog/playLogIDが重複している場合、ErrDuplicatedUniqueKeyが返される

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1280
[0m[33m[3.644ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('cda556a3-589d-4b3a-b240-098a2405bc19','test','test',1,'2025-10-31 23:00:24.542') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[3.417ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('29f73310-cec0-4fb9-94d9-a404d5898f1d','5e3b4f81-16d9-4655-ab50-9ac53f242e82','83242b34-b92b-4cb0-8493-9197bb852910','22fa3b96-a32a-4b3e-a14b-0e18ab27b9dc','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.489') ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`) RETURNING `url`,`created_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:200 [35;1mrecord not found
[0m[33m[0.608ms] [34;1m[rows:0][0m SELECT RoleTypeTable.Name,`RoleTypeTable`.`id` AS `RoleTypeTable__id`,`RoleTypeTable`.`name` AS `RoleTypeTable__name`,`RoleTypeTable`.`active` AS `RoleTypeTable__active` FROM `game_management_roles` LEFT JOIN `game_management_role_types` `RoleTypeTable` ON `game_management_roles`.`role_type_id` = `RoleTypeTable`.`id` WHERE game_id = 'cda556a3-589d-4b3a-b240-098a2405bc19' AND user_id = '497a4bd2-7caa-49bb-852c-fdcdbec8364e' LIMIT 1
=== RUN   TestGetGameManagementRole/別のゲームのroleがあっても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:114
[0m[33m[3.251ms] [34;1m[rows:1][0m UPDATE `game_management_roles` SET `role_type_id`=2 WHERE (game_id = '5d2a9056-b41b-4509-8c67-1d556f37a271' AND user_id = 'd7d218ab-e43c-4a33-b675-293841cf6703') AND `game_id` = '5d2a9056-b41b-4509-8c67-1d556f37a271' AND `user_id` = 'd7d218ab-e43c-4a33-b675-293841cf6703'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:89
[0m[33m[1.228ms] [34;1m[rows:0][0m UPDATE `games` SET `latest_version_updated_at`='2025-10-31 23:00:24.474' WHERE `games`.`deleted_at` IS NULL AND `id` = 'a9b5dbb8-291b-4469-b768-7c960060f913'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image_test.go:703
[0m[33m[5.537ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('f6f07bc8-202a-41fe-bdc5-8dc06c1ebb7b','test','test',1,'2025-10-31 23:00:24.543') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:69
[0m[33m[3.093ms] [34;1m[rows:2][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('95fdfaad-6c9c-4164-9ef3-4077ad8bd5fc','1fa92bd6-4dca-4309-b242-2dd98bf472c3',1),('95fdfaad-6c9c-4164-9ef3-4077ad8bd5fc','8d500223-8f6e-4698-8d62-9149c7e8ed12',1)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:2788
[0m[33m[6.222ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('5e3b4f81-16d9-4655-ab50-9ac53f242e82','test','test',1,'2025-10-31 23:00:24.485') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:689
[0m[33m[3.287ms] [34;1m[rows:2][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('eaf46a4d-bb34-4a7d-8ad7-a1841d2e5306','72e33edf-091a-4448-a59e-10a6b3134af7',2),('eaf46a4d-bb34-4a7d-8ad7-a1841d2e5306','c2a9a24d-c350-4694-8af4-b0597cebd153',2)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:503
[0m[33m[0.741ms] [34;1m[rows:1][0m SELECT * FROM `game_management_roles` WHERE game_id = '5d2a9056-b41b-4509-8c67-1d556f37a271' and user_id = 'd7d218ab-e43c-4a33-b675-293841cf6703' ORDER BY `game_management_roles`.`game_id` LIMIT 1
=== RUN   TestUpdateGameManagementRole/roleがAdministratorでもCollaboratorでもないのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:377
[0m[33m[2.431ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('7f188343-b710-4d2c-8598-b7a319abbcac','test game 2','test description 2',1,'2025-10-31 23:00:24.512') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:129
[0m[33m[1.182ms] [34;1m[rows:2][0m SELECT `v2_game_images`.`id`,`v2_game_images`.`game_id`,`v2_game_images`.`image_type_id`,`v2_game_images`.`created_at`,`GameImageType`.`id` AS `GameImageType__id`,`GameImageType`.`name` AS `GameImageType__name`,`GameImageType`.`active` AS `GameImageType__active` FROM `v2_game_images` LEFT JOIN `game_image_types` `GameImageType` ON `v2_game_images`.`image_type_id` = `GameImageType`.`id` WHERE game_id = 'f6f07bc8-202a-41fe-bdc5-8dc06c1ebb7b' ORDER BY created_at DESC
=== RUN   TestGetGameImages/画像が存在しなくても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1280
[0m[33m[0.975ms] [34;1m[rows:2][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('2c855d8f-1473-4aad-9b5a-b986752ae967','737f2d4a-89ec-4e1c-ad7d-b811bc6d498b',1),('3f3930d0-4cd8-4b6a-8c22-751f8d1b0a8d','737f2d4a-89ec-4e1c-ad7d-b811bc6d498b',2) ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:176
[0m[33m[1.359ms] [34;1m[rows:2][0m SELECT * FROM `game_management_roles` WHERE game_id = '95fdfaad-6c9c-4164-9ef3-4077ad8bd5fc'
=== RUN   TestAddGameManagementRoles/ユーザーが0人でも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[1.037ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '072d96d7-cd61-4e74-a957-d7ead5afbaec'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[2.131ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = 'a9b5dbb8-291b-4469-b768-7c960060f913'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1280
[0m[33m[3.087ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('2c855d8f-1473-4aad-9b5a-b986752ae967','test','test',1,'2025-10-31 23:00:24.542'),('3f3930d0-4cd8-4b6a-8c22-751f8d1b0a8d','test','test',1,'2025-10-31 23:00:24.542') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:932
[0m[33m[0.459ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`deleted_at` IS NULL

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_image.go:129
[0m[33m[1.051ms] [34;1m[rows:0][0m SELECT `v2_game_images`.`id`,`v2_game_images`.`game_id`,`v2_game_images`.`image_type_id`,`v2_game_images`.`created_at`,`GameImageType`.`id` AS `GameImageType__id`,`GameImageType`.`name` AS `GameImageType__name`,`GameImageType`.`active` AS `GameImageType__active` FROM `v2_game_images` LEFT JOIN `game_image_types` `GameImageType` ON `v2_game_images`.`image_type_id` = `GameImageType`.`id` WHERE game_id = 'ed1bf7c0-3810-4c56-b8bc-7cad127677d1' ORDER BY created_at DESC
=== RUN   TestCreateGameVersionV2/バージョン名が33文字なのでエラー
--- PASS: TestGetGameImages (0.04s)
    --- PASS: TestGetGameImages/特に問題ないので問題なし (0.01s)
    --- PASS: TestGetGameImages/pngでも問題なし (0.01s)
    --- PASS: TestGetGameImages/gifでも問題なし (0.01s)
    --- PASS: TestGetGameImages/lockTypeがRecordでも問題なし (0.01s)
    --- PASS: TestGetGameImages/複数の画像があっても問題なし (0.01s)
    --- PASS: TestGetGameImages/画像が存在しなくても問題なし (0.00s)
=== CONT  TestCreateGamePlayLog/既存のログが存在していても新しいログを正常に作成できる

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:471
[0m[33m[2.310ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('1ab71c11-cf86-4fa2-bd10-e92e2af0c594','test','test',1,'2025-10-31 23:00:24.552') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:135
[0m[33m[2.685ms] [34;1m[rows:1][0m DELETE FROM `game_management_roles` WHERE game_id = 'eaf46a4d-bb34-4a7d-8ad7-a1841d2e5306' AND user_id = '72e33edf-091a-4448-a59e-10a6b3134af7'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:200
[0m[33m[0.809ms] [34;1m[rows:1][0m SELECT RoleTypeTable.Name,`RoleTypeTable`.`id` AS `RoleTypeTable__id`,`RoleTypeTable`.`name` AS `RoleTypeTable__name`,`RoleTypeTable`.`active` AS `RoleTypeTable__active` FROM `game_management_roles` LEFT JOIN `game_management_role_types` `RoleTypeTable` ON `game_management_roles`.`role_type_id` = `RoleTypeTable`.`id` WHERE game_id = '2c855d8f-1473-4aad-9b5a-b986752ae967' AND user_id = '737f2d4a-89ec-4e1c-ad7d-b811bc6d498b' LIMIT 1
=== RUN   TestGetGameManagementRole/別のゲームのroleがあってもroleがなければErrRecordNotFound

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:386
[0m[33m[2.556ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`created_at`) VALUES ('93d0b939-6b05-48cc-a9dc-9a07befc52e0','test edition 2','2025-10-31 23:00:24.512') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:146
[0m[33m[2.196ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('2a4a834c-f365-49b8-9f8c-bebd71f40769','test','test',1,'2025-10-31 23:00:24.576') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:714
[0m[33m[1.315ms] [34;1m[rows:1][0m SELECT * FROM `game_management_roles` WHERE game_id = 'eaf46a4d-bb34-4a7d-8ad7-a1841d2e5306' and user_id = 'c2a9a24d-c350-4694-8af4-b0597cebd153' ORDER BY `game_management_roles`.`game_id` LIMIT 1
=== RUN   TestRemoveGameManagementRole/削除対象以外のゲームのroleが存在しても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[0.937ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '29f73310-cec0-4fb9-94d9-a404d5898f1d'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[4.415ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE id IN ('29f73310-cec0-4fb9-94d9-a404d5898f1d','45a14185-d438-4c3e-b37a-c54733ce3c5b')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:799
[0m[33m[2.081ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('f80a257f-b866-41e4-a203-a0a1c1c58f73','test','test',1,'2025-10-31 22:00:24.577') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`
=== RUN   TestGetGameVersionsByIDsV2/バージョン指定が空でもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:176
[0m[33m[0.993ms] [34;1m[rows:0][0m SELECT * FROM `game_management_roles` WHERE game_id = '2a4a834c-f365-49b8-9f8c-bebd71f40769'
=== CONT  TestCreateGamePlayLog/正常にゲームプレイログが作成される
--- PASS: TestAddGameManagementRoles (0.04s)
    --- PASS: TestAddGameManagementRoles/特に問題ないので問題なし (0.01s)
    --- PASS: TestAddGameManagementRoles/roleがCollaboratorでも問題なし (0.01s)
    --- PASS: TestAddGameManagementRoles/roleがAdministratorでもCollaboratorでもないのでエラー (0.00s)
    --- PASS: TestAddGameManagementRoles/ユーザーが複数でも問題なし (0.01s)
    --- PASS: TestAddGameManagementRoles/ユーザーが0人でも問題なし (0.00s)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:478
[0m[33m[2.608ms] [34;1m[rows:1][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('1ab71c11-cf86-4fa2-bd10-e92e2af0c594','6714c840-c33d-4e11-9359-b2f20eb5fa00',2)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:259
[0m[33m[0.923ms] [34;1m[rows:0][0m SELECT * FROM `v2_game_versions` WHERE id IN (NULL)
=== RUN   TestUpdateGameManagementRole/更新対象以外のユーザーのroleが存在しても問題なし
--- PASS: TestGetGameVersionsByIDsV2 (0.14s)
    --- PASS: TestGetGameVersionsByIDsV2/問題ないのでエラーなし (0.01s)
    --- PASS: TestGetGameVersionsByIDsV2/lockありでもエラーなし (0.01s)
    --- PASS: TestGetGameVersionsByIDsV2/対象が複数でもエラーなし (0.01s)
    --- PASS: TestGetGameVersionsByIDsV2/ファイルがあってもエラーなし (0.01s)
    --- PASS: TestGetGameVersionsByIDsV2/ファイルが複数でもエラーなし (0.01s)
    --- PASS: TestGetGameVersionsByIDsV2/URLがなくてもエラーなし (0.01s)
    --- PASS: TestGetGameVersionsByIDsV2/同じゲームのバージョンがあっても問題なし (0.01s)
    --- PASS: TestGetGameVersionsByIDsV2/存在しないバージョンでもエラーにならない (0.00s)
    --- PASS: TestGetGameVersionsByIDsV2/存在するバージョンと存在しないものが含まれていてもエラーにならない (0.01s)
    --- PASS: TestGetGameVersionsByIDsV2/バージョン指定が空でもエラーなし (0.00s)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:414
[0m[33m[2.458ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('8baaaeda-e208-4773-9ba9-cf127b53d941','7f188343-b710-4d2c-8598-b7a319abbcac',1,'2025-10-31 23:00:24.512') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:377
[0m[33m[3.302ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('9c5ddd35-95b6-4512-abf4-a00b7f89db60','test game 3 existing','test description 3 existing',1,'2025-10-31 23:00:24.512'),('a553aaea-9d24-4f3e-9f7e-95e32a5e8fb1','test game 4 new','test description 4 new',1,'2025-10-31 23:00:24.512') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1280
[0m[33m[0.849ms] [34;1m[rows:1][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('0c3010e9-293c-4e06-908d-9d10bcb5808b','f19b5007-e89e-4992-89e5-ee86e4002cca',2) ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:831
[0m[33m[2.328ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('b8d7b727-0fbf-4f79-a456-a73cb4bdeb37','f80a257f-b866-41e4-a203-a0a1c1c58f73',1,'2025-10-31 23:00:24.579') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:682
[0m[33m[2.839ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('c4cc5310-5f5a-4cda-a508-62077cab7bb8','test','test',1,'2025-10-31 23:00:24.561'),('55edc2fb-369f-4127-9f7e-64ca55ee5ec2','test','test',1,'2025-10-31 23:00:24.561') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1280
[0m[33m[4.160ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('db119161-0aef-4565-bd95-e25c52182aaa','test','test',1,'2025-10-31 23:00:24.542'),('0c3010e9-293c-4e06-908d-9d10bcb5808b','test','test',1,'2025-10-31 23:00:24.542') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:200 [35;1mrecord not found
[0m[33m[0.531ms] [34;1m[rows:0][0m SELECT RoleTypeTable.Name,`RoleTypeTable`.`id` AS `RoleTypeTable__id`,`RoleTypeTable`.`name` AS `RoleTypeTable__name`,`RoleTypeTable`.`active` AS `RoleTypeTable__active` FROM `game_management_roles` LEFT JOIN `game_management_role_types` `RoleTypeTable` ON `game_management_roles`.`role_type_id` = `RoleTypeTable`.`id` WHERE game_id = 'db119161-0aef-4565-bd95-e25c52182aaa' AND user_id = 'f19b5007-e89e-4992-89e5-ee86e4002cca' LIMIT 1
=== RUN   TestGetGameManagementRole/行ロックでも問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:386
[0m[33m[2.426ms] [34;1m[rows:2][0m INSERT INTO `editions` (`id`,`name`,`created_at`) VALUES ('5cfc53b3-2b29-465a-8f7b-cf3f6b383640','test edition 3','2025-10-31 23:00:24.512'),('a04504dd-5640-4e3a-8de3-a427a331ea05','test edition 4','2025-10-31 23:00:24.512') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:471
[0m[33m[2.720ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('e004d8d3-5eee-4871-b13b-16777f9ac80a','test','test',1,'2025-10-31 23:00:24.552') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:377
[0m[33m[3.088ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('2823b383-3ba0-4617-85fa-265a8e1e0c9f','test game 1','test description 1',1,'2025-10-31 23:00:24.512') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:845
[0m[33m[1.505ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('d7eb6f46-ebda-4cd1-ac6c-e69523c01fa9','f80a257f-b866-41e4-a203-a0a1c1c58f73',1,'2025-10-31 23:00:24.581') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:422
[0m[33m[2.656ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('1ea3cbeb-1561-4ed6-8b9c-a716c2f0b388','7f188343-b710-4d2c-8598-b7a319abbcac',1,'2025-10-31 23:00:24.512') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:689
[0m[33m[1.228ms] [34;1m[rows:2][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('c4cc5310-5f5a-4cda-a508-62077cab7bb8','a41de2dc-d382-4898-af5f-62c3755847f8',2),('55edc2fb-369f-4127-9f7e-64ca55ee5ec2','a41de2dc-d382-4898-af5f-62c3755847f8',2)

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:51 [35;1mError 1406 (22001): Data too long for column 'name' at row 1
[0m[33m[1.496ms] [34;1m[rows:0][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('1cd122fa-862e-45a6-810d-94674608e884','f80a257f-b866-41e4-a203-a0a1c1c58f73','b8d7b727-0fbf-4f79-a456-a73cb4bdeb37','d7eb6f46-ebda-4cd1-ac6c-e69523c01fa9','v1.0.1234567890123456789012345678','リリース','https://example.com','2025-10-31 23:00:24.474') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:414
[0m[33m[1.851ms] [34;1m[rows:2][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('8d4a931f-fb7d-43f9-8a83-44f89208131e','9c5ddd35-95b6-4512-abf4-a00b7f89db60',1,'2025-10-31 23:00:24.512'),('2fbad291-951e-4b22-82e2-642070679cb3','a553aaea-9d24-4f3e-9f7e-95e32a5e8fb1',1,'2025-10-31 23:00:24.512') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1280
[0m[33m[0.811ms] [34;1m[rows:1][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('d44653dd-7a5b-4323-89c2-188c744cfc2e','2e773efe-548e-47ad-a63e-f3772ac6d868',1) ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:478
[0m[33m[1.895ms] [34;1m[rows:2][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('e004d8d3-5eee-4871-b13b-16777f9ac80a','346c0133-c07c-4f02-9372-5a47097d79a9',2),('e004d8d3-5eee-4871-b13b-16777f9ac80a','82ecdef8-8281-4230-b4b1-3b4c25abec26',2)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:135
[0m[33m[1.639ms] [34;1m[rows:1][0m DELETE FROM `game_management_roles` WHERE game_id = 'c4cc5310-5f5a-4cda-a508-62077cab7bb8' AND user_id = 'a41de2dc-d382-4898-af5f-62c3755847f8'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:431
[0m[33m[1.748ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('c9203477-8250-42d7-ba9f-c33733b5f63e','7f188343-b710-4d2c-8598-b7a319abbcac','8baaaeda-e208-4773-9ba9-cf127b53d941','1ea3cbeb-1561-4ed6-8b9c-a716c2f0b388','v1.0.0','test version 1.0.0','2025-10-31 23:00:24.512') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:386
[0m[33m[2.232ms] [34;1m[rows:1][0m INSERT INTO `editions` (`id`,`name`,`created_at`) VALUES ('6332b2da-13a9-4ac0-8f21-a88d77a063fd','test edition 1','2025-10-31 23:00:24.512') RETURNING `questionnaire_url`,`created_at`,`deleted_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.921ms] [34;1m[rows:0][0m SELECT * FROM `v2_game_versions` WHERE game_id = 'f80a257f-b866-41e4-a203-a0a1c1c58f73'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1280
[0m[33m[3.162ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('d44653dd-7a5b-4323-89c2-188c744cfc2e','test','test',1,'2025-10-31 23:00:24.542') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:714
[0m[33m[0.965ms] [34;1m[rows:1][0m SELECT * FROM `game_management_roles` WHERE game_id = '55edc2fb-369f-4127-9f7e-64ca55ee5ec2' and user_id = 'a41de2dc-d382-4898-af5f-62c3755847f8' ORDER BY `game_management_roles`.`game_id` LIMIT 1
=== RUN   TestRemoveGameManagementRole/roleが事前に存在していないのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:932
[0m[33m[0.620ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`deleted_at` IS NULL
=== RUN   TestCreateGameVersionV2/ゲームが存在しないのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:200
[0m[33m[0.972ms] [34;1m[rows:1][0m SELECT RoleTypeTable.Name,`RoleTypeTable`.`id` AS `RoleTypeTable__id`,`RoleTypeTable`.`name` AS `RoleTypeTable__name`,`RoleTypeTable`.`active` AS `RoleTypeTable__active` FROM `game_management_roles` LEFT JOIN `game_management_role_types` `RoleTypeTable` ON `game_management_roles`.`role_type_id` = `RoleTypeTable`.`id` WHERE game_id = 'd44653dd-7a5b-4323-89c2-188c744cfc2e' AND user_id = '2e773efe-548e-47ad-a63e-f3772ac6d868' LIMIT 1 FOR UPDATE
=== RUN   TestGetGameManagementRole/ロックの種類が誤っているのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:440
[0m[33m[1.962ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`created_at`) VALUES ('7bf1ead4-e6ff-4839-95d3-c5163ace1e6d','93d0b939-6b05-48cc-a9dc-9a07befc52e0','7f188343-b710-4d2c-8598-b7a319abbcac','c9203477-8250-42d7-ba9f-c33733b5f63e','2025-10-31 21:00:24.512','2025-10-31 23:00:24.512') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:414
[0m[33m[2.317ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('9e050da9-b136-4058-9114-3ccf8cc39975','2823b383-3ba0-4617-85fa-265a8e1e0c9f',1,'2025-10-31 23:00:24.512') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:422
[0m[33m[2.930ms] [34;1m[rows:2][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('7b508480-cc4b-4354-86ce-3e251fe5f379','9c5ddd35-95b6-4512-abf4-a00b7f89db60',1,'2025-10-31 23:00:24.512'),('b3d10c6f-a2d9-4610-98e4-ac189ca93e2f','a553aaea-9d24-4f3e-9f7e-95e32a5e8fb1',1,'2025-10-31 23:00:24.512') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:98
[0m[33m[2.829ms] [34;1m[rows:1][0m SELECT `id` FROM `game_management_role_types` WHERE name = 'administrator' ORDER BY `game_management_role_types`.`id` LIMIT 1

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:51 [35;1mError 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`trap_collection`.`v2_game_versions`, CONSTRAINT `fk_games_game_versions_v2` FOREIGN KEY (`game_id`) REFERENCES `games` (`id`))
[0m[33m[1.339ms] [34;1m[rows:0][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('e9d3da49-f523-4a65-afd3-adef39df853b','0435b886-3ec9-4fd3-b550-6d1eb0175d81','b25b0dfb-3a74-4980-8f06-b3a589a036e6','7c9a496d-5d04-4002-91c5-a49446345ac0','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.474') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:135
[0m[33m[1.784ms] [34;1m[rows:0][0m DELETE FROM `game_management_roles` WHERE game_id = 'f92cf9ca-9153-43dd-95ac-9e229cfc81c8' AND user_id = 'a62963d2-cafe-4b79-9c51-d318e428a52f'
--- PASS: TestRemoveGameManagementRole (0.03s)
    --- PASS: TestRemoveGameManagementRole/特に問題ないので問題なし (0.01s)
    --- PASS: TestRemoveGameManagementRole/削除対象以外のユーザーのroleが存在しても問題なし (0.01s)
    --- PASS: TestRemoveGameManagementRole/削除対象以外のゲームのroleが存在しても問題なし (0.01s)
    --- PASS: TestRemoveGameManagementRole/roleが事前に存在していないのでエラー (0.00s)

2025/10/31 23:00:24 [31;1m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:56 [35;1mError 1062 (23000): Duplicate entry '7bf1ead4-e6ff-4839-95d3-c5163ace1e6d' for key 'PRIMARY'
[0m[33m[1.416ms] [34;1m[rows:0][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`created_at`,`updated_at`) VALUES ('7bf1ead4-e6ff-4839-95d3-c5163ace1e6d','93d0b939-6b05-48cc-a9dc-9a07befc52e0','7f188343-b710-4d2c-8598-b7a319abbcac','c9203477-8250-42d7-ba9f-c33733b5f63e','2025-10-31 21:00:24.512','2025-10-31 23:00:24.512','2025-10-31 23:00:24.512') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.820ms] [34;1m[rows:0][0m SELECT * FROM `v2_game_versions` WHERE game_id = '0435b886-3ec9-4fd3-b550-6d1eb0175d81'
=== RUN   TestCreateGameVersionV2/バージョン名が空文字でもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1280
[0m[33m[0.774ms] [34;1m[rows:1][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('127284ea-3708-4285-81cc-202491458726','d589a3c4-f9b5-452a-9c74-9487730a962a',1) ON DUPLICATE KEY UPDATE `game_id`=VALUES(`game_id`)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:463
[0m[33m[0.778ms] [34;1m[rows:1][0m SELECT * FROM `game_play_logs` WHERE id = '7bf1ead4-e6ff-4839-95d3-c5163ace1e6d' ORDER BY `game_play_logs`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:1280
[0m[33m[3.144ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('127284ea-3708-4285-81cc-202491458726','test','test',1,'2025-10-31 23:00:24.542') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`
--- PASS: TestGetGameManagementRole (0.05s)
    --- PASS: TestGetGameManagementRole/特に問題ないので問題なし (0.01s)
    --- PASS: TestGetGameManagementRole/roleがcollatorでも問題なし (0.01s)
    --- PASS: TestGetGameManagementRole/roleが存在しないのでErrRecordNotFound (0.01s)
    --- PASS: TestGetGameManagementRole/gameIDが存在しないのでErrRecordNotFound (0.00s)
    --- PASS: TestGetGameManagementRole/別のユーザーのroleがあっても問題なし (0.01s)
    --- PASS: TestGetGameManagementRole/別のユーザーのroleがあってもroleがなければErrRecordNotFound (0.00s)
    --- PASS: TestGetGameManagementRole/別のゲームのroleがあっても問題なし (0.00s)
    --- PASS: TestGetGameManagementRole/別のゲームのroleがあってもroleがなければErrRecordNotFound (0.00s)
    --- PASS: TestGetGameManagementRole/行ロックでも問題なし (0.00s)
    --- PASS: TestGetGameManagementRole/ロックの種類が誤っているのでエラー (0.00s)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:431
[0m[33m[2.497ms] [34;1m[rows:2][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('d68a5a80-01c3-4950-96c7-2c9790235261','9c5ddd35-95b6-4512-abf4-a00b7f89db60','8d4a931f-fb7d-43f9-8a83-44f89208131e','7b508480-cc4b-4354-86ce-3e251fe5f379','v1.1.0','test version 1.1.0','2025-10-31 23:00:24.512'),('6b410cf8-e3a2-4c93-b1bb-73b033c070bb','a553aaea-9d24-4f3e-9f7e-95e32a5e8fb1','2fbad291-951e-4b22-82e2-642070679cb3','b3d10c6f-a2d9-4610-98e4-ac189ca93e2f','v1.2.0','test version 1.2.0','2025-10-31 23:00:24.512') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:114
[0m[33m[2.516ms] [34;1m[rows:1][0m UPDATE `game_management_roles` SET `role_type_id`=1 WHERE (game_id = 'e004d8d3-5eee-4871-b13b-16777f9ac80a' AND user_id = '346c0133-c07c-4f02-9372-5a47097d79a9') AND `game_id` = 'e004d8d3-5eee-4871-b13b-16777f9ac80a' AND `user_id` = '346c0133-c07c-4f02-9372-5a47097d79a9'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:422
[0m[33m[2.708ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('ec7d3409-7365-4b39-a566-6c662b640f0c','2823b383-3ba0-4617-85fa-265a8e1e0c9f',1,'2025-10-31 23:00:24.512') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:799
[0m[33m[1.615ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('2ef60e34-4ac5-4b71-b99b-71d76e40dc90','test','test',1,'2025-10-31 22:00:24.589') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:345
[0m[33m[1.145ms] [34;1m[rows:1][0m DELETE FROM `game_play_logs` WHERE id IN ('7bf1ead4-e6ff-4839-95d3-c5163ace1e6d','7bf1ead4-e6ff-4839-95d3-c5163ace1e6d')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:503
[0m[33m[0.776ms] [34;1m[rows:1][0m SELECT * FROM `game_management_roles` WHERE game_id = 'e004d8d3-5eee-4871-b13b-16777f9ac80a' and user_id = '346c0133-c07c-4f02-9372-5a47097d79a9' ORDER BY `game_management_roles`.`game_id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:503
[0m[33m[0.608ms] [34;1m[rows:1][0m SELECT * FROM `game_management_roles` WHERE game_id = 'e004d8d3-5eee-4871-b13b-16777f9ac80a' and user_id = '82ecdef8-8281-4230-b4b1-3b4c25abec26' ORDER BY `game_management_roles`.`game_id` LIMIT 1
=== RUN   TestUpdateGameManagementRole/更新対象以外のゲームのroleが存在しても問題なし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:831
[0m[33m[1.703ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('8554e896-42ad-4100-a0ec-04893480016c','2ef60e34-4ac5-4b71-b99b-71d76e40dc90',1,'2025-10-31 23:00:24.59') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:431
[0m[33m[2.219ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('4647d21b-690a-4738-a83f-92f340679bf4','2823b383-3ba0-4617-85fa-265a8e1e0c9f','9e050da9-b136-4058-9114-3ccf8cc39975','ec7d3409-7365-4b39-a566-6c662b640f0c','v1.0.0','test version 1.0.0','2025-10-31 23:00:24.512') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:440
[0m[33m[2.736ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`created_at`) VALUES ('0cfbfb0e-ad67-4d6b-9ad1-d1697f8d1b3e','5cfc53b3-2b29-465a-8f7b-cf3f6b383640','9c5ddd35-95b6-4512-abf4-a00b7f89db60','d68a5a80-01c3-4950-96c7-2c9790235261','2025-10-31 22:00:24.512','2025-10-31 23:00:24.512') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:845
[0m[33m[1.588ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('219a3f2a-9637-4ca9-8395-d75677625a59','2ef60e34-4ac5-4b71-b99b-71d76e40dc90',1,'2025-10-31 23:00:24.592') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:471
[0m[33m[2.276ms] [34;1m[rows:2][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('24feb8fa-ed32-4674-bf77-16e5d1e31988','test','test',1,'2025-10-31 23:00:24.552'),('cff5e8dc-1e9a-44b4-bb64-f3030e5eb0e7','test','test',1,'2025-10-31 23:00:24.552') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:56
[0m[33m[1.936ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`created_at`,`updated_at`) VALUES ('b04c7039-5726-4390-8eae-46b4a4e88ecc','6332b2da-13a9-4ac0-8f21-a88d77a063fd','2823b383-3ba0-4617-85fa-265a8e1e0c9f','4647d21b-690a-4738-a83f-92f340679bf4','2025-10-31 22:00:24.512','2025-10-31 23:00:24.512','2025-10-31 23:00:24.512') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:350
[0m[33m[4.070ms] [34;1m[rows:1][0m DELETE FROM `v2_game_versions` WHERE id IN ('c9203477-8250-42d7-ba9f-c33733b5f63e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log.go:56
[0m[33m[1.925ms] [34;1m[rows:1][0m INSERT INTO `game_play_logs` (`id`,`edition_id`,`game_id`,`game_version_id`,`start_time`,`created_at`,`updated_at`) VALUES ('6227d4e1-f2df-49f3-a539-404ea9f400fb','a04504dd-5640-4e3a-8de3-a427a331ea05','a553aaea-9d24-4f3e-9f7e-95e32a5e8fb1','6b410cf8-e3a2-4c93-b1bb-73b033c070bb','2025-10-31 20:00:24.512','2025-10-31 23:00:24.512','2025-10-31 23:00:24.512') RETURNING `start_time`,`end_time`,`created_at`,`updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:463
[0m[33m[0.793ms] [34;1m[rows:1][0m SELECT * FROM `game_play_logs` WHERE id = 'b04c7039-5726-4390-8eae-46b4a4e88ecc' ORDER BY `game_play_logs`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:51
[0m[33m[2.027ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('32f0791f-14fa-48e5-9c3f-24fafc96cbce','2ef60e34-4ac5-4b71-b99b-71d76e40dc90','8554e896-42ad-4100-a0ec-04893480016c','219a3f2a-9637-4ca9-8395-d75677625a59','','リリース','https://example.com','2025-10-31 23:00:24.474') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:478
[0m[33m[1.838ms] [34;1m[rows:2][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('24feb8fa-ed32-4674-bf77-16e5d1e31988','6906ef6e-3598-4ab6-a4fd-b82a5d5e9583',2),('cff5e8dc-1e9a-44b4-bb64-f3030e5eb0e7','6906ef6e-3598-4ab6-a4fd-b82a5d5e9583',2)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:463
[0m[33m[1.575ms] [34;1m[rows:1][0m SELECT * FROM `game_play_logs` WHERE id = '6227d4e1-f2df-49f3-a539-404ea9f400fb' ORDER BY `game_play_logs`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:355
[0m[33m[1.967ms] [34;1m[rows:1][0m DELETE FROM `v2_game_images` WHERE id IN ('8baaaeda-e208-4773-9ba9-cf127b53d941')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:98
[0m[33m[0.739ms] [34;1m[rows:1][0m SELECT `id` FROM `game_management_role_types` WHERE name = 'administrator' ORDER BY `game_management_role_types`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:345
[0m[33m[2.476ms] [34;1m[rows:1][0m DELETE FROM `game_play_logs` WHERE id IN ('b04c7039-5726-4390-8eae-46b4a4e88ecc')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:360
[0m[33m[1.854ms] [34;1m[rows:1][0m DELETE FROM `v2_game_videos` WHERE id IN ('1ea3cbeb-1561-4ed6-8b9c-a716c2f0b388')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:89
[0m[33m[1.308ms] [34;1m[rows:0][0m UPDATE `games` SET `latest_version_updated_at`='2025-10-31 23:00:24.474' WHERE `games`.`deleted_at` IS NULL AND `id` = '2ef60e34-4ac5-4b71-b99b-71d76e40dc90'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:114
[0m[33m[1.886ms] [34;1m[rows:1][0m UPDATE `game_management_roles` SET `role_type_id`=1 WHERE (game_id = '24feb8fa-ed32-4674-bf77-16e5d1e31988' AND user_id = '6906ef6e-3598-4ab6-a4fd-b82a5d5e9583') AND `game_id` = '24feb8fa-ed32-4674-bf77-16e5d1e31988' AND `user_id` = '6906ef6e-3598-4ab6-a4fd-b82a5d5e9583'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:503
[0m[33m[0.681ms] [34;1m[rows:1][0m SELECT * FROM `game_management_roles` WHERE game_id = '24feb8fa-ed32-4674-bf77-16e5d1e31988' and user_id = '6906ef6e-3598-4ab6-a4fd-b82a5d5e9583' ORDER BY `game_management_roles`.`game_id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.661ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '32f0791f-14fa-48e5-9c3f-24fafc96cbce'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[1.497ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = '2ef60e34-4ac5-4b71-b99b-71d76e40dc90'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:503
[0m[33m[0.539ms] [34;1m[rows:1][0m SELECT * FROM `game_management_roles` WHERE game_id = 'cff5e8dc-1e9a-44b4-bb64-f3030e5eb0e7' and user_id = '6906ef6e-3598-4ab6-a4fd-b82a5d5e9583' ORDER BY `game_management_roles`.`game_id` LIMIT 1
=== RUN   TestUpdateGameManagementRole/roleが事前に存在していないのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:350
[0m[33m[2.687ms] [34;1m[rows:1][0m DELETE FROM `v2_game_versions` WHERE id IN ('4647d21b-690a-4738-a83f-92f340679bf4')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:932
[0m[33m[0.512ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`deleted_at` IS NULL
=== RUN   TestCreateGameVersionV2/説明が空文字でもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:345
[0m[33m[4.478ms] [34;1m[rows:2][0m DELETE FROM `game_play_logs` WHERE id IN ('6227d4e1-f2df-49f3-a539-404ea9f400fb','0cfbfb0e-ad67-4d6b-9ad1-d1697f8d1b3e')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:365
[0m[33m[2.652ms] [34;1m[rows:1][0m DELETE FROM `games` WHERE id IN ('7f188343-b710-4d2c-8598-b7a319abbcac')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:98
[0m[33m[0.710ms] [34;1m[rows:1][0m SELECT `id` FROM `game_management_role_types` WHERE name = 'administrator' ORDER BY `game_management_role_types`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:355
[0m[33m[2.131ms] [34;1m[rows:1][0m DELETE FROM `v2_game_images` WHERE id IN ('9e050da9-b136-4058-9114-3ccf8cc39975')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:114
[0m[33m[1.508ms] [34;1m[rows:0][0m UPDATE `game_management_roles` SET `role_type_id`=1 WHERE (game_id = '5cadce11-3a43-4fd1-b0e3-4397763c3dda' AND user_id = '04d0b991-a1ec-40ad-93ae-b1d7d4b4d4fc') AND `game_id` = '5cadce11-3a43-4fd1-b0e3-4397763c3dda' AND `user_id` = '04d0b991-a1ec-40ad-93ae-b1d7d4b4d4fc'
=== RUN   TestUpdateGameManagementRole/既に更新後のroleが存在しているのでエラー

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:350
[0m[33m[2.085ms] [34;1m[rows:2][0m DELETE FROM `v2_game_versions` WHERE id IN ('d68a5a80-01c3-4950-96c7-2c9790235261','6b410cf8-e3a2-4c93-b1bb-73b033c070bb')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:799
[0m[33m[2.093ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('71529a1b-1750-4b2c-8354-05f009dc3b22','test','test',1,'2025-10-31 22:00:24.601') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:360
[0m[33m[1.824ms] [34;1m[rows:1][0m DELETE FROM `v2_game_videos` WHERE id IN ('ec7d3409-7365-4b39-a566-6c662b640f0c')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:355
[0m[33m[1.682ms] [34;1m[rows:2][0m DELETE FROM `v2_game_images` WHERE id IN ('8d4a931f-fb7d-43f9-8a83-44f89208131e','2fbad291-951e-4b22-82e2-642070679cb3')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:370
[0m[33m[3.692ms] [34;1m[rows:1][0m DELETE FROM `editions` WHERE id IN ('93d0b939-6b05-48cc-a9dc-9a07befc52e0')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:471
[0m[33m[1.980ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('99d8e5d5-86c0-4674-a0ce-bd187e6c602b','test','test',1,'2025-10-31 23:00:24.552') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:365
[0m[33m[1.298ms] [34;1m[rows:1][0m DELETE FROM `games` WHERE id IN ('2823b383-3ba0-4617-85fa-265a8e1e0c9f')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:360
[0m[33m[1.495ms] [34;1m[rows:2][0m DELETE FROM `v2_game_videos` WHERE id IN ('7b508480-cc4b-4354-86ce-3e251fe5f379','b3d10c6f-a2d9-4610-98e4-ac189ca93e2f')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role_test.go:478
[0m[33m[1.376ms] [34;1m[rows:1][0m INSERT INTO `game_management_roles` (`game_id`,`user_id`,`role_type_id`) VALUES ('99d8e5d5-86c0-4674-a0ce-bd187e6c602b','b98f5c14-6a28-4e08-b54c-ecab9aea091f',1)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:831
[0m[33m[3.448ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('168cea70-cad2-4a47-ad44-3b5c31b05f9e','71529a1b-1750-4b2c-8354-05f009dc3b22',1,'2025-10-31 23:00:24.603') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:98
[0m[33m[0.653ms] [34;1m[rows:1][0m SELECT `id` FROM `game_management_role_types` WHERE name = 'administrator' ORDER BY `game_management_role_types`.`id` LIMIT 1

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:370
[0m[33m[1.327ms] [34;1m[rows:1][0m DELETE FROM `editions` WHERE id IN ('6332b2da-13a9-4ac0-8f21-a88d77a063fd')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:365
[0m[33m[1.505ms] [34;1m[rows:2][0m DELETE FROM `games` WHERE id IN ('9c5ddd35-95b6-4512-abf4-a00b7f89db60','a553aaea-9d24-4f3e-9f7e-95e32a5e8fb1')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/game_management_role.go:114
[0m[33m[1.018ms] [34;1m[rows:0][0m UPDATE `game_management_roles` SET `role_type_id`=1 WHERE (game_id = '99d8e5d5-86c0-4674-a0ce-bd187e6c602b' AND user_id = 'b98f5c14-6a28-4e08-b54c-ecab9aea091f') AND `game_id` = '99d8e5d5-86c0-4674-a0ce-bd187e6c602b' AND `user_id` = 'b98f5c14-6a28-4e08-b54c-ecab9aea091f'
--- PASS: TestUpdateGameManagementRole (0.06s)
    --- PASS: TestUpdateGameManagementRole/特に問題ないので問題なし (0.01s)
    --- PASS: TestUpdateGameManagementRole/roleがCollaboratorでも問題なし (0.01s)
    --- PASS: TestUpdateGameManagementRole/roleがAdministratorでもCollaboratorでもないのでエラー (0.01s)
    --- PASS: TestUpdateGameManagementRole/更新対象以外のユーザーのroleが存在しても問題なし (0.01s)
    --- PASS: TestUpdateGameManagementRole/更新対象以外のゲームのroleが存在しても問題なし (0.01s)
    --- PASS: TestUpdateGameManagementRole/roleが事前に存在していないのでエラー (0.00s)
    --- PASS: TestUpdateGameManagementRole/既に更新後のroleが存在しているのでエラー (0.01s)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:845
[0m[33m[1.675ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('4e56e72b-723a-4a67-8cf2-bdf9697873f3','71529a1b-1750-4b2c-8354-05f009dc3b22',1,'2025-10-31 23:00:24.607') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_play_log_test.go:370
[0m[33m[1.179ms] [34;1m[rows:2][0m DELETE FROM `editions` WHERE id IN ('5cfc53b3-2b29-465a-8f7b-cf3f6b383640','a04504dd-5640-4e3a-8de3-a427a331ea05')
--- PASS: TestCreateGamePlayLog (0.00s)
    --- PASS: TestCreateGamePlayLog/playLogIDが重複している場合、ErrDuplicatedUniqueKeyが返される (0.03s)
    --- PASS: TestCreateGamePlayLog/正常にゲームプレイログが作成される (0.03s)
    --- PASS: TestCreateGamePlayLog/既存のログが存在していても新しいログを正常に作成できる (0.03s)

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:51
[0m[33m[0.997ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('c10cc343-0610-4d21-9bd2-b0d783b5808b','71529a1b-1750-4b2c-8354-05f009dc3b22','168cea70-cad2-4a47-ad44-3b5c31b05f9e','4e56e72b-723a-4a67-8cf2-bdf9697873f3','v1.0.0','','https://example.com','2025-10-31 23:00:24.474') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:89
[0m[33m[0.574ms] [34;1m[rows:0][0m UPDATE `games` SET `latest_version_updated_at`='2025-10-31 23:00:24.474' WHERE `games`.`deleted_at` IS NULL AND `id` = '71529a1b-1750-4b2c-8354-05f009dc3b22'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.291ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = 'c10cc343-0610-4d21-9bd2-b0d783b5808b'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.717ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = '71529a1b-1750-4b2c-8354-05f009dc3b22'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:932
[0m[33m[0.305ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`deleted_at` IS NULL
=== RUN   TestCreateGameVersionV2/ファイルidのスライスがnilでもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:799
[0m[33m[0.759ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('5f7e1159-b946-4c2c-b63a-35b89b1cd44b','test','test',1,'2025-10-31 22:00:24.612') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:831
[0m[33m[0.689ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('82d6e877-0f54-403f-a1d4-62486c9f062d','5f7e1159-b946-4c2c-b63a-35b89b1cd44b',1,'2025-10-31 23:00:24.613') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:845
[0m[33m[0.639ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('9f1efecf-cf32-42cd-ba1e-492c89759b9d','5f7e1159-b946-4c2c-b63a-35b89b1cd44b',1,'2025-10-31 23:00:24.613') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:51
[0m[33m[1.021ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('70f5b1ac-439c-41ab-bc4c-d7f2d2dfb844','5f7e1159-b946-4c2c-b63a-35b89b1cd44b','82d6e877-0f54-403f-a1d4-62486c9f062d','9f1efecf-cf32-42cd-ba1e-492c89759b9d','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.474') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:89
[0m[33m[0.548ms] [34;1m[rows:0][0m UPDATE `games` SET `latest_version_updated_at`='2025-10-31 23:00:24.474' WHERE `games`.`deleted_at` IS NULL AND `id` = '5f7e1159-b946-4c2c-b63a-35b89b1cd44b'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.289ms] [34;1m[rows:0][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '70f5b1ac-439c-41ab-bc4c-d7f2d2dfb844'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.690ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = '5f7e1159-b946-4c2c-b63a-35b89b1cd44b'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:932
[0m[33m[0.302ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`deleted_at` IS NULL
=== RUN   TestCreateGameVersionV2/ファイルでもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:799
[0m[33m[0.707ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('a7a4d567-fbb4-40ad-9814-c30e6c261d55','test','test',1,'2025-10-31 22:00:24.617') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:813
[0m[33m[0.670ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('7ec530e8-9456-4427-af0f-638735aca5fb','a7a4d567-fbb4-40ad-9814-c30e6c261d55',1,'hash','/path/to/game.jar','2025-10-31 23:00:24.474') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:831
[0m[33m[0.654ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('243f12ac-e170-4cdd-bd96-ab6e69502920','a7a4d567-fbb4-40ad-9814-c30e6c261d55',1,'2025-10-31 23:00:24.619') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:845
[0m[33m[1.107ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('27566f73-9c37-4db9-b28b-2f1e00b97362','a7a4d567-fbb4-40ad-9814-c30e6c261d55',1,'2025-10-31 23:00:24.62') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:51
[0m[33m[0.648ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('63941da1-9ece-43ec-bf58-75bf76c4ba34','a7a4d567-fbb4-40ad-9814-c30e6c261d55','243f12ac-e170-4cdd-bd96-ab6e69502920','27566f73-9c37-4db9-b28b-2f1e00b97362','v1.0.0','リリース','2025-10-31 23:00:24.474') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:82
[0m[33m[0.385ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`) VALUES ('7ec530e8-9456-4427-af0f-638735aca5fb','00000000-0000-0000-0000-000000000000',0,'','') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:82
[0m[33m[0.267ms] [34;1m[rows:1][0m INSERT INTO `game_version_game_file_relations` (`game_version_id`,`game_file_id`) VALUES ('63941da1-9ece-43ec-bf58-75bf76c4ba34','7ec530e8-9456-4427-af0f-638735aca5fb') ON DUPLICATE KEY UPDATE `game_version_id`=`game_version_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:89
[0m[33m[0.570ms] [34;1m[rows:0][0m UPDATE `games` SET `latest_version_updated_at`='2025-10-31 23:00:24.474' WHERE `games`.`deleted_at` IS NULL AND `id` = 'a7a4d567-fbb4-40ad-9814-c30e6c261d55'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.295ms] [34;1m[rows:1][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '63941da1-9ece-43ec-bf58-75bf76c4ba34'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.319ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_files` WHERE `v2_game_files`.`id` = '7ec530e8-9456-4427-af0f-638735aca5fb'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[1.108ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = 'a7a4d567-fbb4-40ad-9814-c30e6c261d55'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:932
[0m[33m[0.298ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`deleted_at` IS NULL
=== RUN   TestCreateGameVersionV2/ファイルが複数でもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:799
[0m[33m[0.713ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('9c6d1b15-0b96-40ec-92b8-cf96dac4c9ff','test','test',1,'2025-10-31 22:00:24.625') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:813
[0m[33m[0.647ms] [34;1m[rows:2][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('ac047bd9-81d3-4fb1-85e2-7a3b2796d85b','9c6d1b15-0b96-40ec-92b8-cf96dac4c9ff',1,'hash','/path/to/game.jar','2025-10-31 23:00:24.474'),('f2637715-b06b-4c93-be6e-878449b4af4b','9c6d1b15-0b96-40ec-92b8-cf96dac4c9ff',1,'hash','/path/to/game.jar','2025-10-31 22:00:24.474') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:831
[0m[33m[0.631ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('2d9c51c1-a60e-4b28-846f-d8589a2a8dc1','9c6d1b15-0b96-40ec-92b8-cf96dac4c9ff',1,'2025-10-31 23:00:24.626') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:845
[0m[33m[0.600ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('7decdbdb-4d9b-4a7d-8cfa-b36fd65279e5','9c6d1b15-0b96-40ec-92b8-cf96dac4c9ff',1,'2025-10-31 23:00:24.627') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:51
[0m[33m[0.646ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('bd2d5ad1-e8c2-432f-b687-1d169f27f5c2','9c6d1b15-0b96-40ec-92b8-cf96dac4c9ff','2d9c51c1-a60e-4b28-846f-d8589a2a8dc1','7decdbdb-4d9b-4a7d-8cfa-b36fd65279e5','v1.0.0','リリース','2025-10-31 23:00:24.474') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:82
[0m[33m[0.333ms] [34;1m[rows:2][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`) VALUES ('ac047bd9-81d3-4fb1-85e2-7a3b2796d85b','00000000-0000-0000-0000-000000000000',0,'',''),('f2637715-b06b-4c93-be6e-878449b4af4b','00000000-0000-0000-0000-000000000000',0,'','') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:82
[0m[33m[0.288ms] [34;1m[rows:2][0m INSERT INTO `game_version_game_file_relations` (`game_version_id`,`game_file_id`) VALUES ('bd2d5ad1-e8c2-432f-b687-1d169f27f5c2','ac047bd9-81d3-4fb1-85e2-7a3b2796d85b'),('bd2d5ad1-e8c2-432f-b687-1d169f27f5c2','f2637715-b06b-4c93-be6e-878449b4af4b') ON DUPLICATE KEY UPDATE `game_version_id`=`game_version_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:89
[0m[33m[0.516ms] [34;1m[rows:0][0m UPDATE `games` SET `latest_version_updated_at`='2025-10-31 23:00:24.474' WHERE `games`.`deleted_at` IS NULL AND `id` = '9c6d1b15-0b96-40ec-92b8-cf96dac4c9ff'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.303ms] [34;1m[rows:2][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = 'bd2d5ad1-e8c2-432f-b687-1d169f27f5c2'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.327ms] [34;1m[rows:2][0m SELECT * FROM `v2_game_files` WHERE `v2_game_files`.`id` IN ('ac047bd9-81d3-4fb1-85e2-7a3b2796d85b','f2637715-b06b-4c93-be6e-878449b4af4b')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[1.099ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = '9c6d1b15-0b96-40ec-92b8-cf96dac4c9ff'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:932
[0m[33m[0.278ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`deleted_at` IS NULL
=== RUN   TestCreateGameVersionV2/ファイルとurlが両方あってもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:799
[0m[33m[0.641ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('c8c93eae-6d5c-4eb1-8a4e-2e2a337eab79','test','test',1,'2025-10-31 22:00:24.632') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:813
[0m[33m[0.634ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('232b1a80-bc4b-4add-9a3e-ee5019aef8bf','c8c93eae-6d5c-4eb1-8a4e-2e2a337eab79',1,'hash','/path/to/game.jar','2025-10-31 23:00:24.474') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:831
[0m[33m[0.608ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('bf4bec2f-4e30-4492-b37b-64ee6f271595','c8c93eae-6d5c-4eb1-8a4e-2e2a337eab79',1,'2025-10-31 23:00:24.633') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:845
[0m[33m[0.600ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('b625d323-905a-40e5-89a3-09ee2d8d5efd','c8c93eae-6d5c-4eb1-8a4e-2e2a337eab79',1,'2025-10-31 23:00:24.634') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:51
[0m[33m[1.024ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`url`,`created_at`) VALUES ('88f64329-41c8-424b-bb96-830f692b8780','c8c93eae-6d5c-4eb1-8a4e-2e2a337eab79','bf4bec2f-4e30-4492-b37b-64ee6f271595','b625d323-905a-40e5-89a3-09ee2d8d5efd','v1.0.0','リリース','https://example.com','2025-10-31 23:00:24.474') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:82
[0m[33m[0.310ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`) VALUES ('232b1a80-bc4b-4add-9a3e-ee5019aef8bf','00000000-0000-0000-0000-000000000000',0,'','') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:82
[0m[33m[0.272ms] [34;1m[rows:1][0m INSERT INTO `game_version_game_file_relations` (`game_version_id`,`game_file_id`) VALUES ('88f64329-41c8-424b-bb96-830f692b8780','232b1a80-bc4b-4add-9a3e-ee5019aef8bf') ON DUPLICATE KEY UPDATE `game_version_id`=`game_version_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:89
[0m[33m[0.525ms] [34;1m[rows:0][0m UPDATE `games` SET `latest_version_updated_at`='2025-10-31 23:00:24.474' WHERE `games`.`deleted_at` IS NULL AND `id` = 'c8c93eae-6d5c-4eb1-8a4e-2e2a337eab79'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.276ms] [34;1m[rows:1][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` = '88f64329-41c8-424b-bb96-830f692b8780'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.317ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_files` WHERE `v2_game_files`.`id` = '232b1a80-bc4b-4add-9a3e-ee5019aef8bf'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[1.015ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_versions` WHERE game_id = 'c8c93eae-6d5c-4eb1-8a4e-2e2a337eab79'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:932
[0m[33m[0.285ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`deleted_at` IS NULL
=== RUN   TestCreateGameVersionV2/同じファイルを複数バージョンで使っていてもエラーなし

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:799
[0m[33m[0.655ms] [34;1m[rows:1][0m INSERT INTO `games` (`id`,`name`,`description`,`visibility_type_id`,`created_at`) VALUES ('c566751d-3b79-413a-8de6-6a03b1e92028','test','test',1,'2025-10-31 22:00:24.639') RETURNING `created_at`,`deleted_at`,`latest_version_updated_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:813
[0m[33m[0.591ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`,`created_at`) VALUES ('8241615a-2951-419d-b484-fdec59a747f3','c566751d-3b79-413a-8de6-6a03b1e92028',1,'hash','/path/to/game.jar','2025-10-31 23:00:24.474') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:822
[0m[33m[0.292ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('656d1f23-716f-477c-b1f9-369e3aabcd75','c566751d-3b79-413a-8de6-6a03b1e92028',1,'2025-10-31 22:00:24.474') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:822
[0m[33m[0.293ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('cf334f0b-8185-4618-8f67-884f435bfb42','c566751d-3b79-413a-8de6-6a03b1e92028',1,'2025-10-31 22:00:24.474') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:822
[0m[33m[0.302ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`) VALUES ('8241615a-2951-419d-b484-fdec59a747f3','00000000-0000-0000-0000-000000000000',0,'','') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:822
[0m[33m[0.285ms] [34;1m[rows:1][0m INSERT INTO `game_version_game_file_relations` (`game_version_id`,`game_file_id`) VALUES ('c05e9057-733f-4adc-8764-b5d56acdb99f','8241615a-2951-419d-b484-fdec59a747f3') ON DUPLICATE KEY UPDATE `game_version_id`=`game_version_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:822
[0m[33m[2.056ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('c05e9057-733f-4adc-8764-b5d56acdb99f','c566751d-3b79-413a-8de6-6a03b1e92028','656d1f23-716f-477c-b1f9-369e3aabcd75','cf334f0b-8185-4618-8f67-884f435bfb42','v1.0.0','リリース','2025-10-31 22:00:24.474') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:831
[0m[33m[0.595ms] [34;1m[rows:1][0m INSERT INTO `v2_game_images` (`id`,`game_id`,`image_type_id`,`created_at`) VALUES ('3d321c1c-8ea4-4d6a-8322-04e05282e0b8','c566751d-3b79-413a-8de6-6a03b1e92028',1,'2025-10-31 23:00:24.642') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:845
[0m[33m[0.588ms] [34;1m[rows:1][0m INSERT INTO `v2_game_videos` (`id`,`game_id`,`video_type_id`,`created_at`) VALUES ('2b4daf3b-6ada-4474-b8c2-b1659ff81c34','c566751d-3b79-413a-8de6-6a03b1e92028',1,'2025-10-31 23:00:24.643') RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:51
[0m[33m[0.617ms] [34;1m[rows:1][0m INSERT INTO `v2_game_versions` (`id`,`game_id`,`game_image_id`,`game_video_id`,`name`,`description`,`created_at`) VALUES ('7df3933e-4bd9-494c-a4bc-16e67578d834','c566751d-3b79-413a-8de6-6a03b1e92028','3d321c1c-8ea4-4d6a-8322-04e05282e0b8','2b4daf3b-6ada-4474-b8c2-b1659ff81c34','v1.1.0','アップデート','2025-10-31 23:00:24.474') RETURNING `url`,`created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:82
[0m[33m[0.308ms] [34;1m[rows:1][0m INSERT INTO `v2_game_files` (`id`,`game_id`,`file_type_id`,`hash`,`entry_point`) VALUES ('8241615a-2951-419d-b484-fdec59a747f3','00000000-0000-0000-0000-000000000000',0,'','') ON DUPLICATE KEY UPDATE `id`=`id` RETURNING `created_at`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:82
[0m[33m[0.259ms] [34;1m[rows:1][0m INSERT INTO `game_version_game_file_relations` (`game_version_id`,`game_file_id`) VALUES ('7df3933e-4bd9-494c-a4bc-16e67578d834','8241615a-2951-419d-b484-fdec59a747f3') ON DUPLICATE KEY UPDATE `game_version_id`=`game_version_id`

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version.go:89
[0m[33m[0.501ms] [34;1m[rows:0][0m UPDATE `games` SET `latest_version_updated_at`='2025-10-31 23:00:24.474' WHERE `games`.`deleted_at` IS NULL AND `id` = 'c566751d-3b79-413a-8de6-6a03b1e92028'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.300ms] [34;1m[rows:2][0m SELECT * FROM `game_version_game_file_relations` WHERE `game_version_game_file_relations`.`game_version_id` IN ('c05e9057-733f-4adc-8764-b5d56acdb99f','7df3933e-4bd9-494c-a4bc-16e67578d834')

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[0.297ms] [34;1m[rows:1][0m SELECT * FROM `v2_game_files` WHERE `v2_game_files`.`id` = '8241615a-2951-419d-b484-fdec59a747f3'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:881
[0m[33m[1.072ms] [34;1m[rows:2][0m SELECT * FROM `v2_game_versions` WHERE game_id = 'c566751d-3b79-413a-8de6-6a03b1e92028'

2025/10/31 23:00:24 [32m/Users/akihito1/trap/trapCollectionServer/trap-collection-server/src/repository/gorm2/v2_game_version_test.go:932
[0m[33m[0.305ms] [34;1m[rows:1][0m SELECT * FROM `games` WHERE `games`.`deleted_at` IS NULL
--- PASS: TestCreateGameVersionV2 (0.18s)
    --- PASS: TestCreateGameVersionV2/特に問題ないのでエラーなし (0.02s)
    --- PASS: TestCreateGameVersionV2/既にバージョンが存在してもエラーなし (0.02s)
    --- PASS: TestCreateGameVersionV2/既にIDが同じバージョンが存在するのでエラー (0.02s)
    --- PASS: TestCreateGameVersionV2/同名のバージョンが存在するのでエラー (0.02s)
    --- PASS: TestCreateGameVersionV2/バージョン名が32文字でもエラーなし (0.02s)
    --- PASS: TestCreateGameVersionV2/バージョン名が33文字なのでエラー (0.01s)
    --- PASS: TestCreateGameVersionV2/ゲームが存在しないのでエラー (0.00s)
    --- PASS: TestCreateGameVersionV2/バージョン名が空文字でもエラーなし (0.01s)
    --- PASS: TestCreateGameVersionV2/説明が空文字でもエラーなし (0.01s)
    --- PASS: TestCreateGameVersionV2/ファイルidのスライスがnilでもエラーなし (0.01s)
    --- PASS: TestCreateGameVersionV2/ファイルでもエラーなし (0.01s)
    --- PASS: TestCreateGameVersionV2/ファイルが複数でもエラーなし (0.01s)
    --- PASS: TestCreateGameVersionV2/ファイルとurlが両方あってもエラーなし (0.01s)
    --- PASS: TestCreateGameVersionV2/同じファイルを複数バージョンで使っていてもエラーなし (0.01s)
FAIL
FAIL	github.com/traPtitech/trap-collection-server/src/repository/gorm2	6.735s
?   	github.com/traPtitech/trap-collection-server/src/repository/gorm2/migrate	[no test files]
?   	github.com/traPtitech/trap-collection-server/src/repository/gorm2/schema	[no test files]
?   	github.com/traPtitech/trap-collection-server/src/repository/mock	[no test files]
?   	github.com/traPtitech/trap-collection-server/src/service	[no test files]
?   	github.com/traPtitech/trap-collection-server/src/service/mock	[no test files]
=== RUN   TestGetMe
=== PAUSE TestGetMe
=== RUN   TestGetAllActiveUser
=== PAUSE TestGetAllActiveUser
=== CONT  TestGetAllActiveUser
=== RUN   TestGetAllActiveUser/cacheがhitするのでエラーなし
=== CONT  TestGetMe
=== RUN   TestGetMe/cacheがhitするのでエラーなし
=== RUN   TestGetAllActiveUser/botを除外する設定でcacheUsersにbotが含まれる
=== RUN   TestGetMe/cacheがhitしないがauthからの取り出しに成功するのでエラーなし
=== RUN   TestGetAllActiveUser/botを除外する設定でcacheがhitしないがauthからbotを含むユーザー情報を取り出す
=== RUN   TestGetMe/cacheがエラー(ErrCacheMiss以外)でもauthからの取り出しに成功するのでエラーなし
2025/10/31 21:55:46 error: failed to get user info: cache error
=== RUN   TestGetAllActiveUser/cacheがhitしないがauthからの取り出しに成功するのでエラーなし
=== RUN   TestGetMe/cacheがhitせずauthからの取り出しがエラーなのでエラー
=== RUN   TestGetMe/cacheがhitしないがauthからの取り出しに成功するのでcache設定に失敗してもエラーなし
=== RUN   TestGetAllActiveUser/cacheがエラー(ErrCacheMiss以外)でもauthからの取り出しに成功するのでエラーなし
2025/10/31 21:55:46 error: failed to get user info: cache error
2025/10/31 21:55:46 error: failed to set user info: cache error
=== RUN   TestGetAllActiveUser/cacheがhitせずauthからの取り出しがエラーなのでエラー
=== RUN   TestGetAllActiveUser/cacheがhitしないがauthからの取り出しに成功するのでcache設定に失敗してもエラーなし
2025/10/31 21:55:46 error: failed to set user info: cache error
--- PASS: TestGetAllActiveUser (0.03s)
    --- PASS: TestGetAllActiveUser/cacheがhitするのでエラーなし (0.00s)
    --- PASS: TestGetAllActiveUser/botを除外する設定でcacheUsersにbotが含まれる (0.00s)
    --- PASS: TestGetAllActiveUser/botを除外する設定でcacheがhitしないがauthからbotを含むユーザー情報を取り出す (0.00s)
    --- PASS: TestGetAllActiveUser/cacheがhitしないがauthからの取り出しに成功するのでエラーなし (0.00s)
    --- PASS: TestGetAllActiveUser/cacheがエラー(ErrCacheMiss以外)でもauthからの取り出しに成功するのでエラーなし (0.00s)
    --- PASS: TestGetAllActiveUser/cacheがhitせずauthからの取り出しがエラーなのでエラー (0.00s)
    --- PASS: TestGetAllActiveUser/cacheがhitしないがauthからの取り出しに成功するのでcache設定に失敗してもエラーなし (0.00s)
--- PASS: TestGetMe (0.03s)
    --- PASS: TestGetMe/cacheがhitするのでエラーなし (0.00s)
    --- PASS: TestGetMe/cacheがhitしないがauthからの取り出しに成功するのでエラーなし (0.00s)
    --- PASS: TestGetMe/cacheがエラー(ErrCacheMiss以外)でもauthからの取り出しに成功するのでエラーなし (0.00s)
    --- PASS: TestGetMe/cacheがhitせずauthからの取り出しがエラーなのでエラー (0.00s)
    --- PASS: TestGetMe/cacheがhitしないがauthからの取り出しに成功するのでcache設定に失敗してもエラーなし (0.01s)
PASS
ok  	github.com/traPtitech/trap-collection-server/src/service/v1	(cached)
=== RUN   TestAddAdmin
=== PAUSE TestAddAdmin
=== RUN   TestGetAdmins
=== PAUSE TestGetAdmins
=== RUN   TestDeleteAdmin
=== PAUSE TestDeleteAdmin
=== RUN   TestAdminAuthorize
=== PAUSE TestAdminAuthorize
=== RUN   TestCreateEdition
=== PAUSE TestCreateEdition
=== RUN   TestGetEditions
=== PAUSE TestGetEditions
=== RUN   TestGetEdition
=== PAUSE TestGetEdition
=== RUN   TestUpdateEdition
=== PAUSE TestUpdateEdition
=== RUN   Test_checkZip
=== PAUSE Test_checkZip
=== RUN   Test_checkEntryPointExist
=== PAUSE Test_checkEntryPointExist
=== RUN   Test_checkMacOSAppEntryPointValid
=== PAUSE Test_checkMacOSAppEntryPointValid
=== RUN   TestSaveGameFile
=== PAUSE TestSaveGameFile
=== RUN   TestGetGameFile
=== PAUSE TestGetGameFile
=== RUN   TestGetGameFiles
=== PAUSE TestGetGameFiles
=== RUN   TestGetGameFileMeta
=== PAUSE TestGetGameFileMeta
=== RUN   TestGetGameGenres
=== PAUSE TestGetGameGenres
=== RUN   TestDeleteGameGenre
=== PAUSE TestDeleteGameGenre
=== RUN   TestUpdateGameGenres
=== PAUSE TestUpdateGameGenres
=== RUN   TestUpdateGameGenre
=== PAUSE TestUpdateGameGenre
=== RUN   TestSaveGameImage
=== PAUSE TestSaveGameImage
=== RUN   TestGetGameImages
=== PAUSE TestGetGameImages
=== RUN   TestGetGameImage
=== PAUSE TestGetGameImage
=== RUN   TestGetGameImageMeta
=== PAUSE TestGetGameImageMeta
=== RUN   TestCreatePlayLog
=== PAUSE TestCreatePlayLog
=== RUN   TestUpdatePlayLogEndTime
=== PAUSE TestUpdatePlayLogEndTime
=== RUN   TestGetGamePlayStats
=== PAUSE TestGetGamePlayStats
=== RUN   TestGetEditionPlayStats
=== PAUSE TestGetEditionPlayStats
=== RUN   TestCreateGame
=== PAUSE TestCreateGame
=== RUN   TestGetGame
=== PAUSE TestGetGame
=== RUN   TestGetGames
=== PAUSE TestGetGames
=== RUN   TestGetMyGames
=== PAUSE TestGetMyGames
=== RUN   TestUpdateGame
=== PAUSE TestUpdateGame
=== RUN   TestDeleteGame
=== PAUSE TestDeleteGame
=== RUN   TestCreateGameVersion
=== PAUSE TestCreateGameVersion
=== RUN   TestGetGameVersions
=== PAUSE TestGetGameVersions
=== RUN   TestGetLatestGameVersion
=== PAUSE TestGetLatestGameVersion
=== RUN   TestSaveGameVideo
=== PAUSE TestSaveGameVideo
=== RUN   TestGetGameVideos
=== PAUSE TestGetGameVideos
=== RUN   TestGetGameVideo
=== PAUSE TestGetGameVideo
=== RUN   TestGetGameVideoMeta
=== PAUSE TestGetGameVideoMeta
=== RUN   TestGenerateAuthState
=== PAUSE TestGenerateAuthState
=== RUN   TestCallback
=== PAUSE TestCallback
=== RUN   TestLogout
=== PAUSE TestLogout
=== RUN   TestAuthenticate
=== PAUSE TestAuthenticate
=== RUN   TestGetMe
=== PAUSE TestGetMe
=== RUN   TestGetActiveUsers
=== PAUSE TestGetActiveUsers
=== CONT  TestAddAdmin
=== RUN   TestAddAdmin/特に問題ないのでエラー無し
=== CONT  TestGetActiveUsers
=== RUN   TestGetActiveUsers/cacheがhitするのでエラーなし
=== CONT  TestGetGameImageMeta
=== RUN   TestGetGameImageMeta/特に問題ないのでエラーなし
=== RUN   TestGetGameImageMeta/GetGameがErrRecordNotFoundなのでErrInvalidGameID
=== RUN   TestGetGameImageMeta/GetGameがエラーなのでエラー
=== CONT  TestGetMe
=== RUN   TestGetMe/cacheがhitするのでエラーなし
=== CONT  TestLogout
=== RUN   TestLogout/エラーなしなので問題なし
=== CONT  TestCallback
=== RUN   TestCallback/エラーなしなので問題なし
=== RUN   TestCallback/GetOIDCSessionでErrInvalidCredentials
=== CONT  TestAuthenticate
=== RUN   TestAuthenticate/期限前なので問題なし
=== CONT  TestGenerateAuthState
--- PASS: TestGenerateAuthState (0.00s)
=== CONT  TestGetGameVideo
=== RUN   TestGetGameVideo/特に問題ないのでエラーなし
=== RUN   TestGetGameImageMeta/画像がpngでもエラーなし
=== RUN   TestGetMe/cacheがhitしないがauthからの取り出しに成功するのでエラーなし
=== RUN   TestAuthenticate/期限切れなのでエラー
=== RUN   TestGetGameVideo/GetGameがErrRecordNotFoundなのでErrInvalidGameID
=== RUN   TestGetActiveUsers/cacheがhitしないがauthからの取り出しに成功するのでエラーなし
--- PASS: TestAuthenticate (0.00s)
    --- PASS: TestAuthenticate/期限前なので問題なし (0.00s)
    --- PASS: TestAuthenticate/期限切れなのでエラー (0.00s)
=== CONT  TestGetGameVideoMeta
=== RUN   TestGetMe/cacheがエラー(ErrCacheMiss以外)でもauthからの取り出しに成功するのでエラーなし
=== RUN   TestLogout/GetOIDCSessionでエラー
--- PASS: TestLogout (0.01s)
    --- PASS: TestLogout/エラーなしなので問題なし (0.00s)
    --- PASS: TestLogout/GetOIDCSessionでエラー (0.00s)
=== CONT  TestSaveGameVideo
=== RUN   TestSaveGameVideo/特に問題ないのでエラーなし
=== RUN   TestGetGameVideo/GetGameがエラーなのでエラー
=== RUN   TestGetGameImageMeta/画像がgifでもエラーなし
=== RUN   TestCallback/GetOIDCSessionでエラー
=== RUN   TestGetGameImageMeta/GetGameImageがErrRecordNotFoundなのでErrInvalidGameImageID
=== RUN   TestGetGameVideo/GetGameVideoがErrRecordNotFoundなのでErrInvalidGameVideoID
=== RUN   TestGetGameVideoMeta/特に問題ないのでエラーなし
--- PASS: TestCallback (0.01s)
    --- PASS: TestCallback/エラーなしなので問題なし (0.00s)
    --- PASS: TestCallback/GetOIDCSessionでErrInvalidCredentials (0.00s)
    --- PASS: TestCallback/GetOIDCSessionでエラー (0.00s)
=== RUN   TestGetGameImageMeta/ゲーム画像に紐づくゲームIDが違うのでErrInvalidGameImageID
=== RUN   TestAddAdmin/GetAdminsの結果に凍結済みユーザーがいてもエラー無し
=== RUN   TestGetGameVideoMeta/GetGameがErrRecordNotFoundなのでErrInvalidGameID
=== CONT  TestGetLatestGameVersion
=== RUN   TestGetLatestGameVersion/特に問題ないのでエラーなし
=== RUN   TestGetLatestGameVersion/versionがないのでErrNoGameVersion
=== RUN   TestGetGameImageMeta/GetGameImageがエラーなのでエラー
=== RUN   TestGetGameVideo/ゲーム動画に紐づくゲームIDが違うのでErrInvalidGameVideoID
--- PASS: TestGetGameImageMeta (0.03s)
    --- PASS: TestGetGameImageMeta/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameImageMeta/GetGameがErrRecordNotFoundなのでErrInvalidGameID (0.00s)
    --- PASS: TestGetGameImageMeta/GetGameがエラーなのでエラー (0.00s)
    --- PASS: TestGetGameImageMeta/画像がpngでもエラーなし (0.00s)
    --- PASS: TestGetGameImageMeta/画像がgifでもエラーなし (0.00s)
    --- PASS: TestGetGameImageMeta/GetGameImageがErrRecordNotFoundなのでErrInvalidGameImageID (0.00s)
    --- PASS: TestGetGameImageMeta/ゲーム画像に紐づくゲームIDが違うのでErrInvalidGameImageID (0.00s)
    --- PASS: TestGetGameImageMeta/GetGameImageがエラーなのでエラー (0.00s)
=== CONT  TestGetGameVideos
=== RUN   TestGetGameVideos/特に問題ないのでエラーなし
=== RUN   TestGetGameVideo/GetGameVideoがエラーなのでエラー
=== RUN   TestAddAdmin/全ユーザーの取得に失敗したのでエラー
=== RUN   TestGetActiveUsers/cacheがエラー(ErrCacheMiss以外)でもauthからの取り出しに成功するのでエラーなし
=== RUN   TestGetGameVideoMeta/GetGameがエラーなのでエラー
=== RUN   TestGetLatestGameVersion/ファイルがwindowsでもエラーなし
=== RUN   TestGetLatestGameVersion/ファイルがmacでもエラーなし
=== RUN   TestGetLatestGameVersion/ファイルがjarでもエラーなし
=== RUN   TestGetGameVideos/GetGameがErrRecordNotFoundなのでErrInvalidGameID
2025/10/31 21:55:47 error: failed to get user info: cache error
=== RUN   TestGetLatestGameVersion/windowsのファイルが重複していた場合、fileIDが先のものが優先される
2025/10/31 21:55:47 error: duplicate file type windows(game_id=ZO^vIئ_=, game_version_id=#yRMW)}, game_file_id=BMp@ไ?})
=== RUN   TestGetGameVideoMeta/GetGameVideoがErrRecordNotFoundなのでErrInvalidGameVideoID
=== RUN   TestGetLatestGameVersion/macのファイルが重複していた場合、fileIDが先のものが優先される
=== RUN   TestGetMe/cacheがhitせずauthからの取り出しがエラーなのでエラー
=== RUN   TestGetGameVideos/GetGameがエラーなのでエラー
=== RUN   TestGetGameVideos/動画がなくてもエラーなし
2025/10/31 21:55:48 error: duplicate file type mac(game_id=Fs)i5, game_version_id=1tFJLT, game_file_id=WKDXJOa)
=== RUN   TestGetGameVideoMeta/ゲーム動画に紐づくゲームIDが違うのでErrInvalidGameVideoID
=== RUN   TestGetMe/cacheがhitしないがauthからの取り出しに成功するのでcache設定に失敗してもエラーなし
2025/10/31 21:55:48 error: failed to set user info: cache error
=== RUN   TestGetGameVideoMeta/GetGameVideoがエラーなのでエラー
--- PASS: TestGetMe (0.11s)
    --- PASS: TestGetMe/cacheがhitするのでエラーなし (0.00s)
    --- PASS: TestGetMe/cacheがhitしないがauthからの取り出しに成功するのでエラーなし (0.00s)
    --- PASS: TestGetMe/cacheがエラー(ErrCacheMiss以外)でもauthからの取り出しに成功するのでエラーなし (0.06s)
    --- PASS: TestGetMe/cacheがhitせずauthからの取り出しがエラーなのでエラー (0.00s)
    --- PASS: TestGetMe/cacheがhitしないがauthからの取り出しに成功するのでcache設定に失敗してもエラーなし (0.00s)
=== CONT  TestCreateGameVersion
=== RUN   TestGetGameVideos/動画が複数でもエラーなし
=== RUN   TestCreateGameVersion/特に問題ないのでエラーなし
--- PASS: TestGetGameVideoMeta (0.10s)
    --- PASS: TestGetGameVideoMeta/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameVideoMeta/GetGameがErrRecordNotFoundなのでErrInvalidGameID (0.00s)
    --- PASS: TestGetGameVideoMeta/GetGameがエラーなのでエラー (0.00s)
    --- PASS: TestGetGameVideoMeta/GetGameVideoがErrRecordNotFoundなのでErrInvalidGameVideoID (0.00s)
    --- PASS: TestGetGameVideoMeta/ゲーム動画に紐づくゲームIDが違うのでErrInvalidGameVideoID (0.00s)
    --- PASS: TestGetGameVideoMeta/GetGameVideoがエラーなのでエラー (0.00s)
=== CONT  TestGetGameVersions
=== RUN   TestCreateGameVersion/assetがwindowsでもエラーなし
=== RUN   TestGetGameVersions/特に問題ないのでエラーなし
=== RUN   TestGetGameVideos/GetGameVideosがエラーなのでエラー
--- PASS: TestGetGameVideos (0.09s)
    --- PASS: TestGetGameVideos/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameVideos/GetGameがErrRecordNotFoundなのでErrInvalidGameID (0.00s)
    --- PASS: TestGetGameVideos/GetGameがエラーなのでエラー (0.00s)
    --- PASS: TestGetGameVideos/動画がなくてもエラーなし (0.00s)
    --- PASS: TestGetGameVideos/動画が複数でもエラーなし (0.00s)
    --- PASS: TestGetGameVideos/GetGameVideosがエラーなのでエラー (0.00s)
=== CONT  TestDeleteGame
=== RUN   TestDeleteGame/特に問題ないのでエラーなし
=== RUN   TestCreateGameVersion/assetがmacでもエラーなし
2025/10/31 21:55:47 error: failed to get user info: test
2025/10/31 21:55:47 error: failed to get user info: cache error
=== RUN   TestGetLatestGameVersion/jarのファイルが重複していた場合、fileIDが先のものが優先される
2025/10/31 21:55:48 error: duplicate file type jar(game_id=[D!3e9, game_version_id=9M2EsЏD, game_file_id=5Kt*')
=== RUN   TestGetGameVersions/versionがなくてもエラーなし
=== RUN   TestGetLatestGameVersion/ファイルが存在しない場合、無視
2025/10/31 21:55:48 error: game file not found(game_id=,LI׬, game_version_id=gM6D̸, game_file_id=ٙCYlo-h)
=== RUN   TestGetGameVideo/GetTempURLがエラーなのでエラー
=== RUN   TestGetLatestGameVersion/GetLatestGameVersionがエラーなのでエラー
=== RUN   TestGetGameVersions/versionが複数でもエラーなし
=== RUN   TestCreateGameVersion/assetがjarでもエラーなし
=== RUN   TestAddAdmin/存在しないユーザーなのでErrInvalidUserID
=== RUN   TestGetActiveUsers/cacheがhitせずauthからの取り出しがエラーなのでエラー
=== RUN   TestDeleteGame/ゲームが存在しないのでErrNoGame
--- PASS: TestGetGameVideo (0.14s)
    --- PASS: TestGetGameVideo/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameVideo/GetGameがErrRecordNotFoundなのでErrInvalidGameID (0.00s)
    --- PASS: TestGetGameVideo/GetGameがエラーなのでエラー (0.00s)
    --- PASS: TestGetGameVideo/GetGameVideoがErrRecordNotFoundなのでErrInvalidGameVideoID (0.00s)
    --- PASS: TestGetGameVideo/ゲーム動画に紐づくゲームIDが違うのでErrInvalidGameVideoID (0.00s)
    --- PASS: TestGetGameVideo/GetGameVideoがエラーなのでエラー (0.00s)
    --- PASS: TestGetGameVideo/GetTempURLがエラーなのでエラー (0.00s)
=== RUN   TestGetGameVersions/画像を共有していてもエラーなし
=== RUN   TestGetLatestGameVersion/GetGameFilesがエラーなのでエラー
=== RUN   TestAddAdmin/GetAdminsがエラーなのでエラー
=== RUN   TestGetActiveUsers/cacheがhitしないがauthからの取り出しに成功するのでcache設定に失敗してもエラーなし
=== RUN   TestGetLatestGameVersion/ファイルがwindows,mac,jarのいずれでもないファイルは無視される
2025/10/31 21:55:48 error: failed to set user info: cache error
2025/10/31 21:55:48 invalid game file type: game_id=UAp.X, game_version_id=WSaIhl[C, game_file_id=>K:X, file_type=100
=== RUN   TestGetActiveUsers/includeBotがtrueなのでbotユーザーも含まれる
=== RUN   TestGetLatestGameVersion/ゲームが存在しないのでErrInvalidGameID
=== RUN   TestCreateGameVersion/Assetが空なのでErrNoAsset
=== RUN   TestGetActiveUsers/includeBotがfalseなのでbotユーザーは除外される
=== RUN   TestCreateGameVersion/ゲームが存在しないのでErrInvalidGameID
=== RUN   TestDeleteGame/RemoveGameがエラーなのでエラー
--- PASS: TestDeleteGame (0.03s)
    --- PASS: TestDeleteGame/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestDeleteGame/ゲームが存在しないのでErrNoGame (0.00s)
    --- PASS: TestDeleteGame/RemoveGameがエラーなのでエラー (0.00s)
=== RUN   TestCreateGameVersion/GetGameがエラーなのでエラー
=== RUN   TestGetLatestGameVersion/GetGameがエラーなのでエラー
--- PASS: TestGetLatestGameVersion (0.13s)
    --- PASS: TestGetLatestGameVersion/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetLatestGameVersion/versionがないのでErrNoGameVersion (0.00s)
    --- PASS: TestGetLatestGameVersion/ファイルがwindowsでもエラーなし (0.02s)
    --- PASS: TestGetLatestGameVersion/ファイルがmacでもエラーなし (0.00s)
    --- PASS: TestGetLatestGameVersion/ファイルがjarでもエラーなし (0.02s)
    --- PASS: TestGetLatestGameVersion/windowsのファイルが重複していた場合、fileIDが先のものが優先される (0.01s)
    --- PASS: TestGetLatestGameVersion/macのファイルが重複していた場合、fileIDが先のものが優先される (0.00s)
    --- PASS: TestGetLatestGameVersion/jarのファイルが重複していた場合、fileIDが先のものが優先される (0.00s)
    --- PASS: TestGetLatestGameVersion/ファイルが存在しない場合、無視 (0.00s)
    --- PASS: TestGetLatestGameVersion/GetLatestGameVersionがエラーなのでエラー (0.00s)
    --- PASS: TestGetLatestGameVersion/GetGameFilesがエラーなのでエラー (0.00s)
    --- PASS: TestGetLatestGameVersion/ファイルがwindows,mac,jarのいずれでもないファイルは無視される (0.00s)
    --- PASS: TestGetLatestGameVersion/ゲームが存在しないのでErrInvalidGameID (0.00s)
    --- PASS: TestGetLatestGameVersion/GetGameがエラーなのでエラー (0.00s)
=== CONT  TestGetMyGames
=== RUN   TestGetMyGames/getMeがエラーなのでエラー
--- PASS: TestGetActiveUsers (0.15s)
    --- PASS: TestGetActiveUsers/cacheがhitするのでエラーなし (0.01s)
    --- PASS: TestGetActiveUsers/cacheがhitしないがauthからの取り出しに成功するのでエラーなし (0.02s)
    --- PASS: TestGetActiveUsers/cacheがエラー(ErrCacheMiss以外)でもauthからの取り出しに成功するのでエラーなし (0.09s)
    --- PASS: TestGetActiveUsers/cacheがhitせずauthからの取り出しがエラーなのでエラー (0.00s)
    --- PASS: TestGetActiveUsers/cacheがhitしないがauthからの取り出しに成功するのでcache設定に失敗してもエラーなし (0.00s)
    --- PASS: TestGetActiveUsers/includeBotがtrueなのでbotユーザーも含まれる (0.00s)
    --- PASS: TestGetActiveUsers/includeBotがfalseなのでbotユーザーは除外される (0.00s)
=== CONT  TestCreateGame
=== RUN   TestGetMyGames/特に問題ないのでエラーなし
=== CONT  TestGetGames
=== RUN   TestGetGames/特に問題ないのでエラーなし
=== CONT  TestGetGame
=== RUN   TestAddAdmin/既にユーザーがadminなのでErrNoAdminsUpdated
=== RUN   TestAddAdmin/AddAdminがエラーなのでエラー
=== RUN   TestGetGameVersions/動画を共有していてもエラーなし
=== RUN   TestGetMyGames/ゲームが存在しなくてもエラーなし
=== RUN   TestGetGame/特に問題ないのでエラーなし
=== RUN   TestGetMyGames/ゲームが複数でもエラーなし
=== RUN   TestGetGameVersions/ファイルがwindowsでもエラーなし
--- PASS: TestAddAdmin (0.15s)
    --- PASS: TestAddAdmin/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestAddAdmin/GetAdminsの結果に凍結済みユーザーがいてもエラー無し (0.00s)
    --- PASS: TestAddAdmin/全ユーザーの取得に失敗したのでエラー (0.09s)
    --- PASS: TestAddAdmin/存在しないユーザーなのでErrInvalidUserID (0.00s)
    --- PASS: TestAddAdmin/GetAdminsがエラーなのでエラー (0.00s)
    --- PASS: TestAddAdmin/既にユーザーがadminなのでErrNoAdminsUpdated (0.00s)
    --- PASS: TestAddAdmin/AddAdminがエラーなのでエラー (0.00s)
=== RUN   TestGetGame/authSessionが無くても問題なし
=== CONT  TestGetEditionPlayStats
=== RUN   TestCreateGameVersion/画像が存在しないのでErrInvalidGameImageID
=== RUN   TestGetMyGames/limitが設定されてもエラーなし
=== RUN   TestGetGames/ゲームが存在しなくてもエラーなし
=== RUN   TestGetGame/ゲームが存在しないのでErrNoGame
=== RUN   TestGetGameVersions/ファイルがmacでもエラーなし
=== RUN   TestCreateGameVersion/GetGameImageがエラーなのでエラー
=== RUN   TestGetGameVersions/ファイルがjarでもエラーなし
=== RUN   TestCreateGameVersion/画像に紐づくゲームが違うのでErrInvalidGameImageID
=== RUN   TestGetEditionPlayStats/正常にエディション統計が取得される
=== RUN   TestCreateGame/ユーザー情報の取得に失敗したのでエラー
=== PAUSE TestGetEditionPlayStats/正常にエディション統計が取得される
=== RUN   TestGetEditionPlayStats/GetEditionがErrRecordNotFoundなのでErrInvalidEdition
=== PAUSE TestGetEditionPlayStats/GetEditionがErrRecordNotFoundなのでErrInvalidEdition
=== RUN   TestGetEditionPlayStats/GetEditionがエラーなのでエラー
=== PAUSE TestGetEditionPlayStats/GetEditionがエラーなのでエラー
=== RUN   TestGetMyGames/limitとoffsetが両方設定されてもエラーなし
=== RUN   TestGetGame/GetGameがエラーなのでエラー
=== RUN   TestCreateGameVersion/動画が存在しないのでErrInvalidGameVideoID
=== RUN   TestGetGame/GetGameManagementRolesByGameIDがエラーなのでエラー
=== RUN   TestGetMyGames/visibilityがあってもエラー無し
=== RUN   TestCreateGameVersion/GetGameVideoがエラーなのでエラー
=== RUN   TestGetMyGames/ジャンルの指定があってもエラー無し
=== RUN   TestGetMyGames/gameNameの指定があってもエラー無し
=== RUN   TestGetGame/getActiveUsersがエラーなのでエラー
=== RUN   TestGetGames/ゲームが複数でもエラーなし
=== RUN   TestGetMyGames/sortがlatestVersionでもエラー無し
=== RUN   TestGetGameVersions/windowsのファイルが重複していた場合、fileIDが先のものが優先される
=== RUN   TestGetEditionPlayStats/GetEditionPlayStatsがエラーなのでエラー
=== RUN   TestGetGames/limitが設定されてもエラーなし
2025/10/31 21:55:48 error: failed to get user info: error
=== PAUSE TestGetEditionPlayStats/GetEditionPlayStatsがエラーなのでエラー
=== RUN   TestCreateGameVersion/動画に紐づくゲームが違うのでErrInvalidGameVideoID
=== RUN   TestGetEditionPlayStats/開始時刻と終了時刻が同じでも正常に取得できる
=== RUN   TestGetMyGames/limitが負なのでエラー
2025/10/31 21:55:48 error: duplicate file type windows(game_id=#,!5Ld6Sz, game_version_id=r_)CFhpm, game_file_id='&@ΎJ]ͷ)
=== RUN   TestGetMyGames/offsetだけが設定されているのでエラー
=== PAUSE TestGetEditionPlayStats/開始時刻と終了時刻が同じでも正常に取得できる
=== RUN   TestGetMyGames/sortが無効な値なのでエラー
=== RUN   TestGetGame/GetGameGenresByGameIDがエラーなのでエラー
=== RUN   TestGetGames/limitとoffsetが両方設定されてもエラーなし
=== RUN   TestGetEditionPlayStats/終了時刻が開始時刻より前なのでErrInvalidTimeRange
=== PAUSE TestGetEditionPlayStats/終了時刻が開始時刻より前なのでErrInvalidTimeRange
=== RUN   TestGetEditionPlayStats/期間が10年を超えるのでErrTimePeriodTooLong
=== PAUSE TestGetEditionPlayStats/期間が10年を超えるのでErrTimePeriodTooLong
=== RUN   TestGetMyGames/GetGamesByUserがエラーなのでエラー
=== RUN   TestCreateGame/特に問題ないのでエラーなし
=== RUN   TestGetEditionPlayStats/期間がちょうど10年なら正常に取得できる
=== PAUSE TestGetEditionPlayStats/期間がちょうど10年なら正常に取得できる
=== RUN   TestCreateGameVersion/GetGameFilesがエラーなのでエラー
=== RUN   TestGetGame/Genreが空でも問題ない
--- PASS: TestGetMyGames (0.01s)
    --- PASS: TestGetMyGames/getMeがエラーなのでエラー (0.00s)
    --- PASS: TestGetMyGames/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetMyGames/ゲームが存在しなくてもエラーなし (0.00s)
    --- PASS: TestGetMyGames/ゲームが複数でもエラーなし (0.00s)
    --- PASS: TestGetMyGames/limitが設定されてもエラーなし (0.00s)
    --- PASS: TestGetMyGames/limitとoffsetが両方設定されてもエラーなし (0.00s)
    --- PASS: TestGetMyGames/visibilityがあってもエラー無し (0.00s)
    --- PASS: TestGetMyGames/ジャンルの指定があってもエラー無し (0.00s)
    --- PASS: TestGetMyGames/gameNameの指定があってもエラー無し (0.00s)
    --- PASS: TestGetMyGames/sortがlatestVersionでもエラー無し (0.00s)
    --- PASS: TestGetMyGames/limitが負なのでエラー (0.00s)
    --- PASS: TestGetMyGames/offsetだけが設定されているのでエラー (0.00s)
    --- PASS: TestGetMyGames/sortが無効な値なのでエラー (0.00s)
    --- PASS: TestGetMyGames/GetGamesByUserがエラーなのでエラー (0.00s)
=== CONT  TestUpdateGame
=== RUN   TestUpdateGame/特に問題ないのでエラーなし
=== RUN   TestUpdateGame/nameの変更なしでもエラーなし
=== RUN   TestCreateGameVersion/ファイルが存在しないのでErrInvalidGameFileID
=== CONT  TestUpdatePlayLogEndTime
=== RUN   TestGetGames/ジャンルが複数あってもエラーなし
=== RUN   TestUpdatePlayLogEndTime/正常にプレイログが終了される
=== RUN   TestUpdateGame/descriptionの変更なしでもエラーなし
=== PAUSE TestUpdatePlayLogEndTime/正常にプレイログが終了される
=== RUN   TestGetGames/visibilityがあってもエラー無し
=== RUN   TestGetGameVersions/macのファイルが重複していた場合、fileIDが先のものが優先される
2025/10/31 21:55:48 error: duplicate file type mac(game_id=' |E#,Y0, game_version_id=T]qYI3lmձa, game_file_id=67DB,@bC<\)
=== RUN   TestCreateGameVersion/ファイルの種類が違うのでErrInvalidGameFileType
=== RUN   TestUpdatePlayLogEndTime/GetGamePlayLogがErrRecordNotFoundなのでErrInvalidPlayLogID
=== RUN   TestUpdateGame/visibilityの変更なしでもエラーなし
=== RUN   TestGetGameVersions/jarのファイルが重複していた場合、fileIDが先のものが優先される
2025/10/31 21:55:48 error: duplicate file type jar(game_id=hvFJ^uS, game_version_id=JF!XN	C{, game_file_id=0lsKũRu)
=== RUN   TestCreateGame/nameが空でもエラーなし
=== RUN   TestCreateGameVersion/CreateGameVersionがエラーなのでエラー
=== PAUSE TestUpdatePlayLogEndTime/GetGamePlayLogがErrRecordNotFoundなのでErrInvalidPlayLogID
=== RUN   TestCreateGame/descriptionが空でもエラーなし
=== RUN   TestUpdatePlayLogEndTime/GetGamePlayLogがエラーなのでエラー
=== RUN   TestGetGameVersions/ファイルが存在しない場合、エラーになる
=== RUN   TestGetGame/maintainerがいても問題ない
=== PAUSE TestUpdatePlayLogEndTime/GetGamePlayLogがエラーなのでエラー
2025/10/31 21:55:48 error: game file not found(game_id=>;fґ|HXe~{, game_version_id=R28Lybױ%, game_file_id=UD\1	vc)
--- PASS: TestGetGame (0.01s)
    --- PASS: TestGetGame/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGame/authSessionが無くても問題なし (0.00s)
    --- PASS: TestGetGame/ゲームが存在しないのでErrNoGame (0.00s)
    --- PASS: TestGetGame/GetGameがエラーなのでエラー (0.00s)
    --- PASS: TestGetGame/GetGameManagementRolesByGameIDがエラーなのでエラー (0.00s)
    --- PASS: TestGetGame/getActiveUsersがエラーなのでエラー (0.00s)
    --- PASS: TestGetGame/GetGameGenresByGameIDがエラーなのでエラー (0.00s)
    --- PASS: TestGetGame/Genreが空でも問題ない (0.00s)
    --- PASS: TestGetGame/maintainerがいても問題ない (0.00s)
=== RUN   TestUpdateGame/visibilityの変更なし(nil)でもエラーなし
=== CONT  TestGetGamePlayStats
=== RUN   TestCreateGameVersion/urlとfileが両方あっても問題なし
=== RUN   TestGetGamePlayStats/gameVersionIDなしで正常に統計が取得される
=== PAUSE TestGetGamePlayStats/gameVersionIDなしで正常に統計が取得される
=== RUN   TestCreateGame/ownersが複数いてもエラーなし
=== RUN   TestUpdateGame/変更なしでも問題なし
=== RUN   TestUpdateGame/ゲームが存在しないのでErrNoGame
=== RUN   TestCreateGameVersion/ファイルが複数あっても問題なし
=== RUN   TestGetGamePlayStats/gameVersionIDありで正常に統計が取得される
=== RUN   TestGetGameVersions/limitが0なのでErrInvalidLimit
=== RUN   TestUpdateGame/GetGameがエラーなのでエラー
=== RUN   TestCreateGame/ownersがいなくてもエラーなし
=== RUN   TestUpdateGame/UpdateGameがErrNoRecordUpdatedなのでエラー
=== RUN   TestCreateGameVersion/ファイルに紐づくゲームが違うのでエラー
=== RUN   TestUpdateGame/UpdateGameがエラーなのでエラー
=== PAUSE TestGetGamePlayStats/gameVersionIDありで正常に統計が取得される
=== RUN   TestUpdatePlayLogEndTime/終了時刻が開始時刻より前なのでErrInvalidEndTime
=== CONT  TestCreatePlayLog
--- PASS: TestUpdateGame (0.01s)
    --- PASS: TestUpdateGame/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestUpdateGame/nameの変更なしでもエラーなし (0.00s)
    --- PASS: TestUpdateGame/descriptionの変更なしでもエラーなし (0.00s)
    --- PASS: TestUpdateGame/visibilityの変更なしでもエラーなし (0.00s)
    --- PASS: TestUpdateGame/visibilityの変更なし(nil)でもエラーなし (0.00s)
    --- PASS: TestUpdateGame/変更なしでも問題なし (0.00s)
    --- PASS: TestUpdateGame/ゲームが存在しないのでErrNoGame (0.00s)
    --- PASS: TestUpdateGame/GetGameがエラーなのでエラー (0.00s)
    --- PASS: TestUpdateGame/UpdateGameがErrNoRecordUpdatedなのでエラー (0.00s)
    --- PASS: TestUpdateGame/UpdateGameがエラーなのでエラー (0.00s)
=== RUN   TestCreateGame/maintainersが複数いてもエラーなし
=== RUN   TestGetGameVersions/limitが存在してもエラーなし
=== RUN   TestCreateGameVersion/同名のバージョンが存在するのでエラー
=== RUN   TestGetGameVersions/offsetが存在してもエラーなし
=== RUN   TestCreatePlayLog/正常にプレイログが作成される
=== RUN   TestGetGames/ジャンルの指定があってもエラー無し
=== PAUSE TestUpdatePlayLogEndTime/終了時刻が開始時刻より前なのでErrInvalidEndTime
=== RUN   TestUpdatePlayLogEndTime/UpdateGamePlayLogEndTimeがエラーなのでエラー
=== PAUSE TestCreatePlayLog/正常にプレイログが作成される
=== RUN   TestGetGamePlayStats/GetGameがErrRecordNotFoundなのでErrInvalidGame
=== PAUSE TestGetGamePlayStats/GetGameがErrRecordNotFoundなのでErrInvalidGame
=== RUN   TestCreatePlayLog/GetEditionがErrRecordNotFoundなのでErrInvalidEdition
--- PASS: TestCreateGameVersion (0.05s)
    --- PASS: TestCreateGameVersion/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestCreateGameVersion/assetがwindowsでもエラーなし (0.00s)
    --- PASS: TestCreateGameVersion/assetがmacでもエラーなし (0.01s)
    --- PASS: TestCreateGameVersion/assetがjarでもエラーなし (0.00s)
    --- PASS: TestCreateGameVersion/Assetが空なのでErrNoAsset (0.00s)
    --- PASS: TestCreateGameVersion/ゲームが存在しないのでErrInvalidGameID (0.00s)
    --- PASS: TestCreateGameVersion/GetGameがエラーなのでエラー (0.00s)
    --- PASS: TestCreateGameVersion/画像が存在しないのでErrInvalidGameImageID (0.00s)
    --- PASS: TestCreateGameVersion/GetGameImageがエラーなのでエラー (0.00s)
    --- PASS: TestCreateGameVersion/画像に紐づくゲームが違うのでErrInvalidGameImageID (0.00s)
    --- PASS: TestCreateGameVersion/動画が存在しないのでErrInvalidGameVideoID (0.00s)
    --- PASS: TestCreateGameVersion/GetGameVideoがエラーなのでエラー (0.00s)
    --- PASS: TestCreateGameVersion/動画に紐づくゲームが違うのでErrInvalidGameVideoID (0.00s)
    --- PASS: TestCreateGameVersion/GetGameFilesがエラーなのでエラー (0.00s)
    --- PASS: TestCreateGameVersion/ファイルが存在しないのでErrInvalidGameFileID (0.00s)
    --- PASS: TestCreateGameVersion/ファイルの種類が違うのでErrInvalidGameFileType (0.00s)
    --- PASS: TestCreateGameVersion/CreateGameVersionがエラーなのでエラー (0.00s)
    --- PASS: TestCreateGameVersion/urlとfileが両方あっても問題なし (0.00s)
    --- PASS: TestCreateGameVersion/ファイルが複数あっても問題なし (0.00s)
    --- PASS: TestCreateGameVersion/ファイルに紐づくゲームが違うのでエラー (0.00s)
    --- PASS: TestCreateGameVersion/同名のバージョンが存在するのでエラー (0.00s)
=== PAUSE TestCreatePlayLog/GetEditionがErrRecordNotFoundなのでErrInvalidEdition
=== RUN   TestGetGamePlayStats/GetGameがエラーなのでエラー
=== RUN   TestGetGameVersions/GetGameVersionsがエラーなのでエラー
=== PAUSE TestGetGamePlayStats/GetGameがエラーなのでエラー
=== RUN   TestCreatePlayLog/GetEditionがエラーなのでエラー
=== CONT  Test_checkMacOSAppEntryPointValid
=== RUN   TestCreateGame/maintainersがいなくてもエラーなし
=== RUN   TestCreateGame/新しいジャンルが無くてもエラー無し
=== PAUSE TestUpdatePlayLogEndTime/UpdateGamePlayLogEndTimeがエラーなのでエラー
=== RUN   TestUpdatePlayLogEndTime/開始時刻と同じ時刻でも正常に終了できる
=== PAUSE TestUpdatePlayLogEndTime/開始時刻と同じ時刻でも正常に終了できる
=== PAUSE TestCreatePlayLog/GetEditionがエラーなのでエラー
=== RUN   TestUpdatePlayLogEndTime/プレイログがeditionIDとgameIDのペアに対応しない場合はErrInvalidPlayLogEditionGamePairエラー
=== RUN   TestCreatePlayLog/GetGameがErrRecordNotFoundなのでErrInvalidGame
=== PAUSE TestUpdatePlayLogEndTime/プレイログがeditionIDとgameIDのペアに対応しない場合はErrInvalidPlayLogEditionGamePairエラー
=== RUN   TestGetGameVersions/GetGameFilesがエラーなのでエラー
=== RUN   TestCreateGame/ジャンル名が重複しているのでエラー
=== RUN   Test_checkMacOSAppEntryPointValid/特に問題ないのでエラー無し
=== PAUSE TestCreatePlayLog/GetGameがErrRecordNotFoundなのでErrInvalidGame
=== RUN   TestCreatePlayLog/GetGameがエラーなのでエラー
=== RUN   TestGetGamePlayStats/GetGameVersionByIDがErrRecordNotFoundなのでErrInvalidGameVersion
=== CONT  TestGetGameImages
=== PAUSE TestGetGamePlayStats/GetGameVersionByIDがErrRecordNotFoundなのでErrInvalidGameVersion
=== PAUSE TestCreatePlayLog/GetGameがエラーなのでエラー
2025/10/31 21:55:48 duplicate game genre
=== PAUSE Test_checkMacOSAppEntryPointValid/特に問題ないのでエラー無し
=== RUN   TestGetGameImages/特に問題ないのでエラーなし
=== RUN   TestGetGameVersions/ファイルが重複していても問題なし
=== RUN   Test_checkMacOSAppEntryPointValid/entryPointが*.appでないのでfalse
=== PAUSE Test_checkMacOSAppEntryPointValid/entryPointが*.appでないのでfalse
=== RUN   TestGetGameImages/GetGameがErrRecordNotFoundなのでErrInvalidGameID
=== RUN   TestGetGameImages/GetGameがエラーなのでエラー
=== RUN   TestCreateGame/全て新しいジャンルでも問題なし
=== RUN   TestGetGameImages/画像がpngでもエラーなし
=== RUN   Test_checkMacOSAppEntryPointValid/Contentsフォルダが無いのでfalse
=== RUN   TestGetGameImages/画像がgifでもエラーなし
=== PAUSE Test_checkMacOSAppEntryPointValid/Contentsフォルダが無いのでfalse
=== RUN   TestGetGamePlayStats/GetGameVersionByIDがエラーなのでエラー
=== RUN   Test_checkMacOSAppEntryPointValid/MacOSフォルダが無いのでfalse
=== PAUSE TestGetGamePlayStats/GetGameVersionByIDがエラーなのでエラー
=== RUN   TestGetGames/ゲーム名の指定があってもエラー無し
=== RUN   TestGetGameImages/画像がなくてもエラーなし
=== RUN   TestGetGamePlayStats/GetGamePlayStatsがエラーなのでエラー
=== PAUSE TestGetGamePlayStats/GetGamePlayStatsがエラーなのでエラー
=== RUN   TestGetGamePlayStats/開始時刻と終了時刻が同じでも正常に取得できる
=== PAUSE TestGetGamePlayStats/開始時刻と終了時刻が同じでも正常に取得できる
=== RUN   TestGetGamePlayStats/終了時刻が開始時刻より前なのでErrInvalidTimeRange
=== PAUSE TestGetGamePlayStats/終了時刻が開始時刻より前なのでErrInvalidTimeRange
=== RUN   TestGetGamePlayStats/期間が10年を超えるのでErrTimePeriodTooLong
=== RUN   TestGetGameVersions/ファイルがwindows,mac,jarのいずれでもないファイルは無視される
=== RUN   TestCreatePlayLog/GetGameVersionByIDがErrRecordNotFoundなのでErrInvalidGameVersion
=== RUN   TestGetGames/sortがlatestVersionでもエラー無し
=== RUN   TestCreateGame/ownerとユーザーが同じなのでエラー
=== PAUSE Test_checkMacOSAppEntryPointValid/MacOSフォルダが無いのでfalse
=== RUN   Test_checkMacOSAppEntryPointValid/Info.plistが無いのでfalse
=== PAUSE Test_checkMacOSAppEntryPointValid/Info.plistが無いのでfalse
=== RUN   Test_checkMacOSAppEntryPointValid/エントリーポイントに該当するファイルが無いのでfalse
=== PAUSE Test_checkMacOSAppEntryPointValid/エントリーポイントに該当するファイルが無いのでfalse
=== RUN   Test_checkMacOSAppEntryPointValid/.appがフォルダでないのでfalse
=== PAUSE Test_checkMacOSAppEntryPointValid/.appがフォルダでないのでfalse
=== CONT  TestGetGameImage
=== RUN   TestGetGameImages/画像が複数でもエラーなし
=== RUN   TestGetGameImage/特に問題ないのでエラーなし
=== RUN   TestGetGameImage/GetGameがErrRecordNotFoundなのでErrInvalidGameID
=== RUN   TestGetGameImage/GetGameがエラーなのでエラー
=== RUN   TestGetGameImages/GetGameImagesがエラーなのでエラー
=== RUN   TestGetGameImage/画像がpngでもエラーなし
--- PASS: TestGetGameImages (0.01s)
    --- PASS: TestGetGameImages/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameImages/GetGameがErrRecordNotFoundなのでErrInvalidGameID (0.00s)
    --- PASS: TestGetGameImages/GetGameがエラーなのでエラー (0.00s)
    --- PASS: TestGetGameImages/画像がpngでもエラーなし (0.00s)
    --- PASS: TestGetGameImages/画像がgifでもエラーなし (0.00s)
    --- PASS: TestGetGameImages/画像がなくてもエラーなし (0.00s)
    --- PASS: TestGetGameImages/画像が複数でもエラーなし (0.00s)
    --- PASS: TestGetGameImages/GetGameImagesがエラーなのでエラー (0.00s)
=== CONT  TestUpdateGameGenre
=== RUN   TestUpdateGameGenre/GetGenreGamesがnilなので0件でエラー無し
=== RUN   TestGetGameImage/画像がgifでもエラーなし
=== PAUSE TestGetGamePlayStats/期間が10年を超えるのでErrTimePeriodTooLong
=== RUN   TestGetGamePlayStats/期間がちょうど10年なら正常に取得できる
=== PAUSE TestGetGamePlayStats/期間がちょうど10年なら正常に取得できる
=== RUN   TestUpdateGameGenre/GetGenreGamesが複数でもエラー無し
2025/10/31 21:55:48 invalid game file type: game_id=x	+EXn!/), game_version_id=3I.Rl/, game_file_id=gU[JW`5, file_type=100
=== RUN   TestGetGameImage/GetGameImageがErrRecordNotFoundなのでErrInvalidGameImageID
=== PAUSE TestCreatePlayLog/GetGameVersionByIDがErrRecordNotFoundなのでErrInvalidGameVersion
=== RUN   TestGetGameImage/ゲーム画像に紐づくゲームIDが違うのでErrInvalidGameImageID
--- PASS: TestGetGameVersions (0.06s)
    --- PASS: TestGetGameVersions/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameVersions/versionがなくてもエラーなし (0.00s)
    --- PASS: TestGetGameVersions/versionが複数でもエラーなし (0.00s)
    --- PASS: TestGetGameVersions/画像を共有していてもエラーなし (0.00s)
    --- PASS: TestGetGameVersions/動画を共有していてもエラーなし (0.00s)
    --- PASS: TestGetGameVersions/ファイルがwindowsでもエラーなし (0.00s)
    --- PASS: TestGetGameVersions/ファイルがmacでもエラーなし (0.00s)
    --- PASS: TestGetGameVersions/ファイルがjarでもエラーなし (0.00s)
    --- PASS: TestGetGameVersions/windowsのファイルが重複していた場合、fileIDが先のものが優先される (0.00s)
    --- PASS: TestGetGameVersions/macのファイルが重複していた場合、fileIDが先のものが優先される (0.00s)
    --- PASS: TestGetGameVersions/jarのファイルが重複していた場合、fileIDが先のものが優先される (0.00s)
    --- PASS: TestGetGameVersions/ファイルが存在しない場合、エラーになる (0.00s)
    --- PASS: TestGetGameVersions/limitが0なのでErrInvalidLimit (0.00s)
    --- PASS: TestGetGameVersions/limitが存在してもエラーなし (0.00s)
    --- PASS: TestGetGameVersions/offsetが存在してもエラーなし (0.00s)
    --- PASS: TestGetGameVersions/GetGameVersionsがエラーなのでエラー (0.00s)
    --- PASS: TestGetGameVersions/GetGameFilesがエラーなのでエラー (0.00s)
    --- PASS: TestGetGameVersions/ファイルが重複していても問題なし (0.00s)
    --- PASS: TestGetGameVersions/ファイルがwindows,mac,jarのいずれでもないファイルは無視される (0.00s)
=== RUN   TestUpdateGameGenre/GetGenreGamesがエラーなのでエラー
=== RUN   TestGetGameImage/GetGameImageがエラーなのでエラー
=== RUN   TestGetGames/limitが負なのでエラー
=== CONT  TestDeleteGameGenre
=== RUN   TestCreatePlayLog/GetGameVersionByIDがエラーなのでエラー
=== RUN   TestDeleteGameGenre/RemoveGameGenreがErrNoRecordDeletedなのでエラー
=== PAUSE TestCreatePlayLog/GetGameVersionByIDがエラーなのでエラー
=== CONT  TestSaveGameImage
=== RUN   TestSaveGameImage/特に問題ないのでエラーなし
=== RUN   TestDeleteGameGenre/RemoveGameGenreが他のエラーなのでエラー
=== RUN   TestDeleteGameGenre/特に問題ないのでエラー無し
=== RUN   TestUpdateGameGenre/値に変更が無いのでErrNoGameGenreUpdated
=== RUN   TestGetGameImage/GetTempURLがエラーなのでエラー
=== RUN   TestUpdateGameGenre/UpdateGameGenreがErrDuplicatedUniqueKeyなのでErrDuplicateGameGenre
--- PASS: TestGetGameImage (0.00s)
    --- PASS: TestGetGameImage/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameImage/GetGameがErrRecordNotFoundなのでErrInvalidGameID (0.00s)
    --- PASS: TestGetGameImage/GetGameがエラーなのでエラー (0.00s)
    --- PASS: TestGetGameImage/画像がpngでもエラーなし (0.00s)
    --- PASS: TestGetGameImage/画像がgifでもエラーなし (0.00s)
    --- PASS: TestGetGameImage/GetGameImageがErrRecordNotFoundなのでErrInvalidGameImageID (0.00s)
    --- PASS: TestGetGameImage/ゲーム画像に紐づくゲームIDが違うのでErrInvalidGameImageID (0.00s)
    --- PASS: TestGetGameImage/GetGameImageがエラーなのでエラー (0.00s)
    --- PASS: TestGetGameImage/GetTempURLがエラーなのでエラー (0.00s)
=== CONT  TestUpdateGameGenres
=== RUN   TestGetGames/offsetだけ設定されているのでエラー
=== RUN   TestUpdateGameGenre/UpdateGameGenreがErrNoRecordUpdatedなのでErrNoGameGenreUpdated
=== RUN   TestUpdateGameGenres/GetGameGenresWithNamesがErrRecordNotFoundでもエラー無し
=== RUN   TestGetGames/無効なsortなのでエラー
=== RUN   TestUpdateGameGenre/特に問題ないのでエラー無し
=== RUN   TestGetGames/GetGamesがエラーなのでエラー
=== CONT  TestGetGameGenres
=== RUN   TestUpdateGameGenres/GetGameGenresWithNamesがErrRecordNotFound以外のエラーなのでエラー
=== RUN   TestGetGameGenres/GetGameGenresがエラーなのでエラー
--- PASS: TestDeleteGameGenre (0.00s)
    --- PASS: TestDeleteGameGenre/RemoveGameGenreがErrNoRecordDeletedなのでエラー (0.00s)
    --- PASS: TestDeleteGameGenre/RemoveGameGenreが他のエラーなのでエラー (0.00s)
    --- PASS: TestDeleteGameGenre/特に問題ないのでエラー無し (0.00s)
=== RUN   TestUpdateGameGenre/GetGameGenreがErrRecordNotFoundなのでErrNoGameGenre
=== RUN   TestUpdateGameGenres/SaveGameGenresがErrDuplicatedUniqueKeyなのでエラー
=== RUN   TestCreatePlayLog/CreateGamePlayLogがエラーなのでエラー
=== PAUSE TestCreatePlayLog/CreateGamePlayLogがエラーなのでエラー
=== CONT  TestGetGameFileMeta
=== RUN   TestUpdateGameGenres/RegisterGenresToGameがErrRecordNotFoundなのでエラー
=== RUN   TestGetGameFileMeta/特に問題ないのでエラーなし
=== RUN   TestUpdateGameGenres/特に問題ないのでエラー無し
=== RUN   TestGetGameGenres/特に問題ないのでエラー無し
=== RUN   TestUpdateGameGenres/ジャンル名が重複しているのでエラー
--- PASS: TestGetGames (0.03s)
    --- PASS: TestGetGames/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGames/ゲームが存在しなくてもエラーなし (0.00s)
    --- PASS: TestGetGames/ゲームが複数でもエラーなし (0.00s)
    --- PASS: TestGetGames/limitが設定されてもエラーなし (0.00s)
    --- PASS: TestGetGames/limitとoffsetが両方設定されてもエラーなし (0.00s)
    --- PASS: TestGetGames/ジャンルが複数あってもエラーなし (0.00s)
    --- PASS: TestGetGames/visibilityがあってもエラー無し (0.00s)
    --- PASS: TestGetGames/ジャンルの指定があってもエラー無し (0.00s)
    --- PASS: TestGetGames/ゲーム名の指定があってもエラー無し (0.00s)
    --- PASS: TestGetGames/sortがlatestVersionでもエラー無し (0.00s)
    --- PASS: TestGetGames/limitが負なのでエラー (0.00s)
    --- PASS: TestGetGames/offsetだけ設定されているのでエラー (0.00s)
    --- PASS: TestGetGames/無効なsortなのでエラー (0.00s)
    --- PASS: TestGetGames/GetGamesがエラーなのでエラー (0.00s)
=== CONT  TestGetGameFile
=== RUN   TestGetGameFileMeta/GetGameがErrRecordNotFoundなのでErrInvalidGameID
=== RUN   TestUpdateGameGenres/全てが既存のジャンルでもエラー無し
=== RUN   TestUpdateGameGenres/SaveGameGenresが他のエラーなのでエラー
=== RUN   TestUpdateGameGenres/RegisterGenresToGameが他のエラーなのでエラー
--- PASS: TestUpdateGameGenres (0.00s)
    --- PASS: TestUpdateGameGenres/GetGameGenresWithNamesがErrRecordNotFoundでもエラー無し (0.00s)
    --- PASS: TestUpdateGameGenres/GetGameGenresWithNamesがErrRecordNotFound以外のエラーなのでエラー (0.00s)
    --- PASS: TestUpdateGameGenres/SaveGameGenresがErrDuplicatedUniqueKeyなのでエラー (0.00s)
    --- PASS: TestUpdateGameGenres/RegisterGenresToGameがErrRecordNotFoundなのでエラー (0.00s)
    --- PASS: TestUpdateGameGenres/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestUpdateGameGenres/ジャンル名が重複しているのでエラー (0.00s)
    --- PASS: TestUpdateGameGenres/全てが既存のジャンルでもエラー無し (0.00s)
    --- PASS: TestUpdateGameGenres/SaveGameGenresが他のエラーなのでエラー (0.00s)
    --- PASS: TestUpdateGameGenres/RegisterGenresToGameが他のエラーなのでエラー (0.00s)
=== CONT  TestSaveGameFile
=== RUN   TestGetGameFileMeta/GetGameがエラーなのでエラー
=== RUN   TestGetGameGenres/ログインしていてもエラー無し
=== RUN   TestGetGameFileMeta/windowdでもエラーなし
=== RUN   TestGetGameFileMeta/macでもエラーなし
=== RUN   TestGetGameFileMeta/GetGameFileがErrRecordNotFoundなのでErrInvalidGameFileID
=== RUN   TestGetGameFileMeta/ゲームファイルに紐づくゲームIDが違うのでErrInvalidGameFileID
=== RUN   TestGetGameFile/特に問題ないのでエラーなし
=== RUN   TestSaveGameFile/特に問題ないのでエラーなし
=== RUN   TestGetGameGenres/複数でもエラー無し
--- PASS: TestGetGameGenres (0.01s)
    --- PASS: TestGetGameGenres/GetGameGenresがエラーなのでエラー (0.00s)
    --- PASS: TestGetGameGenres/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestGetGameGenres/ログインしていてもエラー無し (0.00s)
    --- PASS: TestGetGameGenres/複数でもエラー無し (0.00s)
=== CONT  TestGetEditions
=== RUN   TestGetEditions/特に問題ないのでエラーなし
=== PAUSE TestGetEditions/特に問題ないのでエラーなし
=== RUN   TestGetGameFile/GetGameがErrRecordNotFoundなのでErrInvalidGameID
=== RUN   TestGetEditions/URLなしでもエラーなし
=== PAUSE TestGetEditions/URLなしでもエラーなし
=== RUN   TestGetEditions/対象が複数でもエラーなし
=== PAUSE TestGetEditions/対象が複数でもエラーなし
=== RUN   TestGetEditions/GetEditionsがエラーなのでエラー
=== PAUSE TestGetEditions/GetEditionsがエラーなのでエラー
=== CONT  Test_checkEntryPointExist
=== RUN   Test_checkEntryPointExist/特に問題ないのでエラーなし
=== PAUSE Test_checkEntryPointExist/特に問題ないのでエラーなし
=== RUN   TestGetGameFile/GetGameがエラーなのでエラー
=== RUN   Test_checkEntryPointExist/存在しないパスなのでfalse
=== RUN   TestUpdateGameGenre/GetGameGenreがエラーなのでエラー
=== RUN   TestSaveGameFile/ゲームが存在しないのでエラー
=== RUN   TestCreateGame/maintainerとユーザーが同じなのでエラー
=== RUN   TestCreateGame/ownersに同じ人が含まれているのでエラー
=== RUN   TestCreateGame/maintainersに同じ人が含まれているのでエラー
=== RUN   TestCreateGame/ownersとmaintainersに同じ人がいるのでエラー
=== RUN   TestGetGameFile/ファイルがwindowsでもエラーなし
=== RUN   TestCreateGame/ownersにactiveUserでない人が含まれるが問題なし
User 's9' is not an active user.=== RUN   TestCreateGame/maintainersにactiveUserでない人が含まれるが問題なし
User 's9' is not an active user.=== RUN   TestCreateGame/SaveGameがエラーなのでエラー
=== RUN   TestCreateGame/AddGameManagementRolesがownerの追加でエラーなのでエラー
=== RUN   TestGetGameFile/ファイルがmacでもエラーなし
=== RUN   TestCreateGame/AddGameManagementRolesがmaintainerの追加でエラーなのでエラー
=== RUN   TestCreateGame/GetGameGenresWithNamesがエラーなのでエラー
=== PAUSE Test_checkEntryPointExist/存在しないパスなのでfalse
=== RUN   Test_checkEntryPointExist/.で始まる相対パスはfalse
=== RUN   TestGetGameFileMeta/GetGameFileがエラーなのでエラー
=== RUN   TestCreateGame/SaveGameGenresがエラーなのでエラー
=== RUN   TestSaveGameFile/GetGameがエラーなのでエラー
=== RUN   TestCreateGame/SaveGameGenresがErrDuplicatedUniqueKeyなのでエラー
=== RUN   TestSaveGameFile/repositoryのSaveGameFileがエラーなのでエラー
=== RUN   TestUpdateGameGenre/UpdateGameGenreがエラーなのでエラー
=== PAUSE Test_checkEntryPointExist/.で始まる相対パスはfalse
=== RUN   TestCreateGame/RegisterGenresToGameがエラーなのでエラー
--- PASS: TestGetGameFileMeta (0.02s)
    --- PASS: TestGetGameFileMeta/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameFileMeta/GetGameがErrRecordNotFoundなのでErrInvalidGameID (0.00s)
    --- PASS: TestGetGameFileMeta/GetGameがエラーなのでエラー (0.00s)
    --- PASS: TestGetGameFileMeta/windowdでもエラーなし (0.00s)
    --- PASS: TestGetGameFileMeta/macでもエラーなし (0.00s)
    --- PASS: TestGetGameFileMeta/GetGameFileがErrRecordNotFoundなのでErrInvalidGameFileID (0.00s)
    --- PASS: TestGetGameFileMeta/ゲームファイルに紐づくゲームIDが違うのでErrInvalidGameFileID (0.00s)
    --- PASS: TestGetGameFileMeta/GetGameFileがエラーなのでエラー (0.00s)
=== CONT  TestGetGameFiles
=== RUN   TestGetGameFiles/特に問題ないのでエラーなし
=== RUN   TestCreateGame/RegisterGenresToGameがErrRecordNotFoundなのでエラー
=== RUN   Test_checkEntryPointExist/ディレクトリを指定しているのでfalse
=== PAUSE Test_checkEntryPointExist/ディレクトリを指定しているのでfalse
=== RUN   TestCreateGame/RegisterGenresToGameがErrIncludeInvalidArgsなのでエラー
=== RUN   TestGetGameFiles/GetGameがErrRecordNotFoundなのでErrInvalidGameID
--- PASS: TestCreateGame (0.04s)
    --- PASS: TestCreateGame/ユーザー情報の取得に失敗したのでエラー (0.00s)
    --- PASS: TestCreateGame/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestCreateGame/nameが空でもエラーなし (0.00s)
    --- PASS: TestCreateGame/descriptionが空でもエラーなし (0.00s)
    --- PASS: TestCreateGame/ownersが複数いてもエラーなし (0.00s)
    --- PASS: TestCreateGame/ownersがいなくてもエラーなし (0.00s)
    --- PASS: TestCreateGame/maintainersが複数いてもエラーなし (0.00s)
    --- PASS: TestCreateGame/maintainersがいなくてもエラーなし (0.00s)
    --- PASS: TestCreateGame/新しいジャンルが無くてもエラー無し (0.00s)
    --- PASS: TestCreateGame/ジャンル名が重複しているのでエラー (0.00s)
    --- PASS: TestCreateGame/全て新しいジャンルでも問題なし (0.00s)
    --- PASS: TestCreateGame/ownerとユーザーが同じなのでエラー (0.00s)
    --- PASS: TestCreateGame/maintainerとユーザーが同じなのでエラー (0.00s)
    --- PASS: TestCreateGame/ownersに同じ人が含まれているのでエラー (0.00s)
    --- PASS: TestCreateGame/maintainersに同じ人が含まれているのでエラー (0.00s)
    --- PASS: TestCreateGame/ownersとmaintainersに同じ人がいるのでエラー (0.00s)
    --- PASS: TestCreateGame/ownersにactiveUserでない人が含まれるが問題なし (0.00s)
    --- PASS: TestCreateGame/maintainersにactiveUserでない人が含まれるが問題なし (0.00s)
    --- PASS: TestCreateGame/SaveGameがエラーなのでエラー (0.00s)
    --- PASS: TestCreateGame/AddGameManagementRolesがownerの追加でエラーなのでエラー (0.00s)
    --- PASS: TestCreateGame/AddGameManagementRolesがmaintainerの追加でエラーなのでエラー (0.00s)
    --- PASS: TestCreateGame/GetGameGenresWithNamesがエラーなのでエラー (0.00s)
    --- PASS: TestCreateGame/SaveGameGenresがエラーなのでエラー (0.00s)
    --- PASS: TestCreateGame/SaveGameGenresがErrDuplicatedUniqueKeyなのでエラー (0.00s)
    --- PASS: TestCreateGame/RegisterGenresToGameがエラーなのでエラー (0.00s)
    --- PASS: TestCreateGame/RegisterGenresToGameがErrRecordNotFoundなのでエラー (0.00s)
    --- PASS: TestCreateGame/RegisterGenresToGameがErrIncludeInvalidArgsなのでエラー (0.00s)
=== CONT  TestUpdateEdition
=== RUN   TestUpdateEdition/特に問題ないのでエラーなし
--- PASS: TestUpdateGameGenre (0.02s)
    --- PASS: TestUpdateGameGenre/GetGenreGamesがnilなので0件でエラー無し (0.00s)
    --- PASS: TestUpdateGameGenre/GetGenreGamesが複数でもエラー無し (0.00s)
    --- PASS: TestUpdateGameGenre/GetGenreGamesがエラーなのでエラー (0.00s)
    --- PASS: TestUpdateGameGenre/値に変更が無いのでErrNoGameGenreUpdated (0.00s)
    --- PASS: TestUpdateGameGenre/UpdateGameGenreがErrDuplicatedUniqueKeyなのでErrDuplicateGameGenre (0.00s)
    --- PASS: TestUpdateGameGenre/UpdateGameGenreがErrNoRecordUpdatedなのでErrNoGameGenreUpdated (0.00s)
    --- PASS: TestUpdateGameGenre/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestUpdateGameGenre/GetGameGenreがErrRecordNotFoundなのでErrNoGameGenre (0.00s)
    --- PASS: TestUpdateGameGenre/GetGameGenreがエラーなのでエラー (0.00s)
    --- PASS: TestUpdateGameGenre/UpdateGameGenreがエラーなのでエラー (0.00s)
=== CONT  Test_checkZip
=== RUN   Test_checkZip/zipファイルではないのでfalse
=== RUN   Test_checkEntryPointExist/ファイルのzipでもエラー無し
=== RUN   TestGetGameFile/GetGameFileがErrRecordNotFoundなのでErrInvalidGameFileID
=== RUN   TestUpdateEdition/nameが変わらないがエラーなし
=== PAUSE Test_checkZip/zipファイルではないのでfalse
=== RUN   Test_checkZip/zipファイルなのでエラー無し
=== PAUSE Test_checkEntryPointExist/ファイルのzipでもエラー無し
=== RUN   TestGetGameFiles/GetGameがエラーなのでエラー
=== RUN   TestGetGameFile/ゲームファイルに紐づくゲームIDが違うのでErrInvalidGameFileID
=== RUN   TestGetGameFile/GetGameFileがエラーなのでエラー
=== RUN   TestGetGameFile/GetTempURLがエラーなのでエラー
=== PAUSE Test_checkZip/zipファイルなのでエラー無し
=== CONT  TestGetEdition
=== RUN   TestGetGameFiles/ファイルが無くてもエラーなし
=== RUN   TestUpdateEdition/nameが空文字列だがエラーなし
=== RUN   TestSaveGameFile/storageのSaveGameFileがエラーなのでエラー
=== RUN   TestUpdateEdition/URLの変更なしだがエラーなし
=== RUN   TestGetGameFile/ファイルが大きくてもエラーなし
=== RUN   TestGetGameFiles/ファイルが複数でもエラーなし
=== RUN   TestUpdateEdition/URLなし->ありだがエラーなし
=== CONT  TestGetAdmins
=== RUN   TestGetEdition/特に問題ないのでエラーなし
=== RUN   TestGetAdmins/特に問題ないのでエラー無し
=== RUN   TestGetAdmins/全ユーザーの取得に失敗したのでエラー
=== RUN   TestUpdateEdition/URLあり->なしだがエラーなし
=== PAUSE TestGetEdition/特に問題ないのでエラーなし
=== RUN   TestGetEdition/URLなしでもエラーなし
=== PAUSE TestGetEdition/URLなしでもエラーなし
=== RUN   TestGetEdition/GetEditionでErrRecordNotFoundなのでエラー
--- PASS: TestGetGameFile (0.02s)
    --- PASS: TestGetGameFile/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameFile/GetGameがErrRecordNotFoundなのでErrInvalidGameID (0.00s)
    --- PASS: TestGetGameFile/GetGameがエラーなのでエラー (0.00s)
    --- PASS: TestGetGameFile/ファイルがwindowsでもエラーなし (0.00s)
    --- PASS: TestGetGameFile/ファイルがmacでもエラーなし (0.00s)
    --- PASS: TestGetGameFile/GetGameFileがErrRecordNotFoundなのでErrInvalidGameFileID (0.00s)
    --- PASS: TestGetGameFile/ゲームファイルに紐づくゲームIDが違うのでErrInvalidGameFileID (0.00s)
    --- PASS: TestGetGameFile/GetGameFileがエラーなのでエラー (0.00s)
    --- PASS: TestGetGameFile/GetTempURLがエラーなのでエラー (0.00s)
    --- PASS: TestGetGameFile/ファイルが大きくてもエラーなし (0.00s)
=== CONT  TestAdminAuthorize
=== RUN   TestAdminAuthorize/特に問題ないのでエラー無し
2025/10/31 21:55:48 error: failed to get user info: test
=== RUN   TestGetGameFiles/ファイルがjarでもエラーなし
=== RUN   TestSaveGameFile/fileTypeがwindowsでもエラーなし
=== RUN   TestUpdateEdition/GetEditionでErrRecordNotFoundなのでエラー
=== PAUSE TestGetEdition/GetEditionでErrRecordNotFoundなのでエラー
=== RUN   TestAdminAuthorize/sessionが期限切れなのでErrOIDCSessionExpired
=== RUN   TestGetAdmins/GetAdminsがエラーなのでエラー
=== RUN   TestGetGameFiles/ファイルがmacでもエラーなし
=== RUN   TestUpdateEdition/GetEditionでその他のエラーなのでエラー
=== RUN   TestGetEdition/GetEditionでその他のエラーなのでエラー
=== RUN   TestGetGameFiles/GetGameFilesがエラーなのでエラー
--- PASS: TestGetGameFiles (0.01s)
    --- PASS: TestGetGameFiles/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetGameFiles/GetGameがErrRecordNotFoundなのでErrInvalidGameID (0.00s)
    --- PASS: TestGetGameFiles/GetGameがエラーなのでエラー (0.00s)
    --- PASS: TestGetGameFiles/ファイルが無くてもエラーなし (0.00s)
    --- PASS: TestGetGameFiles/ファイルが複数でもエラーなし (0.00s)
    --- PASS: TestGetGameFiles/ファイルがjarでもエラーなし (0.00s)
    --- PASS: TestGetGameFiles/ファイルがmacでもエラーなし (0.00s)
    --- PASS: TestGetGameFiles/GetGameFilesがエラーなのでエラー (0.00s)
=== CONT  TestCreateEdition
=== RUN   TestCreateEdition/特に問題ないのでエラーなし
=== PAUSE TestCreateEdition/特に問題ないのでエラーなし
=== RUN   TestCreateEdition/URLなしだがエラーなし
=== RUN   TestSaveGameFile/fileTypeがmacでもエラーなし
=== RUN   TestAdminAuthorize/getMeがエラーなのでエラー
2025/10/31 21:55:48 error: failed to get user info: test
=== RUN   TestAdminAuthorize/GetAdminsがエラーなのでエラー
=== RUN   TestAdminAuthorize/ユーザーがadminではないのでErrForbidden
=== RUN   TestUpdateEdition/UpdateEditionでエラーなのでエラー
=== PAUSE TestCreateEdition/URLなしだがエラーなし
=== RUN   TestCreateEdition/gameVersionIDsの要素が複数だがエラーなし
--- PASS: TestAdminAuthorize (0.01s)
    --- PASS: TestAdminAuthorize/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestAdminAuthorize/sessionが期限切れなのでErrOIDCSessionExpired (0.00s)
    --- PASS: TestAdminAuthorize/getMeがエラーなのでエラー (0.00s)
    --- PASS: TestAdminAuthorize/GetAdminsがエラーなのでエラー (0.00s)
    --- PASS: TestAdminAuthorize/ユーザーがadminではないのでErrForbidden (0.00s)
=== CONT  TestDeleteAdmin
=== RUN   TestDeleteAdmin/特に問題ないのでエラー無し
=== CONT  TestGetEditionPlayStats/正常にエディション統計が取得される
--- PASS: TestGetAdmins (0.01s)
    --- PASS: TestGetAdmins/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestGetAdmins/全ユーザーの取得に失敗したのでエラー (0.00s)
    --- PASS: TestGetAdmins/GetAdminsがエラーなのでエラー (0.00s)
=== CONT  TestGetEditionPlayStats/GetEditionPlayStatsがエラーなのでエラー
--- PASS: TestUpdateEdition (0.02s)
    --- PASS: TestUpdateEdition/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestUpdateEdition/nameが変わらないがエラーなし (0.00s)
    --- PASS: TestUpdateEdition/nameが空文字列だがエラーなし (0.00s)
    --- PASS: TestUpdateEdition/URLの変更なしだがエラーなし (0.00s)
    --- PASS: TestUpdateEdition/URLなし->ありだがエラーなし (0.00s)
    --- PASS: TestUpdateEdition/URLあり->なしだがエラーなし (0.00s)
    --- PASS: TestUpdateEdition/GetEditionでErrRecordNotFoundなのでエラー (0.00s)
    --- PASS: TestUpdateEdition/GetEditionでその他のエラーなのでエラー (0.00s)
    --- PASS: TestUpdateEdition/UpdateEditionでエラーなのでエラー (0.00s)
=== CONT  TestGetEditionPlayStats/期間がちょうど10年なら正常に取得できる
=== CONT  TestGetEditionPlayStats/終了時刻が開始時刻より前なのでErrInvalidTimeRange
=== CONT  TestGetEditionPlayStats/開始時刻と終了時刻が同じでも正常に取得できる
=== PAUSE TestCreateEdition/gameVersionIDsの要素が複数だがエラーなし
=== CONT  TestGetEditionPlayStats/GetEditionがErrRecordNotFoundなのでErrInvalidEdition
=== RUN   TestCreateEdition/gameVersionIDsが空だがエラーなし
=== PAUSE TestCreateEdition/gameVersionIDsが空だがエラーなし
=== RUN   TestCreateEdition/GetGameVersionsByIDsがエラーなのでエラー
=== PAUSE TestCreateEdition/GetGameVersionsByIDsがエラーなのでエラー
=== RUN   TestDeleteAdmin/getMeがエラーなのでエラー
2025/10/31 21:55:48 error: failed to get user info: test
=== CONT  TestGetEditionPlayStats/期間が10年を超えるのでErrTimePeriodTooLong
=== CONT  TestUpdatePlayLogEndTime/UpdateGamePlayLogEndTimeがエラーなのでエラー
=== RUN   TestCreateEdition/gameVersionsの数が違うのでエラー
=== CONT  TestGetEditionPlayStats/GetEditionがエラーなのでエラー
--- PASS: TestGetEditionPlayStats (0.01s)
    --- PASS: TestGetEditionPlayStats/正常にエディション統計が取得される (0.00s)
    --- PASS: TestGetEditionPlayStats/期間がちょうど10年なら正常に取得できる (0.00s)
    --- PASS: TestGetEditionPlayStats/終了時刻が開始時刻より前なのでErrInvalidTimeRange (0.00s)
    --- PASS: TestGetEditionPlayStats/開始時刻と終了時刻が同じでも正常に取得できる (0.00s)
    --- PASS: TestGetEditionPlayStats/GetEditionがErrRecordNotFoundなのでErrInvalidEdition (0.00s)
    --- PASS: TestGetEditionPlayStats/GetEditionPlayStatsがエラーなのでエラー (0.00s)
    --- PASS: TestGetEditionPlayStats/期間が10年を超えるのでErrTimePeriodTooLong (0.00s)
    --- PASS: TestGetEditionPlayStats/GetEditionがエラーなのでエラー (0.00s)
=== RUN   TestDeleteAdmin/自分を削除しようとしているのでErrCannotDeleteMeFromAdmins
=== RUN   TestDeleteAdmin/getActiveUsersがエラーなのでエラー
=== PAUSE TestCreateEdition/gameVersionsの数が違うのでエラー
=== RUN   TestCreateEdition/_SaveEditionでエラーなのでエラー
=== CONT  TestUpdatePlayLogEndTime/プレイログがeditionIDとgameIDのペアに対応しない場合はErrInvalidPlayLogEditionGamePairエラー
=== PAUSE TestGetEdition/GetEditionでその他のエラーなのでエラー
=== CONT  TestUpdatePlayLogEndTime/開始時刻と同じ時刻でも正常に終了できる
2025/10/31 21:55:48 error: failed to get user info: test
=== PAUSE TestCreateEdition/_SaveEditionでエラーなのでエラー
=== CONT  TestUpdatePlayLogEndTime/GetGamePlayLogがエラーなのでエラー
=== CONT  TestUpdatePlayLogEndTime/終了時刻が開始時刻より前なのでErrInvalidEndTime
=== CONT  TestUpdatePlayLogEndTime/正常にプレイログが終了される
=== RUN   TestDeleteAdmin/ユーザーが存在しないのでErrInvalidUserID
=== CONT  Test_checkMacOSAppEntryPointValid/entryPointが*.appでないのでfalse
=== RUN   TestDeleteAdmin/DeleteAdminがErrNoRecordDeletedなのでErrNotAdmin
=== CONT  Test_checkMacOSAppEntryPointValid/.appがフォルダでないのでfalse
=== CONT  Test_checkMacOSAppEntryPointValid/Info.plistが無いのでfalse
=== RUN   TestCreateEdition/__UpdateEditionGameVersionsでエラーなのでエラー
=== PAUSE TestCreateEdition/__UpdateEditionGameVersionsでエラーなのでエラー
=== CONT  Test_checkMacOSAppEntryPointValid/エントリーポイントに該当するファイルが無いのでfalse
=== RUN   TestDeleteAdmin/DeleteAdminがエラーなのでエラー
=== CONT  TestUpdatePlayLogEndTime/GetGamePlayLogがErrRecordNotFoundなのでErrInvalidPlayLogID
=== CONT  Test_checkMacOSAppEntryPointValid/Contentsフォルダが無いのでfalse
=== CONT  TestGetGamePlayStats/gameVersionIDなしで正常に統計が取得される
=== CONT  TestGetGamePlayStats/GetGameがエラーなのでエラー
=== CONT  TestGetGamePlayStats/期間がちょうど10年なら正常に取得できる
=== RUN   TestDeleteAdmin/GetAdminsがエラーなのでエラー
=== CONT  TestGetGamePlayStats/終了時刻が開始時刻より前なのでErrInvalidTimeRange
=== CONT  Test_checkMacOSAppEntryPointValid/MacOSフォルダが無いのでfalse
=== CONT  TestGetGamePlayStats/開始時刻と終了時刻が同じでも正常に取得できる
=== CONT  TestGetGamePlayStats/GetGameVersionByIDがエラーなのでエラー
=== CONT  TestGetGamePlayStats/期間が10年を超えるのでErrTimePeriodTooLong
=== CONT  TestGetGamePlayStats/GetGamePlayStatsがエラーなのでエラー
=== CONT  TestGetGamePlayStats/GetGameVersionByIDがErrRecordNotFoundなのでErrInvalidGameVersion
=== CONT  TestGetGamePlayStats/GetGameがErrRecordNotFoundなのでErrInvalidGame
=== CONT  TestGetGamePlayStats/gameVersionIDありで正常に統計が取得される
=== CONT  TestCreatePlayLog/GetEditionがErrRecordNotFoundなのでErrInvalidEdition
--- PASS: TestGetGamePlayStats (0.01s)
    --- PASS: TestGetGamePlayStats/gameVersionIDなしで正常に統計が取得される (0.00s)
    --- PASS: TestGetGamePlayStats/GetGameがエラーなのでエラー (0.00s)
    --- PASS: TestGetGamePlayStats/期間がちょうど10年なら正常に取得できる (0.00s)
    --- PASS: TestGetGamePlayStats/終了時刻が開始時刻より前なのでErrInvalidTimeRange (0.00s)
    --- PASS: TestGetGamePlayStats/開始時刻と終了時刻が同じでも正常に取得できる (0.00s)
    --- PASS: TestGetGamePlayStats/期間が10年を超えるのでErrTimePeriodTooLong (0.00s)
    --- PASS: TestGetGamePlayStats/GetGameVersionByIDがエラーなのでエラー (0.00s)
    --- PASS: TestGetGamePlayStats/GetGamePlayStatsがエラーなのでエラー (0.00s)
    --- PASS: TestGetGamePlayStats/GetGameVersionByIDがErrRecordNotFoundなのでErrInvalidGameVersion (0.00s)
    --- PASS: TestGetGamePlayStats/GetGameがErrRecordNotFoundなのでErrInvalidGame (0.00s)
    --- PASS: TestGetGamePlayStats/gameVersionIDありで正常に統計が取得される (0.00s)
=== CONT  TestCreatePlayLog/GetGameVersionByIDがエラーなのでエラー
=== CONT  TestCreatePlayLog/GetGameVersionByIDがErrRecordNotFoundなのでErrInvalidGameVersion
=== CONT  TestCreatePlayLog/GetEditionがエラーなのでエラー
=== CONT  TestCreatePlayLog/GetGameがエラーなのでエラー
=== CONT  TestCreatePlayLog/GetGameがErrRecordNotFoundなのでErrInvalidGame
=== CONT  TestCreatePlayLog/正常にプレイログが作成される
=== CONT  TestGetEditions/特に問題ないのでエラーなし
--- PASS: TestDeleteAdmin (0.01s)
    --- PASS: TestDeleteAdmin/特に問題ないのでエラー無し (0.00s)
    --- PASS: TestDeleteAdmin/getMeがエラーなのでエラー (0.00s)
    --- PASS: TestDeleteAdmin/自分を削除しようとしているのでErrCannotDeleteMeFromAdmins (0.00s)
    --- PASS: TestDeleteAdmin/getActiveUsersがエラーなのでエラー (0.00s)
    --- PASS: TestDeleteAdmin/ユーザーが存在しないのでErrInvalidUserID (0.00s)
    --- PASS: TestDeleteAdmin/DeleteAdminがErrNoRecordDeletedなのでErrNotAdmin (0.00s)
    --- PASS: TestDeleteAdmin/DeleteAdminがエラーなのでエラー (0.00s)
    --- PASS: TestDeleteAdmin/GetAdminsがエラーなのでエラー (0.00s)
=== CONT  TestGetEditions/対象が複数でもエラーなし
--- PASS: TestUpdatePlayLogEndTime (0.01s)
    --- PASS: TestUpdatePlayLogEndTime/プレイログがeditionIDとgameIDのペアに対応しない場合はErrInvalidPlayLogEditionGamePairエラー (0.00s)
    --- PASS: TestUpdatePlayLogEndTime/開始時刻と同じ時刻でも正常に終了できる (0.00s)
    --- PASS: TestUpdatePlayLogEndTime/GetGamePlayLogがエラーなのでエラー (0.00s)
    --- PASS: TestUpdatePlayLogEndTime/UpdateGamePlayLogEndTimeがエラーなのでエラー (0.00s)
    --- PASS: TestUpdatePlayLogEndTime/終了時刻が開始時刻より前なのでErrInvalidEndTime (0.00s)
    --- PASS: TestUpdatePlayLogEndTime/正常にプレイログが終了される (0.00s)
    --- PASS: TestUpdatePlayLogEndTime/GetGamePlayLogがErrRecordNotFoundなのでErrInvalidPlayLogID (0.00s)
=== CONT  TestCreatePlayLog/CreateGamePlayLogがエラーなのでエラー
=== CONT  Test_checkEntryPointExist/ディレクトリを指定しているのでfalse
=== CONT  TestGetEditions/GetEditionsがエラーなのでエラー
=== CONT  Test_checkMacOSAppEntryPointValid/特に問題ないのでエラー無し
=== CONT  Test_checkEntryPointExist/.で始まる相対パスはfalse
=== CONT  Test_checkEntryPointExist/特に問題ないのでエラーなし
=== CONT  TestGetEditions/URLなしでもエラーなし
=== CONT  Test_checkEntryPointExist/存在しないパスなのでfalse
=== CONT  Test_checkEntryPointExist/ファイルのzipでもエラー無し
=== CONT  Test_checkZip/zipファイルなのでエラー無し
=== CONT  Test_checkZip/zipファイルではないのでfalse
=== CONT  TestGetEdition/特に問題ないのでエラーなし
=== CONT  TestGetEdition/GetEditionでその他のエラーなのでエラー
=== CONT  TestGetEdition/GetEditionでErrRecordNotFoundなのでエラー
=== RUN   TestSaveGameFile/entryPointが空なので、ErrInvalidEntryPoint
=== CONT  TestCreateEdition/特に問題ないのでエラーなし
--- PASS: Test_checkZip (0.00s)
    --- PASS: Test_checkZip/zipファイルなのでエラー無し (0.00s)
    --- PASS: Test_checkZip/zipファイルではないのでfalse (0.00s)
=== CONT  TestCreateEdition/_SaveEditionでエラーなのでエラー
--- PASS: TestCreatePlayLog (0.02s)
    --- PASS: TestCreatePlayLog/GetGameVersionByIDがエラーなのでエラー (0.00s)
    --- PASS: TestCreatePlayLog/GetEditionがErrRecordNotFoundなのでErrInvalidEdition (0.00s)
    --- PASS: TestCreatePlayLog/GetGameVersionByIDがErrRecordNotFoundなのでErrInvalidGameVersion (0.00s)
    --- PASS: TestCreatePlayLog/GetEditionがエラーなのでエラー (0.00s)
    --- PASS: TestCreatePlayLog/GetGameがエラーなのでエラー (0.00s)
    --- PASS: TestCreatePlayLog/GetGameがErrRecordNotFoundなのでErrInvalidGame (0.00s)
    --- PASS: TestCreatePlayLog/正常にプレイログが作成される (0.00s)
    --- PASS: TestCreatePlayLog/CreateGamePlayLogがエラーなのでエラー (0.00s)
--- PASS: Test_checkMacOSAppEntryPointValid (0.02s)
    --- PASS: Test_checkMacOSAppEntryPointValid/entryPointが*.appでないのでfalse (0.00s)
    --- PASS: Test_checkMacOSAppEntryPointValid/.appがフォルダでないのでfalse (0.00s)
    --- PASS: Test_checkMacOSAppEntryPointValid/Info.plistが無いのでfalse (0.00s)
    --- PASS: Test_checkMacOSAppEntryPointValid/エントリーポイントに該当するファイルが無いのでfalse (0.00s)
    --- PASS: Test_checkMacOSAppEntryPointValid/Contentsフォルダが無いのでfalse (0.00s)
    --- PASS: Test_checkMacOSAppEntryPointValid/MacOSフォルダが無いのでfalse (0.00s)
    --- PASS: Test_checkMacOSAppEntryPointValid/特に問題ないのでエラー無し (0.00s)
=== RUN   TestSaveGameImage/GetGameがErrRecordNotFoundなのでErrInvalidGameID
=== CONT  TestCreateEdition/gameVersionsの数が違うのでエラー
--- PASS: TestGetEditions (0.00s)
    --- PASS: TestGetEditions/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetEditions/GetEditionsがエラーなのでエラー (0.00s)
    --- PASS: TestGetEditions/対象が複数でもエラーなし (0.00s)
    --- PASS: TestGetEditions/URLなしでもエラーなし (0.00s)
=== CONT  TestCreateEdition/__UpdateEditionGameVersionsでエラーなのでエラー
=== CONT  TestGetEdition/URLなしでもエラーなし
=== CONT  TestCreateEdition/gameVersionIDsが空だがエラーなし
--- PASS: TestGetEdition (0.02s)
    --- PASS: TestGetEdition/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestGetEdition/GetEditionでその他のエラーなのでエラー (0.00s)
    --- PASS: TestGetEdition/GetEditionでErrRecordNotFoundなのでエラー (0.00s)
    --- PASS: TestGetEdition/URLなしでもエラーなし (0.00s)
=== CONT  TestCreateEdition/GetGameVersionsByIDsがエラーなのでエラー
--- PASS: Test_checkEntryPointExist (0.01s)
    --- PASS: Test_checkEntryPointExist/ディレクトリを指定しているのでfalse (0.00s)
    --- PASS: Test_checkEntryPointExist/ファイルのzipでもエラー無し (0.00s)
    --- PASS: Test_checkEntryPointExist/.で始まる相対パスはfalse (0.00s)
    --- PASS: Test_checkEntryPointExist/特に問題ないのでエラーなし (0.00s)
    --- PASS: Test_checkEntryPointExist/存在しないパスなのでfalse (0.00s)
=== CONT  TestCreateEdition/gameVersionIDsの要素が複数だがエラーなし
=== CONT  TestCreateEdition/URLなしだがエラーなし
=== RUN   TestSaveGameImage/GetGameがエラーなのでエラー
=== RUN   TestSaveGameFile/無効なentryPointなので、ErrInvalidEntryPoint
=== RUN   TestSaveGameImage/画像がpngでもエラーなし
=== RUN   TestSaveGameFile/zipではないので、ErrNotZipFile
--- PASS: TestSaveGameFile (0.05s)
    --- PASS: TestSaveGameFile/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestSaveGameFile/ゲームが存在しないのでエラー (0.00s)
    --- PASS: TestSaveGameFile/GetGameがエラーなのでエラー (0.00s)
    --- PASS: TestSaveGameFile/repositoryのSaveGameFileがエラーなのでエラー (0.00s)
    --- PASS: TestSaveGameFile/storageのSaveGameFileがエラーなのでエラー (0.00s)
    --- PASS: TestSaveGameFile/fileTypeがwindowsでもエラーなし (0.00s)
    --- PASS: TestSaveGameFile/fileTypeがmacでもエラーなし (0.02s)
    --- PASS: TestSaveGameFile/entryPointが空なので、ErrInvalidEntryPoint (0.01s)
    --- PASS: TestSaveGameFile/無効なentryPointなので、ErrInvalidEntryPoint (0.00s)
    --- PASS: TestSaveGameFile/zipではないので、ErrNotZipFile (0.00s)
=== RUN   TestSaveGameImage/画像がgifでもエラーなし
--- PASS: TestCreateEdition (0.01s)
    --- PASS: TestCreateEdition/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestCreateEdition/gameVersionsの数が違うのでエラー (0.00s)
    --- PASS: TestCreateEdition/__UpdateEditionGameVersionsでエラーなのでエラー (0.00s)
    --- PASS: TestCreateEdition/GetGameVersionsByIDsがエラーなのでエラー (0.00s)
    --- PASS: TestCreateEdition/gameVersionIDsの要素が複数だがエラーなし (0.00s)
    --- PASS: TestCreateEdition/gameVersionIDsが空だがエラーなし (0.00s)
    --- PASS: TestCreateEdition/URLなしだがエラーなし (0.00s)
    --- PASS: TestCreateEdition/_SaveEditionでエラーなのでエラー (0.00s)
=== RUN   TestSaveGameImage/画像が不正なのでエラー
=== RUN   TestSaveGameImage/repository.SaveGameImageがエラーなのでエラー
=== RUN   TestSaveGameImage/storage.SaveGameImageがエラーなのでエラー
--- PASS: TestSaveGameImage (0.07s)
    --- PASS: TestSaveGameImage/特に問題ないのでエラーなし (0.04s)
    --- PASS: TestSaveGameImage/GetGameがErrRecordNotFoundなのでErrInvalidGameID (0.00s)
    --- PASS: TestSaveGameImage/GetGameがエラーなのでエラー (0.00s)
    --- PASS: TestSaveGameImage/画像がpngでもエラーなし (0.00s)
    --- PASS: TestSaveGameImage/画像がgifでもエラーなし (0.01s)
    --- PASS: TestSaveGameImage/画像が不正なのでエラー (0.00s)
    --- PASS: TestSaveGameImage/repository.SaveGameImageがエラーなのでエラー (0.00s)
    --- PASS: TestSaveGameImage/storage.SaveGameImageがエラーなのでエラー (0.00s)
=== RUN   TestSaveGameVideo/m4vでも問題なし
=== RUN   TestSaveGameVideo/mkvでも問題なし
=== RUN   TestSaveGameVideo/GetGameがErrRecordNotFoundなのでErrInvalidGameID
=== RUN   TestSaveGameVideo/GetGameがエラーなのでエラー
=== RUN   TestSaveGameVideo/動画が不正なのでエラー
=== RUN   TestSaveGameVideo/repository.SaveGameVideoがエラーなのでエラー
=== RUN   TestSaveGameVideo/storage.SaveGameVideoがエラーなのでエラー
--- PASS: TestSaveGameVideo (1.86s)
    --- PASS: TestSaveGameVideo/特に問題ないのでエラーなし (0.25s)
    --- PASS: TestSaveGameVideo/m4vでも問題なし (0.66s)
    --- PASS: TestSaveGameVideo/mkvでも問題なし (0.50s)
    --- PASS: TestSaveGameVideo/GetGameがErrRecordNotFoundなのでErrInvalidGameID (0.02s)
    --- PASS: TestSaveGameVideo/GetGameがエラーなのでエラー (0.03s)
    --- PASS: TestSaveGameVideo/動画が不正なのでエラー (0.00s)
    --- PASS: TestSaveGameVideo/repository.SaveGameVideoがエラーなのでエラー (0.26s)
    --- PASS: TestSaveGameVideo/storage.SaveGameVideoがエラーなのでエラー (0.12s)
PASS
ok  	github.com/traPtitech/trap-collection-server/src/service/v2	(cached)
?   	github.com/traPtitech/trap-collection-server/src/storage	[no test files]
=== RUN   TestSetupDirectory
=== PAUSE TestSetupDirectory
=== RUN   TestSaveGameFile
=== PAUSE TestSaveGameFile
=== RUN   TestSaveGameImage
=== PAUSE TestSaveGameImage
=== RUN   TestSaveGameVideo
=== PAUSE TestSaveGameVideo
=== CONT  TestSaveGameImage
=== CONT  TestSaveGameFile
=== CONT  TestSetupDirectory
=== RUN   TestSaveGameImage/ファイルが存在しないので保存できる
=== CONT  TestSaveGameVideo
=== RUN   TestSaveGameFile/ファイルが存在しないので保存できる
=== RUN   TestSetupDirectory/ディレクトリがなくてもディレクトリを作成する
=== RUN   TestSaveGameFile/ファイルが存在するので保存できない
=== RUN   TestSaveGameImage/ファイルが存在するので保存できない
=== RUN   TestSaveGameVideo/ファイルが存在しないので保存できる
=== RUN   TestSetupDirectory/ディレクトリがあるので何もしない
=== RUN   TestSetupDirectory/ファイルがあるのでエラー
--- PASS: TestSaveGameFile (0.00s)
    --- PASS: TestSaveGameFile/ファイルが存在しないので保存できる (0.00s)
    --- PASS: TestSaveGameFile/ファイルが存在するので保存できない (0.00s)
=== RUN   TestSetupDirectory/ディレクトリ内にファイルがあっても壊れない
--- PASS: TestSaveGameImage (0.00s)
    --- PASS: TestSaveGameImage/ファイルが存在しないので保存できる (0.00s)
    --- PASS: TestSaveGameImage/ファイルが存在するので保存できない (0.00s)
--- PASS: TestSetupDirectory (0.00s)
    --- PASS: TestSetupDirectory/ディレクトリがなくてもディレクトリを作成する (0.00s)
    --- PASS: TestSetupDirectory/ディレクトリがあるので何もしない (0.00s)
    --- PASS: TestSetupDirectory/ファイルがあるのでエラー (0.00s)
    --- PASS: TestSetupDirectory/ディレクトリ内にファイルがあっても壊れない (0.00s)
=== RUN   TestSaveGameVideo/ファイルが存在するので保存できない
--- PASS: TestSaveGameVideo (0.04s)
    --- PASS: TestSaveGameVideo/ファイルが存在しないので保存できる (0.03s)
    --- PASS: TestSaveGameVideo/ファイルが存在するので保存できない (0.01s)
PASS
ok  	github.com/traPtitech/trap-collection-server/src/storage/local	(cached)
?   	github.com/traPtitech/trap-collection-server/src/storage/mock	[no test files]
=== RUN   TestSaveFile
=== RUN   TestSaveFile/特に問題ないので保存できる
SDK 2025/10/31 21:56:02 WARN Response has no supported checksum. Not validating response payload.
=== RUN   TestSaveFile/ファイルが既に存在するのでErrAlreadyExists
=== RUN   TestSaveFile/hashが設定されていても保存できる
SDK 2025/10/31 21:56:02 WARN Response has no supported checksum. Not validating response payload.
=== RUN   TestSaveFile/サイズが大きくても保存できる
SDK 2025/10/31 21:56:02 WARN Response has no supported checksum. Not validating response payload.
=== RUN   TestSaveFile/ファイル名に/が含まれていても保存できる
SDK 2025/10/31 21:56:03 WARN Response has no supported checksum. Not validating response payload.
--- PASS: TestSaveFile (0.19s)
    --- PASS: TestSaveFile/特に問題ないので保存できる (0.01s)
    --- PASS: TestSaveFile/ファイルが既に存在するのでErrAlreadyExists (0.01s)
    --- PASS: TestSaveFile/hashが設定されていても保存できる (0.01s)
    --- PASS: TestSaveFile/サイズが大きくても保存できる (0.14s)
    --- PASS: TestSaveFile/ファイル名に/が含まれていても保存できる (0.01s)
=== RUN   TestCreateTempURL
=== RUN   TestCreateTempURL/特に問題ないので取得できる
=== PAUSE TestCreateTempURL/特に問題ないので取得できる
=== RUN   TestCreateTempURL/ファイルが存在しないのでErrNotFound
=== PAUSE TestCreateTempURL/ファイルが存在しないのでErrNotFound
=== RUN   TestCreateTempURL/サイズが大きくても取得できる
=== PAUSE TestCreateTempURL/サイズが大きくても取得できる
=== RUN   TestCreateTempURL/名前に/が含まれていても取得できる
=== PAUSE TestCreateTempURL/名前に/が含まれていても取得できる
=== CONT  TestCreateTempURL/特に問題ないので取得できる
=== CONT  TestCreateTempURL/ファイルが存在しないのでErrNotFound
=== CONT  TestCreateTempURL/サイズが大きくても取得できる
=== CONT  TestCreateTempURL/名前に/が含まれていても取得できる
--- PASS: TestCreateTempURL (0.01s)
    --- PASS: TestCreateTempURL/ファイルが存在しないのでErrNotFound (0.00s)
    --- PASS: TestCreateTempURL/特に問題ないので取得できる (2.01s)
    --- PASS: TestCreateTempURL/名前に/が含まれていても取得できる (2.02s)
    --- PASS: TestCreateTempURL/サイズが大きくても取得できる (2.22s)
=== RUN   TestSaveGameFile
=== RUN   TestSaveGameFile/特に問題ないのでエラーなし
SDK 2025/10/31 21:56:05 WARN Response has no supported checksum. Not validating response payload.
=== RUN   TestSaveGameFile/ファイルが存在するのでErrAlreadyExists
--- PASS: TestSaveGameFile (0.03s)
    --- PASS: TestSaveGameFile/特に問題ないのでエラーなし (0.01s)
    --- PASS: TestSaveGameFile/ファイルが存在するのでErrAlreadyExists (0.01s)
=== RUN   TestFileGetTempURL
=== RUN   TestFileGetTempURL/特に問題ないのでエラーなし
=== RUN   TestFileGetTempURL/ファイルが存在しないのでErrNotFound
--- PASS: TestFileGetTempURL (0.02s)
    --- PASS: TestFileGetTempURL/特に問題ないのでエラーなし (0.02s)
    --- PASS: TestFileGetTempURL/ファイルが存在しないのでErrNotFound (0.00s)
=== RUN   TestFileKey
=== PAUSE TestFileKey
=== RUN   TestSaveGameImage
=== RUN   TestSaveGameImage/特に問題ないのでエラーなし
SDK 2025/10/31 21:56:05 WARN Response has no supported checksum. Not validating response payload.
=== RUN   TestSaveGameImage/ファイルが存在するのでErrAlreadyExists
--- PASS: TestSaveGameImage (0.03s)
    --- PASS: TestSaveGameImage/特に問題ないのでエラーなし (0.01s)
    --- PASS: TestSaveGameImage/ファイルが存在するのでErrAlreadyExists (0.01s)
=== RUN   TestImageGetTempURL
=== RUN   TestImageGetTempURL/特に問題ないのでエラーなし
=== RUN   TestImageGetTempURL/pngでもエラーなし
=== RUN   TestImageGetTempURL/gifでもエラーなし
=== RUN   TestImageGetTempURL/ファイルが存在しないのでErrNotFound
--- PASS: TestImageGetTempURL (0.05s)
    --- PASS: TestImageGetTempURL/特に問題ないのでエラーなし (0.02s)
    --- PASS: TestImageGetTempURL/pngでもエラーなし (0.01s)
    --- PASS: TestImageGetTempURL/gifでもエラーなし (0.01s)
    --- PASS: TestImageGetTempURL/ファイルが存在しないのでErrNotFound (0.00s)
=== RUN   TestImageKey
=== PAUSE TestImageKey
=== RUN   TestSaveGameVideo
=== RUN   TestSaveGameVideo/特に問題ないのでエラーなし
SDK 2025/10/31 21:56:05 WARN Response has no supported checksum. Not validating response payload.
=== RUN   TestSaveGameVideo/ファイルが存在するのでErrAlreadyExists
--- PASS: TestSaveGameVideo (0.10s)
    --- PASS: TestSaveGameVideo/特に問題ないのでエラーなし (0.08s)
    --- PASS: TestSaveGameVideo/ファイルが存在するのでErrAlreadyExists (0.02s)
=== RUN   TestVideoGetTempURL
=== RUN   TestVideoGetTempURL/特に問題ないのでエラーなし
=== RUN   TestVideoGetTempURL/ファイルが存在しないのでErrNotFound
--- PASS: TestVideoGetTempURL (0.11s)
    --- PASS: TestVideoGetTempURL/特に問題ないのでエラーなし (0.08s)
    --- PASS: TestVideoGetTempURL/ファイルが存在しないのでErrNotFound (0.02s)
=== RUN   TestVideoKey
=== PAUSE TestVideoKey
=== CONT  TestFileKey
=== CONT  TestVideoKey
=== CONT  TestImageKey
--- PASS: TestVideoKey (0.00s)
--- PASS: TestFileKey (0.00s)
--- PASS: TestImageKey (0.00s)
PASS
ok  	github.com/traPtitech/trap-collection-server/src/storage/s3	(cached)
=== RUN   TestSaveFile
=== RUN   TestSaveFile/特に問題ないので保存できる
=== RUN   TestSaveFile/ファイルが既に存在するのでErrAlreadyExists
=== RUN   TestSaveFile/hashが設定されていても保存できる
=== RUN   TestSaveFile/hashが誤っているのでエラー
=== RUN   TestSaveFile/サイズが大きくても保存できる
=== RUN   TestSaveFile/ファイル名に/が含まれていても保存できる
--- PASS: TestSaveFile (0.25s)
    --- PASS: TestSaveFile/特に問題ないので保存できる (0.00s)
    --- PASS: TestSaveFile/ファイルが既に存在するのでErrAlreadyExists (0.00s)
    --- PASS: TestSaveFile/hashが設定されていても保存できる (0.00s)
    --- PASS: TestSaveFile/hashが誤っているのでエラー (0.00s)
    --- PASS: TestSaveFile/サイズが大きくても保存できる (0.23s)
    --- PASS: TestSaveFile/ファイル名に/が含まれていても保存できる (0.00s)
=== RUN   TestCreateTempURL
=== RUN   TestCreateTempURL/特に問題ないので取得できる
=== RUN   TestCreateTempURL/ファイルが存在しないのでErrNotFound
=== RUN   TestCreateTempURL/サイズが大きくても取得できる
=== RUN   TestCreateTempURL/名前に/が含まれていても取得できる
--- PASS: TestCreateTempURL (0.19s)
    --- PASS: TestCreateTempURL/特に問題ないので取得できる (0.02s)
    --- PASS: TestCreateTempURL/ファイルが存在しないのでErrNotFound (0.00s)
    --- PASS: TestCreateTempURL/サイズが大きくても取得できる (0.15s)
    --- PASS: TestCreateTempURL/名前に/が含まれていても取得できる (0.00s)
=== RUN   TestSaveGameFile
=== RUN   TestSaveGameFile/特に問題ないのでエラーなし
=== RUN   TestSaveGameFile/ファイルが存在するのでErrAlreadyExists
--- PASS: TestSaveGameFile (0.01s)
    --- PASS: TestSaveGameFile/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestSaveGameFile/ファイルが存在するのでErrAlreadyExists (0.00s)
=== RUN   TestFileGetTempURL
=== RUN   TestFileGetTempURL/特に問題ないのでエラーなし
=== RUN   TestFileGetTempURL/ファイルが存在しないのでErrNotFound
--- PASS: TestFileGetTempURL (0.00s)
    --- PASS: TestFileGetTempURL/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestFileGetTempURL/ファイルが存在しないのでErrNotFound (0.00s)
=== RUN   TestFileKey
=== PAUSE TestFileKey
=== RUN   TestSaveGameImage
=== RUN   TestSaveGameImage/特に問題ないのでエラーなし
=== RUN   TestSaveGameImage/ファイルが存在するのでErrAlreadyExists
--- PASS: TestSaveGameImage (0.01s)
    --- PASS: TestSaveGameImage/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestSaveGameImage/ファイルが存在するのでErrAlreadyExists (0.00s)
=== RUN   TestImageGetTempURL
=== RUN   TestImageGetTempURL/特に問題ないのでエラーなし
=== RUN   TestImageGetTempURL/pngでもエラーなし
=== RUN   TestImageGetTempURL/gifでもエラーなし
=== RUN   TestImageGetTempURL/ファイルが存在しないのでErrNotFound
--- PASS: TestImageGetTempURL (0.02s)
    --- PASS: TestImageGetTempURL/特に問題ないのでエラーなし (0.00s)
    --- PASS: TestImageGetTempURL/pngでもエラーなし (0.00s)
    --- PASS: TestImageGetTempURL/gifでもエラーなし (0.01s)
    --- PASS: TestImageGetTempURL/ファイルが存在しないのでErrNotFound (0.00s)
=== RUN   TestImageKey
=== PAUSE TestImageKey
=== RUN   TestSaveGameVideo
=== RUN   TestSaveGameVideo/特に問題ないのでエラーなし
=== RUN   TestSaveGameVideo/ファイルが存在するのでErrAlreadyExists
--- PASS: TestSaveGameVideo (0.12s)
    --- PASS: TestSaveGameVideo/特に問題ないのでエラーなし (0.10s)
    --- PASS: TestSaveGameVideo/ファイルが存在するのでErrAlreadyExists (0.01s)
=== RUN   TestVideoGetTempURL
=== RUN   TestVideoGetTempURL/特に問題ないのでエラーなし
=== RUN   TestVideoGetTempURL/ファイルが存在しないのでErrNotFound
--- PASS: TestVideoGetTempURL (0.11s)
    --- PASS: TestVideoGetTempURL/特に問題ないのでエラーなし (0.08s)
    --- PASS: TestVideoGetTempURL/ファイルが存在しないのでErrNotFound (0.02s)
=== RUN   TestVideoKey
=== PAUSE TestVideoKey
=== CONT  TestFileKey
=== CONT  TestVideoKey
=== CONT  TestImageKey
--- PASS: TestFileKey (0.00s)
--- PASS: TestVideoKey (0.00s)
--- PASS: TestImageKey (0.00s)
PASS
ok  	github.com/traPtitech/trap-collection-server/src/storage/swift	(cached)
?   	github.com/traPtitech/trap-collection-server/src/wire	[no test files]
FAIL
task: Failed to run task "test": exit status 1
